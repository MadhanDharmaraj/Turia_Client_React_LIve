(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[66],{1471:function(e,t,n){"use strict";n.r(t);var c=n(14),s=n(1),a=n(4),i=n(22),r=n(2),l=n(13),o=n(139),d=n(7),u=n.n(d),j=n(5),m=n(545),b=n.n(m),f=n(719),v=n(831),O=n(536),x=n(148),p=n(533),h=n(539),g=n(540),w=n(96),N=(n(537),n(535),n(530),n(534),n(140)),y=n(10),I=n(526),D=n(527),k=n(542),C=n.n(k),B=n(543),_=n.n(B),E=n(16),S=Object(y.d)(),P=Object(y.b)(),F=function(){var e,t=Object(r.useState)(!1),n=Object(i.a)(t,2),d=n[0],m=n[1],y=function(){return Object(E.jsx)(r.Fragment,{children:Object(E.jsx)(D.a,{})})},k=_()(C.a),B=Object(N.b)(),F=Object(N.c)((function(e){return e.digitalsignature})),z=Object(l.f)(),V=h.d().shape({clientId:h.f().required("Please select a Client"),rows:h.a().of(h.d().shape({name:h.f().required("Please Enter Name"),updatedBy:h.f().default(S),organizationId:h.f().default(P),email:h.f().email().required("Please Enter Email"),contact:h.f().matches(/^[0-9\- ]{10,10}$/,{message:"Phone number is not valid",excludeEmptyString:!0}),issuedDate:h.c().required("Please Enter Issued Date"),expiryDate:h.c().required("Please Enter Expiry Date"),password:h.f()}))}),q=Object(p.f)({resolver:Object(g.a)(V),defaultValues:V.cast()}),K=q.handleSubmit,Y=q.formState.errors,L=q.control,A=q.setValue,J=Object(l.g)().id,R=Object(r.useState)([]),U=Object(i.a)(R,2),M=U[0],T=U[1],$=Object(p.e)({name:"rows",keyName:"rowid",control:L}),G=$.fields,H=$.append,Q=$.remove,W=function(){var e=Object(a.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,B(Object(x.i)(t));case 3:z("/digital-signature/list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){return k.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(a.a)(Object(s.a)().mark((function t(n){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=7;break}return t.next=3,B(Object(x.d)(e));case 3:return k.fire({icon:"success",title:"Deleted!",text:"DSC has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 7:if(n.dismiss!==k.DismissReason.cancel){t.next=9;break}return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Z=function(){var e=Object(a.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===J){e.next=3;break}return e.next=3,B(Object(x.a)(J));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(a.a)(Object(s.a)().mark((function e(t){var n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=L._formValues.rows[t].id)){e.next=5;break}return e.next=4,X(n);case 4:c=e.sent;case 5:c&&Q(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(a.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/clients/dropdown").then((function(e){var t=e.data;T(t.clients),Z()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){F.DSCLists.forEach((function(e){var t={};t.id=e.id,t.name=e.name,t.email=e.email,t.organizationId=P,t.clientId=J,t.contact=e.contact,t.issuedDate=13===e.issueddate.length?String(e.issueddate/1e3):e.issueddate,t.expiryDate=13===e.expirydate.length?String(e.expirydate/1e3):e.expirydate,t.password=e.password,H(t)}))}),[F.DSCLists]),Object(r.useEffect)((function(){A("clientId",J),te()}),[]),Object(E.jsx)(I.a,{blocking:d,loader:Object(E.jsx)(y,{}),children:Object(E.jsxs)("form",{onSubmit:K(W),children:[Object(E.jsxs)(w.l,{className:"invoice-preview-card",children:[Object(E.jsx)(w.m,{className:"pb-0",children:Object(E.jsx)(w.ib,{children:Object(E.jsx)(w.B,{md:"6",className:"mb-1",children:Object(E.jsxs)(w.ib,{className:"mb-1",children:[Object(E.jsx)(w.N,{sm:"3",size:"lg",className:"form-label",for:"clientId",children:"Client"}),Object(E.jsxs)(w.B,{sm:"9",children:[Object(E.jsx)(p.a,{control:L,name:"clientId",id:"clientId",render:function(e){var t=e.field,n=e.ref;return Object(E.jsx)(O.a,Object(c.a)(Object(c.a)({},t),{},{inputRef:n,isDisabled:!0,className:u()("react-select",{"is-invalid":Y.clientId}),classNamePrefix:"select",options:M,value:M.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),Y.clientId&&Object(E.jsx)(w.I,{className:"text-danger",children:null===(e=Y.clientId)||void 0===e?void 0:e.message})]})]})})})}),Object(E.jsxs)(w.m,{className:"invoice-padding invoice-product-details",children:[G.map((function(e,t){var n,s,a,i,r,l,o,d,u,j,m,v,O,x,h,g,N,y,I,D,k,C,B,_;return Object(E.jsx)("div",{className:"repeater-wrapper",children:Object(E.jsx)(w.ib,{children:Object(E.jsxs)(w.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(E.jsxs)(w.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(E.jsxs)(w.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-2 col-sm-12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Name"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_name",name:"rows[".concat(t,"].name"),render:function(e){var n,s,a=e.field;return Object(E.jsx)(w.K,Object(c.a)({type:"text",invalid:(null===(n=Y.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.name)&&!0},a))}}),(null===(n=Y.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.name)&&Object(E.jsx)(w.I,{children:null===(a=Y.rows)||void 0===a||null===(i=a[t])||void 0===i?void 0:i.name.message})]}),Object(E.jsxs)(w.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Email"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_email",name:"rows[".concat(t,"].email"),render:function(e){var n,s,a=e.field;return Object(E.jsx)(w.K,Object(c.a)({type:"email",invalid:(null===(n=Y.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.email)&&!0},a))}}),(null===(r=Y.rows)||void 0===r||null===(l=r[t])||void 0===l?void 0:l.email)&&Object(E.jsx)(w.I,{children:null===(o=Y.rows)||void 0===o||null===(d=o[t])||void 0===d?void 0:d.email.message})]}),Object(E.jsxs)(w.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Mobile"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_contactNumber",name:"rows[".concat(t,"].contact"),render:function(e){var n,s,a=e.field;return Object(E.jsx)(w.K,Object(c.a)({type:"number",invalid:(null===(n=Y.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.contact)&&!0},a))}}),(null===(u=Y.rows)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.contact)&&Object(E.jsx)(w.I,{children:null===(m=Y.rows)||void 0===m||null===(v=m[t])||void 0===v?void 0:v.contact.message})]}),Object(E.jsxs)(w.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Issued Date"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_issuedDate",name:"rows[".concat(t,"].issuedDate"),render:function(e){var t=e.field;return Object(E.jsx)(b.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}}),(null===(O=Y.rows)||void 0===O||null===(x=O[t])||void 0===x?void 0:x.issuedDate)&&Object(E.jsx)(w.I,{children:null===(h=Y.rows)||void 0===h||null===(g=h[t])||void 0===g?void 0:g.issuedDate.message})]}),Object(E.jsxs)(w.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Expiry Date"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_expiryDate",name:"rows[".concat(t,"].expiryDate"),render:function(e){var t=e.field;return Object(E.jsx)(b.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}}),(null===(N=Y.rows)||void 0===N||null===(y=N[t])||void 0===y?void 0:y.expiryDate)&&Object(E.jsx)(w.I,{children:null===(I=Y.rows)||void 0===I||null===(D=I[t])||void 0===D?void 0:D.expiryDate.message})]}),Object(E.jsxs)(w.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(E.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Password"}),Object(E.jsx)(p.a,{control:L,id:"dsc_list_password",name:"rows[".concat(t,"].password"),render:function(e){var n,s,a=e.field;return Object(E.jsx)(w.K,Object(c.a)({type:"text",invalid:(null===(n=Y.rows)||void 0===n||null===(s=n[t])||void 0===s?void 0:s.password)&&!0},a))}}),(null===(k=Y.rows)||void 0===k||null===(C=k[t])||void 0===C?void 0:C.password)&&Object(E.jsx)(w.I,{children:null===(B=Y.rows)||void 0===B||null===(_=B[t])||void 0===_?void 0:_.password.message})]})]}),Object(E.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(E.jsx)(f.a,{size:18,className:"cursor-pointer",onClick:function(){return ee(t)}})})]})})},e.rowid)})),Object(E.jsx)(w.ib,{className:"mt-1",children:Object(E.jsx)(w.B,{sm:"12",className:"px-0",children:Object(E.jsxs)(w.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return H({clientId:"",name:"",email:"",contact:"",issuedDate:"",expiryDate:"",password:""}),void L._formValues.rows.forEach((function(e,t){L._formValues.rows[t].clientId=J}))},children:[Object(E.jsx)(v.a,{size:14,className:"me-25"})," ",Object(E.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(E.jsx)(w.l,{children:Object(E.jsx)(w.m,{children:Object(E.jsxs)("div",{className:"modal-footer border-0",children:[Object(E.jsx)(w.i,{color:"warning",outline:!0,tag:o.b,to:"/digital-signature/list",children:"Cancel"}),Object(E.jsx)(w.i,{color:"primary",type:"submit",children:"Save"})]})})})]})})};t.default=function(){return Object(E.jsx)("div",{className:"invoice-add-wrapper",children:Object(E.jsx)(w.ib,{className:"invoice-add",children:Object(E.jsx)(w.B,{xl:12,md:12,sm:12,children:Object(E.jsx)(F,{})})})})}},526:function(e,t,n){"use strict";var c=n(14),s=n(34),a=n(2),i=n(7),r=n.n(i),l=n(96),o=(n(529),n(16)),d=function(e){var t,n=e.children,i=e.blocking,l=e.loader,d=e.className,u=e.tag,j=e.overlayColor,m=u;return Object(o.jsxs)(m,{className:r()("ui-loader",(t={},Object(s.a)(t,d,d),Object(s.a)(t,"show",i),t)),children:[n,i?Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",Object(c.a)({className:"overlay"},i&&j?{style:{backgroundColor:j}}:{})),Object(o.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(l.jb,{color:"primary"})}},527:function(e,t,n){"use strict";var c=n(16);t.a=function(){return Object(c.jsx)("div",{className:"fallback-spinner",children:Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("div",{className:"effect-1 effects"}),Object(c.jsx)("div",{className:"effect-2 effects"}),Object(c.jsx)("div",{className:"effect-3 effects"})]})})}},529:function(e,t,n){},530:function(e,t,n){},534:function(e,t,n){},537:function(e,t,n){}}]);
//# sourceMappingURL=66.d0fc3597.chunk.js.map