(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[71],{1411:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(4),a=c(22),i=c(2),r=c(13),l=c(139),o=c(148),j=c(140),d=c(96),b=c(811),u=c(727),m=c(687),O=(c(566),c(16)),x=function(e){return Object(O.jsx)(i.Fragment,{children:Object(O.jsx)(m.a,{moduleName:"dsc",moduleRefId:e.selectedDigitalSignature.clientid,tabId:e.tabId})})},f=c(758),h=c(547),p=c.n(h),g=c(528),v=(c(532),c(39)),N=c.n(v),w=function(e){return 13===e.length?N()(e,"x").format("MMM DD, YYYY"):N.a.unix(e).format("MMM DD, YYYY")},y=["","Active","Inactive","Expired"],S=["","light-success","Inactive","light-danger"],D=[{name:"ID",sortable:!0,minWidth:"102px",sortField:"role",selector:function(e){return e.id},cell:function(e){return Object(O.jsx)("div",{className:"d-flex justify-content-left align-items-center",children:Object(O.jsx)(l.b,{to:"/digital-signature/view/".concat(e.id),className:"user_name text-truncate text-body",children:Object(O.jsx)("span",{className:"text-capitalize fw-bolder",children:e.uniqueidentity})})})}},{sortable:!0,minWidth:"300px",name:"Client",selector:function(e){return e.name},cell:function(e){return Object(O.jsxs)("div",{className:"d-flex justify-content-left align-items-center",children:[Object(O.jsx)("div",{className:"avatar-wrapper",children:Object(O.jsx)(g.a,{className:"me-1",content:e.name.charAt(0),alt:e.name,imgWidth:"32"})}),Object(O.jsxs)("div",{className:"d-flex flex-column",children:[Object(O.jsx)("span",{className:"text-truncate fw-bolder",children:e.name}),Object(O.jsx)("small",{className:"text-muted",children:e.email})]})]})}},{name:"Contact",selector:function(e){return e.contact}},{name:"Issued Date",selector:function(e){return w(e.issueddate)}},{name:"Expiry Date",selector:function(e){return w(e.expirydate)}},{name:"Status",selector:function(e){return e.status},sortable:!0,cell:function(e){return Object(O.jsx)("div",{className:"d-flex flex-column w-100",children:Object(O.jsx)(d.f,{color:S[e.status],children:"".concat(y[e.status])})})}}],k=function(){var e=Object(j.c)((function(e){return e.digitalsignature})),t=Object(i.useState)([]),c=Object(a.a)(t,2),r=c[0],l=c[1],b=Object(j.b)();return Object(i.useEffect)(Object(s.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.DSCLists.length>0&&l(e.DSCLists);case 1:case"end":return t.stop()}}),t)}))),[e.DSCLists]),Object(i.useEffect)(Object(s.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.selectedDigitalSignature){t.next=3;break}return t.next=3,b(Object(o.a)(e.selectedDigitalSignature.clientid));case 3:case"end":return t.stop()}}),t)}))),[e.selectedDigitalSignature]),Object(O.jsxs)(d.l,{children:[Object(O.jsx)(d.p,{tag:"h4",children:"Digital Signature List"}),Object(O.jsx)("div",{className:"react-dataTable user-view-account-projects",children:Object(O.jsx)(p.a,{noHeader:!0,responsive:!0,columns:D,data:r,className:"react-dataTable",sortIcon:Object(O.jsx)(f.a,{size:10})})})]})},C=function(e){var t=e.active,c=e.toggleTab,n=e.selectedDigitalSignature;return Object(O.jsxs)(i.Fragment,{children:[Object(O.jsxs)(d.U,{pills:!0,className:"mb-2",children:[Object(O.jsx)(d.V,{children:Object(O.jsxs)(d.W,{active:"dscnotes"===t,onClick:function(){return c("dscnotes")},children:[Object(O.jsx)(b.a,{className:"font-medium-3 me-50"}),Object(O.jsx)("span",{className:"fw-bold",children:"Notes"})]})}),Object(O.jsx)(d.V,{children:Object(O.jsxs)(d.W,{active:"dsclist"===t,onClick:function(){return c("dsclist")},children:[Object(O.jsx)(u.a,{className:"font-medium-3 me-50"}),Object(O.jsx)("span",{className:"fw-bold",children:"List"})]})})]}),Object(O.jsxs)(d.kb,{activeTab:t,children:[Object(O.jsx)(d.lb,{tabId:"dscnotes",children:Object(O.jsx)(x,{tabId:t,selectedDigitalSignature:n})}),Object(O.jsx)(d.lb,{tabId:"dsclist",children:Object(O.jsx)(k,{})})]})]})},I=c(144),Y=c(541),z=(c(535),c(536)),M=c(10),F=c(141),B=Object(M.d)(),E=function(e){var t=e.selectedDigitalSignature,c=Object(j.b)(),b=Object(r.g)().id,u=Object(i.useState)(null),m=Object(a.a)(u,2),x=m[0],f=m[1],h=function(e){return 13===e.length?N()(e,"x").format("MMM DD, YYYY"):N.a.unix(e).format("MMM DD, YYYY")},p=[{id:1,name:"Office"},{id:2,name:"With Client"}],v=["","light-primary","light-success","light-warning"],w=function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:b,location:t,updatedBy:B},f(p[t-1]),e.next=4,c(Object(o.j)(s));case 4:F.b.success("Digital Signature Location Update Successfully.",{position:"bottom-right"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){f(p[t.dsclocation-1])}),[t]),Object(O.jsx)(i.Fragment,{children:Object(O.jsx)(d.l,{children:Object(O.jsxs)(d.m,{children:[Object(O.jsx)("div",{className:"user-avatar-section",children:Object(O.jsxs)("div",{className:"d-flex align-items-center flex-column",children:[Object(O.jsx)(g.a,{initials:!0,color:"light-primary",className:"rounded mt-3 mb-2",content:t.clientname.charAt(0),contentStyles:{borderRadius:0,fontSize:"calc(48px)",width:"100%",height:"100%"},style:{height:"110px",width:"110px"}}),Object(O.jsx)("div",{className:"d-flex flex-column align-items-center text-center",children:Object(O.jsx)("div",{className:"user-info",children:Object(O.jsx)("h4",{children:null!==t?t.clientname:"Eleanor Aguilar"})})})]})}),Object(O.jsxs)(d.ib,{className:"align-items-end",children:[Object(O.jsx)(d.B,{children:Object(O.jsx)("h6",{children:"Details"})}),Object(O.jsx)(d.B,{children:Object(O.jsx)(z.a,{theme:Y.i,isClearable:!1,className:"react-select",classNamePrefix:"select",options:p,value:x,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})})]}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{className:"info-container",children:null!==t?Object(O.jsxs)("ul",{className:"list-unstyled",children:[Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"DSC ID:"}),Object(O.jsx)("span",{children:t.uniqueidentity})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Name:"}),Object(O.jsx)("span",{children:t.name})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Email:"}),Object(O.jsx)("span",{children:t.email})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Contact:"}),Object(O.jsx)("span",{children:t.contact})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Password:"}),Object(O.jsx)("span",{children:t.password})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Location:"}),Object(O.jsx)(d.f,{className:"text-capitalize",color:v[t.dsclocation],children:["","Office","With Client"][t.dsclocation]})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Status:"}),Object(O.jsx)(d.f,{className:"text-capitalize",color:v[t.status],children:["","Active","Inactive","Expired"][t.status]})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Issued Date:"}),Object(O.jsx)("span",{children:h(t.issueddate)})]}),Object(O.jsxs)("li",{className:"mb-75",children:[Object(O.jsx)("span",{className:"fw-bolder me-25",children:"Expiry Date:"}),Object(O.jsx)("span",{children:h(t.expirydate)})]})]}):null}),Object(O.jsxs)("div",{className:"d-flex justify-content-center pt-2",children:[Object(O.jsx)(I.b,{I:"write",a:"digital-signature",children:Object(O.jsx)(d.i,{color:"primary",tag:l.b,to:"/digital-signature/edit/".concat(t.id),children:"Edit"})}),Object(O.jsx)(d.i,{className:"ms-1",color:"danger",outline:!0,tag:l.b,to:"/digital-signature/list",children:"Cancel"})]})]})})})},A=c(526),L=c(527);c(544),t.default=function(){var e=Object(j.c)((function(e){return e.digitalsignature})),t=Object(j.b)(),c=Object(i.useState)(!1),b=Object(a.a)(c,2),u=b[0],m=b[1],x=function(){return Object(O.jsx)(i.Fragment,{children:Object(O.jsx)(L.a,{})})},f=Object(r.g)().id;Object(i.useEffect)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,t(Object(o.h)(f));case 3:m(!1);case 4:case"end":return e.stop()}}),e)}))),[t]);var h=Object(i.useState)("dscnotes"),p=Object(a.a)(h,2),g=p[0],v=p[1];return null!==e.selectedDigitalSignature&&void 0!==e.selectedDigitalSignature?Object(O.jsx)(A.a,{blocking:u,loader:Object(O.jsx)(x,{}),children:Object(O.jsx)("div",{className:"app-user-view",children:Object(O.jsxs)(d.ib,{children:[Object(O.jsx)(d.B,{xl:"4",lg:"5",xs:{order:1},md:{order:0,size:5},children:Object(O.jsx)(E,{selectedDigitalSignature:e.selectedDigitalSignature})}),Object(O.jsx)(d.B,{xl:"8",lg:"7",xs:{order:0},md:{order:1,size:7},children:Object(O.jsx)(C,{active:g,toggleTab:function(e){g!==e&&v(e)},selectedDigitalSignature:e.selectedDigitalSignature})})]})})}):Object(O.jsx)(A.a,{blocking:u,loader:Object(O.jsx)(x,{}),children:Object(O.jsxs)(d.e,{color:"danger",children:[Object(O.jsx)("h4",{className:"alert-heading",children:"DSC not found"}),Object(O.jsxs)("div",{className:"alert-body",children:["DSC with id: ",f," doesn't exist. Check list of all DSC's: ",Object(O.jsx)(l.b,{to:"/digital-signature/list",children:"DSC's List"})]})]})})}},526:function(e,t,c){"use strict";var n=c(14),s=c(34),a=c(2),i=c(7),r=c.n(i),l=c(96),o=(c(529),c(16)),j=function(e){var t,c=e.children,i=e.blocking,l=e.loader,j=e.className,d=e.tag,b=e.overlayColor,u=d;return Object(o.jsxs)(u,{className:r()("ui-loader",(t={},Object(s.a)(t,j,j),Object(s.a)(t,"show",i),t)),children:[c,i?Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("div",Object(n.a)({className:"overlay"},i&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=j,j.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(l.jb,{color:"primary"})}},527:function(e,t,c){"use strict";var n=c(16);t.a=function(){return Object(n.jsx)("div",{className:"fallback-spinner",children:Object(n.jsxs)("div",{className:"loading",children:[Object(n.jsx)("div",{className:"effect-1 effects"}),Object(n.jsx)("div",{className:"effect-2 effects"}),Object(n.jsx)("div",{className:"effect-3 effects"})]})})}},529:function(e,t,c){},532:function(e,t,c){},544:function(e,t,c){},687:function(e,t,c){"use strict";var n=c(142),s=c(14),a=c(1),i=c(4),r=c(22),l=c(2),o=c(141),j=c(572),d=c(5),b=c(96),u=(c(566),c(719)),m=c(826),O=c(528),x=c(174),f=c(140),h=c(542),p=c.n(h),g=c(543),v=c.n(g),N=c(10),w=c(39),y=c.n(w),S=c(13),D=c(526),k=c(527),C=c(16),I=Object(N.b)(),Y=Object(N.d)(),z=v()(p.a);t.a=function(e){var t=e.moduleRefId,c=e.tabId,h=Object(l.useState)(!1),p=Object(r.a)(h,2),g=p[0],v=p[1],N=function(){return Object(C.jsx)(l.Fragment,{children:Object(C.jsx)(k.a,{})})},w=Object(f.b)(),M=Object(l.useState)([]),F=Object(r.a)(M,2),B=F[0],E=F[1],A=Object(l.useState)([]),L=Object(r.a)(A,2),P=L[0],T=L[1],W=Object(l.useState)([]),R=Object(r.a)(W,2),U=R[0],V=R[1],_=Object(l.useState)([]),q=Object(r.a)(_,2),J=q[0],K=q[1],H=Object(l.useState)(""),G=Object(r.a)(H,2),Q=G[0],X=G[1],Z=Object(l.useState)(""),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ce=Object(l.useState)(0),ne=Object(r.a)(ce,2),se=ne[0],ae=ne[1],ie=Object(S.g)().id,re=Object(f.c)((function(e){return e.notes})),le=function(e){var t=P.map((function(t,c){return c===e?(te(t.description),Object(s.a)(Object(s.a)({},t),{},{editFlag:!0})):Object(s.a)(Object(s.a)({},t),{},{editFlag:!1})}));T(t)},oe={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){ae(Math.round(100*e.loaded/e.total))}},je=Object(j.a)({multiple:!0,onDrop:function(e,t){t.length?o.b.error("You can only upload image Files!."):(E(e),V([].concat(Object(n.a)(U),Object(n.a)(e))))}}),de=je.getRootProps,be=je.getInputProps;Object(l.useEffect)((function(){B.length>0&&function(){var e=new FormData;B.forEach((function(t,c){e.append("files[".concat(c,"]"),t)})),e.append("id",t),e.append("organizationId",I),e.append("createdBy",Y),v(!0),d.a.post("/google/clientfolders",e,oe).then((function(e){K([].concat(Object(n.a)(J),Object(n.a)(e.data.attachment_ids))),E([]),v(!1)})).catch((function(e){console.log(e),v(!1)}))}()}),[B]);var ue=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.description=ee,!(""!==t.description||J.length>0)){e.next=5;break}return e.next=4,w(Object(x.e)(t));case 4:o.b.success("Comment Updated Successfully.",{position:"bottom-right"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)(Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("clientnotes"!==c&&"tasknotes"!==c&&"dscnotes"!==c&&"servicetemplate"!==c){e.next=3;break}return e.next=3,w(Object(x.d)(ie));case 3:case"end":return e.stop()}}),e)}))),[c]),Object(l.useEffect)((function(){T(re.data||[])}),[re.data]);var me=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""!==Q||J.length>0)){e.next=11;break}return c={organizationId:I,createdBy:Y,updatedBy:Y,description:Q,attachmentIds:J,moduleReferenceId:t,moduleId:ie},v(!0),e.next=5,w(Object(x.a)(c));case 5:o.b.success("Comment Added Successfully.",{position:"bottom-right"}),X(""),E([]),V([]),ae(0),v(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=B.map((function(e,t){return Object(C.jsxs)(b.P,{className:"d-flex align-items-center justify-content-between",children:[Object(C.jsxs)("div",{className:"file-details d-flex align-items-center",children:[Object(C.jsx)("div",{className:"file-preview me-1",children:Object(C.jsx)(O.a,{})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:"file-name mb-0",children:e.name}),Object(C.jsx)("p",{className:"file-size mb-0",children:(c=e.size,Math.round(c/100)/10>1e3?"".concat((Math.round(c/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(c/100)/10).toFixed(1)," kb"))})]})]}),Object(C.jsx)(b.i,{color:"danger",outline:!0,size:"sm",className:"btn-icon",onClick:function(){return function(e){var t=B.filter((function(t){return t.name!==e.name}));E(Object(n.a)(t)),ae(0)}(e)},children:Object(C.jsx)(u.a,{size:14})})]},"".concat(e.name,"-").concat(t));var c}));return Object(C.jsx)(l.Fragment,{children:Object(C.jsx)(D.a,{blocking:g,loader:Object(C.jsx)(N,{}),children:Object(C.jsx)(b.l,{children:Object(C.jsxs)(b.m,{children:[Object(C.jsxs)("fieldset",{className:"form-label-group mb-50",children:[Object(C.jsx)(b.N,{className:"form-check-label",for:"add-comment-",children:"Add Comment"}),Object(C.jsx)(b.K,{id:"add-comment-",type:"textarea",rows:"3",placeholder:"Add Comment",value:Q,onInput:function(e){return X(e.target.value)}})]}),Object(C.jsx)("input",Object(s.a)({},be())),Object(C.jsx)(b.i,Object(s.a)(Object(s.a)({type:"button",color:"primary",size:"sm"},de({className:"dropzone"})),{},{children:Object(C.jsx)(m.a,{size:14,className:""})})),Object(C.jsx)(b.i,{color:"primary",className:"ms-1",size:"sm",onClick:function(){return me()},children:"Post Comment"}),se>0&&Object(C.jsx)(b.hb,{color:se<100?"primary":"success",value:se}),Object(C.jsx)(b.O,{children:Oe}),P.map((function(e,t){return Object(C.jsxs)("div",{className:"d-flex align-items-start my-1",children:[(n=e,Object(C.jsx)(O.a,{initials:!0,className:"me-1",color:"light-primary",content:n.username.charAt(0)||"T"})),Object(C.jsxs)("div",{className:"profile-user-info w-100",children:[Object(C.jsx)("div",{className:"d-flex align-items-center justify-content-between",children:Object(C.jsx)("h6",{className:"mb-0",children:e.username})}),!e.editFlag&&Object(C.jsxs)(b.ib,{className:"mt-1",children:[Object(C.jsxs)("div",{className:"white-space-wrap",children:[e.description.replace(/(\\n)/g,"\n"),Object(C.jsx)(b.ib,{children:null!==e.files[0]&&e.files.map((function(e,t){return Object(C.jsx)(b.B,{md:"4",className:"file-details d-flex align-items-center cursor-pointer",children:Object(C.jsxs)(b.P,{className:"col-12 d-flex mb-1 align-items-center",children:[Object(C.jsx)("div",{className:"file-preview me-1",children:Object(C.jsx)("img",{width:25,height:25,src:"https://drive.google.com/thumbnail?id=".concat(e.driveid),alt:"image"})}),Object(C.jsx)("a",{target:"_blank",className:"file-name mb- text-overflow-ellipsis",href:"http://docs.google.com/fileview?id=".concat(e.driveid,"&hl=en&pid=explorer&efh=false&a=v&chrome=false&embedded=true"),children:e.originalfilename.split(".")[0].length>15?"".concat(e.originalfilename.split(".")[0].substr(0,15),".").concat(e.extension):e.originalfilename})]})},t)}))})]}),Object(C.jsxs)("div",{className:"d-flex mt-1",children:[Object(C.jsx)("span",{className:"text-sm",children:(c=e.createdon,y()(c,"x").format("YYYY, MMM-D h:m A"))}),"\xa0\xa0",!e.editFlag&&Object(C.jsxs)(b.B,{className:"d-flex",md:1,children:[Object(C.jsx)("span",{className:"text-primary cursor-pointer",onClick:function(){return le(t)},children:".Edit"})," \xa0\xa0",Object(C.jsx)("span",{className:"text-danger cursor-pointer",onClick:function(){return function(e){return z.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(i.a)(Object(a.a)().mark((function t(c){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c.value){t.next=4;break}return t.next=3,w(Object(x.c)(e));case 3:z.fire({icon:"success",title:"Deleted!",text:"Invoice has been deleted.",customClass:{confirmButton:"btn btn-success"}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(e)},children:".Delete"})]})]})]}),e.editFlag&&Object(C.jsxs)(b.ib,{className:"mt-2",children:[Object(C.jsx)(b.K,{type:"textarea",roes:"3",value:ee.replace(/(\\n)/g,"\n"),onInput:function(e){te(e.target.value)}}),Object(C.jsxs)(b.B,{className:"d-flex justify-content-end mt-1",children:[Object(C.jsx)(b.i,{size:"sm",color:"warning",outline:!0,onClick:function(){return le(-1)},children:"Cancel"}),Object(C.jsx)(b.i,{size:"sm",color:"primary",className:"ms-1",onClick:function(){return ue(e)},children:"Save"})]})]})]})]},t);var c,n}))]})})})})}}}]);
//# sourceMappingURL=71.2ca92e1c.chunk.js.map