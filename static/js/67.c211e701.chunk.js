(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[67],{1672:function(e,t,n){"use strict";n.r(t);var c=n(17),i=n(135),a=n(4),s=n(18),l=n(2),r=n.n(l),o=n(1),d=n(11),j=n(132),m=n(6),b=n.n(m),u=n(133),f=n(147),O=n(5),h=n(817),x=n(928),v=n(509),p=n(507),g=n(521),N=n(522),y=n(12),_=n(91),B=(n(523),n(510),n(508),n(512),n(13)),C=Object(y.b)(),E=Object(y.d)(),S=function(){var e,t=/^[0-9\- ]{10,10}$/,n=Object(d.f)({}),l=Object(u.b)(),m=Object(o.useState)([]),y=Object(s.a)(m,2),S=y[0],P=y[1],T=Object(o.useState)([]),I=Object(s.a)(T,2),q=I[0],A=I[1],k=Object(o.useState)([]),w=Object(s.a)(k,2),L=w[0],z=w[1],D=Object(o.useState)([]),G=Object(s.a)(D,2),Z=G[0],R=G[1],V=Object(o.useState)([]),J=Object(s.a)(V,2),M=J[0],$=J[1],F=Object(o.useState)([]),U=Object(s.a)(F,2),H=U[0],K=U[1],Q=Object(o.useState)(null),W=Object(s.a)(Q,2),X=W[0],Y=W[1],ee=Object(u.c)((function(e){return e.client})),te=g.d().shape({clientType:g.c().default(2),createdBy:g.f().default(E),organization:g.c().default(C),uniqueIdentity:g.f().nullable(),contactPersonName:g.f().required("Please Enter a Contact Person Name"),name:g.f().when("clientType",{is:function(e){return 2===e},then:g.f().required("Please Enter Business Name.")}).default(""),contactNumber:g.f().required("Please Enter Conatct Number").matches(t,{message:"Phone number is not valid",excludeEmptyString:!0}),email:g.f().email("Please Enter valid Email").required("Please Enter valid Email"),businessEntity:g.f().when("clientType",{is:function(e){return 2===e},then:g.f().required("Please Select Business Enity.")}),gstRegistrationType:g.f().required("Please select a GST Type"),gstin:g.f().required("Please Enter GSTIN No"),placeOfSupply:g.f().required("Please select Place Of Supply"),currency:g.f().default(3),billingAddressLine1:g.f().nullable(),billingAddressLine2:g.f().nullable(),billingAddressCity:g.f().nullable(),billingAddressState:g.c().nullable(),billingAddressCountry:g.c().nullable(),billingAddressZip:g.f().matches(/^[0-9\- ]{6,6}$/,{message:"Zip Code is not valid",excludeEmptyString:!0}),contact_info:g.a().of(g.d().shape({createdBy:g.f().default(E),name:g.f().required("Please Enter A Name"),email:g.f().email().required("Please Enter valid Email"),designation:g.f().required("Please Enter Designation"),contactNumber:g.f().required("Please Enter Conatct Number").matches(t,{message:"Phone number is not valid",excludeEmptyString:!0})})).min(1,"Please Enter atleast one contact Info")}),ne=Object(p.f)({resolver:Object(N.a)(te),defaultValues:te.cast()}),ce=ne.handleSubmit,ie=ne.control,ae=ne.formState.errors,se=ne.setError,le=Object(p.e)({name:"contact_info",control:ie}),re=le.fields,oe=le.append,de=le.remove;Object(o.useEffect)((function(){null!==ee.clientErrors&&Object.keys(ee.clientErrors).map((function(e){se(e,{type:"custom",message:ee.clientErrors[e][0]})}))}),[ee.clientErrors]);var je=function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contact_info,K((function(e){return[].concat(Object(i.a)(e),Object(i.a)(n))})),delete t.contact_info,e.next=5,l(Object(f.a)(t));case 5:if(void 0!==(c=e.sent).payload.client){e.next=10;break}return e.abrupt("return",!1);case 10:Y(c.payload.client.id);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=!0;ie._formValues.contact_info.length>0&&(e=!1),oe({createdBy:E,organizationId:C,contactId:0,name:"",email:"",contactNumber:"",designation:"",primaryStatus:e})},be=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(B.jsxs)(_.jb,{className:"mb-1",children:[Object(B.jsx)(_.O,{sm:"4",size:"lg",className:b()("form-label ".concat(n?"required":"")),for:t,children:e}),Object(B.jsxs)(_.B,{sm:"8",children:[Object(B.jsx)(p.a,{id:t,name:t,control:ie,render:function(e){var n=e.field;return Object(B.jsx)(_.L,Object(c.a)({invalid:ae[t]&&!0},n))}}),ae[t]&&Object(B.jsx)(_.I,{children:ae[t].message})]})]})},ue=function(e,t,n){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(B.jsxs)(_.jb,{className:"mb-1",children:[Object(B.jsx)(_.O,{sm:"4",size:"lg",className:b()("form-label ".concat(a?"required":"")),for:t,children:e}),Object(B.jsxs)(_.B,{sm:"8",children:[Object(B.jsx)(p.a,{control:ie,name:t,id:t,render:function(e){var i=e.field,a=e.ref;return Object(B.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:a,className:b()("react-select",{"is-invalid":ae[t]})},i),{},{isDisabled:"currency"===t,classNamePrefix:"select",options:n,value:n.find((function(e){return e.id===i.value})),onChange:function(e){return i.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),ae[t]&&Object(B.jsx)(_.I,{className:"text-danger",children:null===(i=ae[t])||void 0===i?void 0:i.message})]})]})};return Object(o.useEffect)((function(){null===X&&(O.a.post("/businessentities/list").then((function(e){var t=e.data;P(t.businessentities)})),O.a.post("/countries/list").then((function(e){var t=e.data;z(t.countries)})),O.a.post("/currencies/list").then((function(e){var t=e.data;R(t.currencies)})),O.a.post("/gstregistrationtypes/list").then((function(e){var t=e.data;$(t.gstregistrationtypes)})),O.a.post("/states/list").then((function(e){var t=e.data;A(t.states)})),me()),null!==X&&function(e){if(H.length>0){H.forEach((function(t,n){H[n].contactId=e}));var t=H;l(Object(f.b)({rows:t})),n("/client/view/".concat(e))}}(X)}),[H,X]),Object(B.jsxs)("form",{onSubmit:ce(je),children:[Object(B.jsxs)(_.l,{className:"invoice-preview-card",children:[Object(B.jsx)(_.p,{children:Object(B.jsx)(_.v,{children:" Add Client"})}),Object(B.jsxs)(_.m,{className:"pb-0",children:[Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:Object(B.jsxs)(_.jb,{className:"mb-1",children:[Object(B.jsx)(_.O,{sm:"4",size:"lg",className:"form-label required",for:"contactPersonName",children:"Client Type"}),Object(B.jsxs)(_.B,{sm:"8",children:[Object(B.jsxs)("div",{className:"form-check form-check-primary form-check-inline",children:[Object(B.jsx)(p.a,{name:"clientType",id:"clientType_2",control:ie,render:function(e){var t=e.field;return Object(B.jsx)(_.L,Object(c.a)(Object(c.a)({name:"clientType",id:"clientType_2",type:"radio"},t),{},{onInput:function(e){return e.target.value},value:1}))}}),Object(B.jsx)(_.O,{className:"form-check-label",for:"clientType_2",children:"Business"})]}),Object(B.jsxs)("div",{className:"form-check form-check-primary form-check-inline",children:[Object(B.jsx)(p.a,{name:"clientType",id:"clientType_1",control:ie,render:function(e){var t=e.field;return Object(B.jsx)(_.L,Object(c.a)(Object(c.a)({name:"clientType",id:"clientType_1",type:"radio"},t),{},{onInput:function(e){return e.target.value},value:2}))}}),Object(B.jsx)(_.O,{className:"form-check-label",for:"clientType_1",children:"Individual"})]})]})]})}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Unique No","uniqueIdentity",!1)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Contact Person Name","contactPersonName",!0)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Business Name","name",!0)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Mobile Number","contactNumber")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Email ID","email",!0)})]}),Object(B.jsx)(_.jb,{children:Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Business Entity","businessEntity",S,!0)})})]}),Object(B.jsx)("hr",{className:"invoice-spacing"}),ae.contact_info&&Object(B.jsx)("p",{className:"text-danger ms-2",children:null===(e=ae.contact_info)||void 0===e?void 0:e.message}),Object(B.jsxs)(_.m,{className:"invoice-padding invoice-product-details",children:[re.map((function(e,t){var n,i,a,s,l,r,o,d,j,m,b,u,f,O,x,v;return Object(B.jsx)("div",{className:"repeater-wrapper",children:Object(B.jsx)(_.jb,{children:Object(B.jsxs)(_.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(B.jsxs)(_.jb,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(B.jsxs)(_.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-3 col-sm-12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"First Name"}),Object(B.jsx)(p.a,{control:ie,id:"contact_info_firstName",name:"contact_info[".concat(t,"].name"),render:function(e){var n,i,a=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"text",onChange:function(e){a.onChange(e)},invalid:(null===(n=ae.contact_info)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.name)&&!0},a))}}),(null===(n=ae.contact_info)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.name)&&Object(B.jsx)(_.I,{children:null===(a=ae.contact_info)||void 0===a||null===(s=a[t])||void 0===s?void 0:s.name.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 my-2 col-lg-3 col-sm-12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-2 mb-0 ",children:"Email"}),Object(B.jsx)(p.a,{control:ie,id:"contact_info_email",name:"contact_info[".concat(t,"].email"),render:function(e){var n,i,a=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"email",onChange:function(e){a.onChange(e)},invalid:(null===(n=ae.contact_info)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.email)&&!0},a))}}),(null===(l=ae.contact_info)||void 0===l||null===(r=l[t])||void 0===r?void 0:r.email)&&Object(B.jsx)(_.I,{children:null===(o=ae.contact_info)||void 0===o||null===(d=o[t])||void 0===d?void 0:d.email.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-2 mb-0",children:"Mobile"}),Object(B.jsx)(p.a,{control:ie,id:"contact_info_contactNumber",name:"contact_info[".concat(t,"].contactNumber"),render:function(e){var n,i,a=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"number",onChange:function(e){a.onChange(e)},invalid:(null===(n=ae.contact_info)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.contactNumber)&&!0},a))}}),(null===(j=ae.contact_info)||void 0===j||null===(m=j[t])||void 0===m?void 0:m.contactNumber)&&Object(B.jsx)(_.I,{children:null===(b=ae.contact_info)||void 0===b||null===(u=b[t])||void 0===u?void 0:u.contactNumber.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"Designation"}),Object(B.jsx)(p.a,{control:ie,id:"contact_info_designation",name:"contact_info[".concat(t,"].designation"),render:function(e){var n,i,a=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"text onChange={(val) => { field.onChange(val)}}",invalid:(null===(n=ae.contact_info)||void 0===n||null===(i=n[t])||void 0===i?void 0:i.designation)&&!0},a))}}),(null===(f=ae.contact_info)||void 0===f||null===(O=f[t])||void 0===O?void 0:O.designation)&&Object(B.jsx)(_.I,{children:null===(x=ae.contact_info)||void 0===x||null===(v=x[t])||void 0===v?void 0:v.designation.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"Primary"}),Object(B.jsx)("div",{className:"form-switch form-check-primary",children:Object(B.jsx)(p.a,{control:ie,id:"contact_info_primaryStatus",name:"contact_info[".concat(t,"].primaryStatus"),render:function(e){var t=e.field;return Object(B.jsx)(_.L,Object(c.a)(Object(c.a)({type:"switch",onChange:function(e){t.onChange(e)}},t),{},{defaultChecked:t.value}))}})})]})]}),Object(B.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(B.jsx)(h.a,{size:18,className:"cursor-pointer",onClick:function(){de(t)}})})]})})},e.id)})),Object(B.jsx)(_.jb,{className:"mt-1",children:Object(B.jsx)(_.B,{sm:"12",className:"px-0",children:Object(B.jsxs)(_.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return me()},children:[Object(B.jsx)(x.a,{size:14,className:"me-25"})," ",Object(B.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(B.jsx)("hr",{className:"invoice-spacing"}),Object(B.jsxs)(_.m,{children:[Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("GST Type","gstRegistrationType",M,!0)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Place of Supply","placeOfSupply",q,!0)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("GSTIN","gstin",!0)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Currency","currency",Z,!1)})]})]}),Object(B.jsxs)(_.m,{className:"",children:[Object(B.jsx)("h4",{className:"text-primary",children:"Billing Address"}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Address Line1","billingAddressLine1")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Address Line2","billingAddressLine2")})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("City","billingAddressCity")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("State","billingAddressState",q)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Country","billingAddressCountry",L)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:be("Zip Code","billingAddressZip")})]})]})]}),Object(B.jsx)(_.l,{children:Object(B.jsx)(_.m,{children:Object(B.jsxs)("div",{className:"modal-footer border-0",children:[Object(B.jsx)(_.i,{color:"warning",outline:!0,tag:j.b,to:"/client/list",children:"Cancel"}),Object(B.jsx)(_.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};t.default=function(){return Object(B.jsx)("div",{className:"invoice-add-wrapper",children:Object(B.jsx)(_.jb,{className:"invoice-add",children:Object(B.jsx)(_.B,{xl:12,md:12,sm:12,children:Object(B.jsx)(S,{})})})})}},508:function(e,t,n){},512:function(e,t,n){},523:function(e,t,n){}}]);
//# sourceMappingURL=67.c211e701.chunk.js.map