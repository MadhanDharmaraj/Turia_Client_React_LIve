(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[61],{1434:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(4),s=c(22),i=c(2),l=c(13),r=c(139),o=c(96),d=c(39),j=c.n(d),b=c(140),m=c(156),u=c(10),O=c(575),h=c(528),p=c(16),x=Object(u.a)(),f=function(e){var t,c=e.data,r=Object(l.g)().id,d=Object(b.b)(),u=Object(i.useState)([]),f=Object(s.a)(u,2),N=f[0],v=f[1],g=Object(i.useState)([]),y=Object(s.a)(g,2),w=y[0],C=y[1],k=function(e){return 13===e.length?j()(e,"x").format("MMM DD, YYYY"):j.a.unix(e).format("MMM DD, YYYY")},S=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],I=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],M=function(e){if(void 0===e)return"zero";if((e===e.toString()).length>9)return"overflow";var t="000000000".concat(e).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(t){var c="";return t[1]=Number(t[1]),c+=0!==Number(t[1])?"".concat(S[Number(t[1])]||I[t[1][0]]," ").concat(isNaN(Number(t[1][1]))?"":S[t[1][1]]," crore "):"",t[2]=Number(t[2]),c+=0!==Number(t[2])?"".concat(S[Number(t[2])]||I[t[2][0]]," ").concat(isNaN(Number(t[2][1]))?"":S[t[2][1]],"lakh "):"",t[3]=Number(t[3]),c+=0!==Number(t[3])?"".concat(S[Number(t[3])]||I[t[3][0]]," ").concat(isNaN(Number(t[3][1]))?"":S[t[3][1]],"thousand "):"",t[4]=Number(t[4]),c+=0!==Number(t[4])?"".concat(S[Number(t[4])]||I[t[4][0]]," hundred "):"",t[5]=Number(t[5]),(c+=0!==Number(t[5])?"".concat(""!==c?"and ":"").concat(S[Number(t[5])]||I[t[5][0]]):"Zero").replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}};return Object(i.useEffect)(Object(n.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(Object(O.b)(c.calculatetaxes)),e.next=3,d(Object(m.k)(r));case 3:t=e.sent,v(t.payload);case 5:case"end":return e.stop()}}),e)}))),[c]),null!==c?Object(p.jsxs)(o.l,{className:"invoice-preview-card",children:[Object(p.jsx)(o.B,{children:Object(p.jsxs)(o.f,{color:"light-primary",children:[" ",Object(p.jsx)("span",{className:"text-md",children:"Draft"})]})}),Object(p.jsxs)("div",{className:"invoice-container",children:[Object(p.jsxs)(o.m,{className:"invoice-padding pb-0",children:[Object(p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[null===x.imageid?function(e){var t=["light-success","light-danger","light-warning","light-info","light-primary","light-secondary"][Math.floor(6*Math.random())];return Object(p.jsx)(h.a,{color:t,className:"me-50",content:null!==e?e.charAt(0):""})}(x.name):Object(p.jsx)("img",{className:"rounded me-50",height:75,width:75,src:"https://drive.google.com/uc?id=".concat(x.imageid),alt:"Organisation Logo"}),Object(p.jsx)("h3",{className:"text-primary",children:"Proposal"}),Object(p.jsx)("h5",{children:"Original for recepient"})]}),Object(p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"logo-wrapper",children:Object(p.jsx)("h4",{className:"text-primary ms-0 mt-2",children:x.name})}),Object(p.jsx)(o.u,{className:"mb-25",children:x.addressline1}),Object(p.jsx)(o.u,{className:"mb-25",children:x.addressline2}),Object(p.jsxs)(o.u,{className:"mb-0",children:[x.city," - ",x.pinzipcode]}),Object(p.jsx)(o.u,{className:"mb-0",children:x.statename}),Object(p.jsxs)(o.u,{className:"mb-0",children:["GSTIN - ",x.gstin," \xa0\xa0 State Code : ",x.gstin.substr(0,2)]})]}),Object(p.jsxs)("div",{className:"mt-3",children:[Object(p.jsx)("div",{className:"invoice-date-wrapper",children:Object(p.jsxs)("h4",{className:"",children:["Proposal ",Object(p.jsx)("span",{className:"invoice-number",children:c.uniqueno})]})}),Object(p.jsxs)("div",{className:"invoice-date-wrapper",children:[Object(p.jsx)("p",{className:"invoice-date-title",children:"Date Issued:"}),Object(p.jsx)("p",{className:"invoice-date",children:k(c.invoicedate)})]}),Object(p.jsxs)("div",{className:"invoice-date-wrapper",children:[Object(p.jsx)("p",{className:"invoice-date-title",children:"Due Date:"}),Object(p.jsx)("p",{className:"invoice-date",children:k(c.paymentdue)})]})]})]})]}),Object(p.jsxs)(o.m,{className:"invoice-padding pt-0",children:[Object(p.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-1",children:[Object(p.jsxs)(o.B,{className:"p-0",md:"8",children:[Object(p.jsx)("h6",{className:"mb-2",children:"Invoice To:"}),Object(p.jsx)("h6",{className:"mb-25",children:c.contactname}),Object(p.jsx)(o.u,{className:"mb-25",children:c.billingaddressline1}),Object(p.jsx)(o.u,{className:"mb-25",children:c.billingaddressline2}),Object(p.jsxs)(o.u,{className:"mb-25",children:[c.billingaddresscity," - ",c.billingaddresszipcode]}),Object(p.jsx)(o.u,{className:"mb-25",children:c.billingaddressstate}),Object(p.jsxs)(o.u,{className:"mb-25",children:["GSTIN - ",c.gstin]})]}),Object(p.jsxs)(o.B,{className:"p-0",md:"4",children:[Object(p.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"Total Due:"}),Object(p.jsx)("td",{children:Object(p.jsx)("span",{className:"fw-bold",children:c.dueamount})})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"Bank name:"}),Object(p.jsx)("td",{children:c.bankaccountbankname})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"Account Name:"}),Object(p.jsx)("td",{children:c.bankaccountholdername})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(p.jsx)("td",{children:c.bankaccountbranchname})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"IFSC code:"}),Object(p.jsx)("td",{children:c.bankaccountifsccode})]})]})})]})]}),Object(p.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-1",children:[Object(p.jsxs)(o.B,{className:"p-0",xl:"8",children:[Object(p.jsxs)(o.u,{className:"mb-25",children:["Place Of Supply: ",c.placeofsupplyname]}),Object(p.jsxs)(o.u,{className:"mb-25",children:["State: ",c.placeofsupplyname," \xa0\xa0State Code:  "]})]}),Object(p.jsx)(o.B,{className:"p-0 mt-xl-0 mt-2",xl:"4",children:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"Currency code: "}),Object(p.jsx)("td",{children:c.billingcurrencyshortname})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"pe-1",children:"RCM Applicable:"}),Object(p.jsx)("td",{children:c.isrcmapplicable?"Yes":"No"})]})]})})})]})]}),Object(p.jsxs)(o.mb,{responsive:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"py-1",children:"Item"}),Object(p.jsx)("th",{className:"py-1",children:"SAC Code"}),Object(p.jsx)("th",{className:"py-1",children:"Price"}),Object(p.jsx)("th",{className:"py-1",children:"Tax"}),Object(p.jsx)("th",{className:"py-1",children:"Total"})]})}),Object(p.jsx)("tbody",{children:N.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{className:"py-1",children:[Object(p.jsx)("p",{className:"card-text fw-bold mb-25",children:e.servicesName}),Object(p.jsx)("p",{className:"card-text text-nowrap",children:e.description})]}),Object(p.jsx)("td",{className:"py-1",children:Object(p.jsx)("span",{className:"fw-bold",children:e.sacCode})}),Object(p.jsx)("td",{className:"py-1",children:Object(p.jsx)("span",{className:"fw-bold",children:e.price})}),Object(p.jsx)("td",{className:"py-1",children:Object(p.jsxs)("span",{className:"fw-bold",children:["string"===typeof e.taxes&&Object(O.b)(e.taxes).map((function(e,t){return Object(p.jsx)(o.ib,{children:Object(p.jsxs)("span",{children:[e.taxName||e.tax_name," - ",e.taxAmount||e.tax_amount_calculated]})},t)})),!1===e.isTaxApplicable&&Object(p.jsxs)(o.ib,{children:[Object(p.jsx)("span",{children:e.taxGroupName}),Object(p.jsx)("span",{children:e.exemptionReasonName})]})]})}),Object(p.jsx)("td",{className:"py-1",children:Object(p.jsx)("span",{className:"fw-bold",children:e.subTotalAmount})})]},t)}))})]}),Object(p.jsx)(o.m,{className:"invoice-padding pb-0",children:Object(p.jsxs)(o.ib,{className:"invoice-sales-total-wrapper",children:[Object(p.jsx)(o.B,{className:"mt-md-0 mt-3",md:"6",order:{md:1,lg:2},children:(t=c.totalamount,"".concat(M(t.split(".")[0])," and Paise ").concat(M(t.split(".")[1])," Only"))}),Object(p.jsx)(o.B,{className:"d-flex justify-content-end",md:"6",order:{md:2,lg:1},children:Object(p.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(p.jsxs)("div",{className:"invoice-total-item",children:[Object(p.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(p.jsx)("p",{className:"invoice-total-amount",children:c.totalamount})]}),Object(p.jsxs)("div",{className:"invoice-total-item",children:[Object(p.jsx)("p",{className:"invoice-total-title",children:"Pre Tax Amount:"}),Object(p.jsx)("p",{className:"invoice-total-amount",children:c.subtotalamount})]}),!c.isrcmapplicable&&Object(p.jsx)("div",{children:w.length>0&&w.map((function(e,t){return Object(p.jsxs)("div",{className:"invoice-total-item",children:[Object(p.jsx)("p",{className:"invoice-total-title",children:e.taxName||"".concat(e.tax_name).concat(e.tax_percentage,"%")}),Object(p.jsx)("p",{className:"invoice-total-amount",children:e.taxAmount||e.tax_amount})]},t)}))}),Object(p.jsx)("hr",{className:"my-50"}),Object(p.jsxs)("div",{className:"invoice-total-item",children:[Object(p.jsx)("p",{className:"invoice-total-title",children:"Balance Due:"}),Object(p.jsx)("p",{className:"invoice-total-amount",children:c.dueamount})]})]})})]})}),Object(p.jsx)("hr",{className:"invoice-spacing"}),Object(p.jsx)(o.m,{className:"invoice-padding pt-0",children:Object(p.jsx)(o.ib,{children:Object(p.jsxs)(o.B,{sm:"12",children:[Object(p.jsx)("span",{className:"fw-bold",children:"Note: "}),Object(p.jsx)("span",{children:c.note})]})})})]})]}):null},N=c(5),v=c(144),g=function(e){var t=e.id,c=e.setSendSidebarOpen,a=e.setMarkAsInvoice,n=e.invoice,l=Object(i.useState)([]),d=Object(s.a)(l,2),j=d[0],b=d[1];return Object(i.useEffect)((function(){N.a.post("/taskinvoices/getparticipants",{invoiceId:n.id}).then((function(e){b(e.data.taskinvoiceparticipants)})).catch((function(e){console.log(e)}))}),[]),Object(p.jsx)(o.l,{className:"invoice-action-wrapper",children:Object(p.jsxs)(o.m,{children:[Object(p.jsx)(v.b,{I:"read",a:"invoice",children:Object(p.jsx)(o.i,{color:"primary",block:!0,className:"mb-75",onClick:function(){return c(!0)},children:"Send Proposal"})}),Object(p.jsx)(v.b,{I:"write",a:"invoice",children:Object(p.jsx)(o.i,{color:"primary",outline:!0,block:!0,className:"mb-75",onClick:function(){return a(!0)},children:"Mark as Invoice"})}),Object(p.jsx)(v.b,{I:"export",a:"invoice",children:Object(p.jsx)(o.i,{color:"secondary",block:!0,outline:!0,className:"mb-75",onClick:function(){N.a.post("/pdfmaker/pdf",{id:n.id}).then((function(e){var t=document.createElement("a"),c="".concat(n.uniqueno,".pdf");t.href=e.data.pdf,t.download=c,t.click(),document.removeChild(t)})).catch((function(e){console.log(e)}))},children:"Download"})}),Object(p.jsx)(v.b,{I:"export",a:"invoice",children:Object(p.jsx)(o.i,{color:"secondary",block:!0,outline:!0,className:"mb-75",onClick:function(){window.print()},children:"Print"})}),Object(p.jsx)(v.b,{I:"write",a:"invoice",children:Object(p.jsx)(o.i,{tag:r.b,to:"/proposal/edit/".concat(t),color:"secondary",block:!0,outline:!0,className:"mb-75",children:"Edit"})}),j.length>0&&Object(p.jsxs)(o.B,{className:"mt-2",children:[Object(p.jsx)("h4",{children:"Tagged Employees"}),Object(p.jsx)(o.ib,{className:"mt-1",children:j.map((function(e){return Object(p.jsx)(o.f,{className:"mt-md-75 py-md-75",color:"primary",children:e.name})}))})]}),Object(p.jsxs)(o.B,{className:"mt-2",children:[Object(p.jsxs)(o.ib,{className:"mt-1",children:[Object(p.jsx)("h5",{children:"Task ID"}),Object(p.jsx)(o.B,{md:12,tag:r.b,to:"/task/view/".concat(n.taskid),children:n.uniqueidentity})]}),Object(p.jsxs)(o.ib,{className:"mt-1",children:[Object(p.jsx)("h5",{children:"Task Description"}),Object(p.jsx)(o.B,{md:12,children:n.description})]})]})]})})},y=c(683),w=(c(534),c(727)),C=c(542),k=c.n(C),S=c(543),I=c.n(S)()(k.a);t.default=function(){var e=Object(l.g)().id,t=Object(l.f)(),c=Object(b.b)(),d=Object(i.useState)(!1),j=Object(s.a)(d,2),u=j[0],O=j[1],h=Object(i.useState)("1"),x=Object(s.a)(h,2),N=x[0],v=x[1],C=Object(b.c)((function(e){return e.proposal})),k=function(){var t=Object(n.a)(Object(a.a)().mark((function t(){return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(Object(m.j)(e));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){k()}),[]);return null!==C.selectedInvoice&&void 0!==C.selectedInvoice?Object(p.jsxs)("div",{className:"invoice-preview-wrapper",children:[Object(p.jsxs)(o.ib,{className:"invoice-preview",children:[Object(p.jsxs)(o.B,{xl:10,md:8,sm:12,children:[Object(p.jsx)(o.U,{pills:!0,className:"mb-2",children:Object(p.jsx)(o.V,{children:Object(p.jsxs)(o.W,{active:"1"===N,onClick:function(){var e;N!==(e="1")&&v(e)},children:[Object(p.jsx)(w.a,{className:"font-medium-3 me-50"}),Object(p.jsx)("span",{className:"fw-bold",children:"Proposal"})]})})}),Object(p.jsx)(o.kb,{activeTab:N,children:Object(p.jsx)(o.lb,{tabId:"1",children:Object(p.jsx)(f,{data:C.selectedInvoice,tabId:N})})})]}),Object(p.jsx)(o.B,{xl:2,md:4,sm:12,children:Object(p.jsx)(g,{id:e,setSendSidebarOpen:O,setMarkAsInvoice:function(){return I.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Mark As Invoice!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var s=Object(n.a)(Object(a.a)().mark((function n(s){return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!s.value){a.next=5;break}return a.next=3,c(Object(m.l)(e));case 3:I.fire({icon:"success",title:"Mar as Invoice.",text:"Proposal Marked As Invoice.",customClass:{confirmButton:"btn btn-success"}}),t("/invoice/view/".concat(e));case 5:case"end":return a.stop()}}),n)})));return function(e){return s.apply(this,arguments)}}())},invoice:C.selectedInvoice})})]}),Object(p.jsx)(y.a,{toggleSidebar:function(){return O(!u)},open:u,invoice:C.selectedInvoice})]}):Object(p.jsxs)(o.e,{color:"danger",children:[Object(p.jsx)("h4",{className:"alert-heading",children:"Proposal not found"}),Object(p.jsxs)("div",{className:"alert-body",children:["Proposal with id: ",e," doesn't exist. Check list of all Proposal:"," ",Object(p.jsx)(r.b,{to:"/Proposal/list",children:"Proposal List"})]})]})}},526:function(e,t,c){"use strict";var a=c(14),n=c(34),s=c(2),i=c(7),l=c.n(i),r=c(96),o=(c(529),c(16)),d=function(e){var t,c=e.children,i=e.blocking,r=e.loader,d=e.className,j=e.tag,b=e.overlayColor,m=j;return Object(o.jsxs)(m,{className:l()("ui-loader",(t={},Object(n.a)(t,d,d),Object(n.a)(t,"show",i),t)),children:[c,i?Object(o.jsxs)(s.Fragment,{children:[Object(o.jsx)("div",Object(a.a)({className:"overlay"},i&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:r})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(r.jb,{color:"primary"})}},527:function(e,t,c){"use strict";var a=c(16);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},529:function(e,t,c){},534:function(e,t,c){},574:function(e,t,c){"use strict";var a=c(14),n=c(34),s=c(143),i=c(719),l=c(7),r=c.n(l),o=c(559),d=c.n(o),j=c(96),b=c(16),m=["open","size","title","width","children","closeBtn","className","toggleSidebar","bodyClassName","contentClassName","wrapperClassName","headerClassName"];t.a=function(e){var t,c=e.open,l=e.size,o=e.title,u=e.width,O=e.children,h=e.closeBtn,p=e.className,x=e.toggleSidebar,f=e.bodyClassName,N=e.contentClassName,v=e.wrapperClassName,g=e.headerClassName,y=Object(s.a)(e,m),w=h||Object(b.jsx)(i.a,{className:"cursor-pointer",size:15,onClick:x});return Object(b.jsxs)(j.Q,Object(a.a)(Object(a.a)(Object(a.a)({isOpen:c,toggle:x,contentClassName:r()("overflow-hidden",Object(n.a)({},N,N)),modalClassName:r()("modal-slide-in",Object(n.a)({},v,v)),className:r()((t={},Object(n.a)(t,p,p),Object(n.a)(t,"sidebar-lg","lg"===l),Object(n.a)(t,"sidebar-sm","sm"===l),t))},void 0!==u?{style:{width:String(u)+"px"}}:{}),y),{},{children:[Object(b.jsx)(j.T,{className:r()(Object(n.a)({},g,g)),toggle:x,close:w,tag:"div",children:Object(b.jsx)("h5",{className:"modal-title",children:Object(b.jsx)("span",{className:"align-middle",children:o})})}),Object(b.jsx)(d.a,{options:{wheelPropagation:!1},children:Object(b.jsx)(j.R,{className:r()("flex-grow-1",Object(n.a)({},f,f)),children:O})})]}))}},575:function(e,t,c){"use strict";c.d(t,"a",(function(){return a})),c.d(t,"b",(function(){return n}));var a=function(e,t,c){var a=0;return 1===c?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===c&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},n=function(e){return JSON.parse(e.replace(/\\/g,""))}},590:function(e,t,c){"use strict";var a=c(19),n=c(2),s=c.n(n),i=c(560),l=c(598),r=c(556),o=c(142),d=c(143),j=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],b=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,c=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),a=String(t.getOptionValue(e)).toLowerCase(),n=String(t.getOptionLabel(e)).toLowerCase();return a===c||n===c},m={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,c,a){return!(!e||t.some((function(t){return b(e,t,a)}))||c.some((function(t){return b(e,t,a)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};c(583),c(597),c(98),c(149),c(150),c(588),c(147),c(25),c(591),c(576);var u=s.a.forwardRef((function(e,t){var c=function(e){var t=e.allowCreateWhileLoading,c=void 0!==t&&t,a=e.createOptionPosition,s=void 0===a?"last":a,l=e.formatCreateLabel,b=void 0===l?m.formatCreateLabel:l,u=e.isValidNewOption,O=void 0===u?m.isValidNewOption:u,h=e.getNewOptionData,p=void 0===h?m.getNewOptionData:h,x=e.onCreateOption,f=e.options,N=void 0===f?[]:f,v=e.onChange,g=Object(d.a)(e,j),y=g.getOptionValue,w=void 0===y?i.c:y,C=g.getOptionLabel,k=void 0===C?i.b:C,S=g.inputValue,I=g.isLoading,M=g.isMulti,B=g.value,P=g.name,D=Object(n.useMemo)((function(){return O(S,Object(r.i)(B),N,{getOptionValue:w,getOptionLabel:k})?p(S,b(S)):void 0}),[b,p,k,w,S,O,N,B]),A=Object(n.useMemo)((function(){return!c&&I||!D?N:"first"===s?[D].concat(Object(o.a)(N)):[].concat(Object(o.a)(N),[D])}),[c,s,I,D,N]),L=Object(n.useCallback)((function(e,t){if("select-option"!==t.action)return v(e,t);var c=Array.isArray(e)?e:[e];if(c[c.length-1]!==D)v(e,t);else if(x)x(S);else{var a=p(S,S),n={action:"create-option",name:P,option:a};v(Object(r.d)(M,[].concat(Object(o.a)(Object(r.i)(B)),[a]),a),n)}}),[p,S,M,P,D,x,v,B]);return Object(r.o)(Object(r.o)({},g),{},{options:A,onChange:L})}(Object(l.a)(e));return s.a.createElement(i.a,Object(a.a)({ref:t},c))}));t.a=u},683:function(e,t,c){"use strict";var a=c(22),n=c(14),s=c(8),i=c(574),l=c(536),r=c(590),o=c(808),d=c(7),j=c.n(d),b=c(96),m=c(5),u=c(2),O=c(10),h=c(39),p=c.n(h),x=c(526),f=c(527),N=c(141),v=c(16),g=Object(O.c)(),y=Object(O.a)();t.a=function(e){var t={multiValue:function(e,t){return Object(s.a)(t),Object(n.a)(Object(n.a)({},e),{},{backgroundColor:"#7367f0"})}},c=Object(u.useState)(!1),d=Object(a.a)(c,2),O=d[0],h=d[1],w=function(){return Object(v.jsx)(u.Fragment,{children:Object(v.jsx)(f.a,{})})},C=e.open,k=e.toggleSidebar,S=e.invoice,I=Object(u.useState)(""),M=Object(a.a)(I,2),B=M[0],P=M[1],D=Object(u.useState)([]),A=Object(a.a)(D,2),L=A[0],Y=A[1],_=Object(u.useState)([]),T=Object(a.a)(_,2),E=T[0],V=T[1],z=Object(u.useState)([]),F=Object(a.a)(z,2),q=F[0],G=F[1],R=Object(u.useState)([]),J=Object(a.a)(R,2),W=J[0],H=J[1],U=function(e){m.a.post("contactinformations/list",{contactid:e}).then((function(e){V(e.data.contactinformations)})).catch((function(){}))},Q=function(){m.a.post("/emailtemplates/get",{slug:"invoice-send-mail"}).then((function(e){var t,c=e.data.emailtemplates.description.replace("{invoice_date}",(t=S.paymentdue,13===t.length?p()(t,"x").format("MMM DD, YYYY"):p.a.unix(t).format("MMM DD, YYYY"))).replace("{service}",S.taskinvoiceitemsservicename).replace("recipient_name",S.contactperson).replace("{recipient_name}",S.contactperson).replace("{invoice_no}",S.uniqueno).replace("{amount}",S.totalamount).replace("{invoice_amount}",S.totalamount).replace("{your_name}",g.name).replaceAll("{firm_name}",y.name).replace("{","").replace("}","");P(c)})).catch((function(){}))};Object(u.useEffect)((function(){void 0!==S.clientid&&U(S.clientid),void 0!==S.contactid&&U(S.contactid),Object.keys(S).length>0&&(m.a.post("/organizationusers/dropdown").then((function(e){Y(e.data.organizationusers)})).catch((function(){})),Q())}),[S]);return Object(v.jsx)(i.a,{size:"lg",open:C,title:"Send Invoice",headerClassName:"mb-1",contentClassName:"p-0",bodyClassName:"pb-sm-0 pb-3",toggleSidebar:k,children:Object(v.jsx)(x.a,{blocking:O,loader:Object(v.jsx)(w,{}),children:Object(v.jsxs)(b.H,{children:[Object(v.jsxs)("div",{className:"mb-1",children:[Object(v.jsx)(b.N,{for:"invoice-from",className:"form-label",children:"To"}),Object(v.jsx)(r.a,{className:j()("react-select"),classNamePrefix:"select",isMulti:!0,options:E,onChange:function(e){G(e.map((function(e){return e.email})))},getOptionLabel:function(e){return"".concat(e.name," - ").concat(e.email)},getOptionValue:function(e){return e.email},styles:t})]}),Object(v.jsxs)("div",{className:"mb-1",children:[Object(v.jsx)(b.N,{for:"invoice-to",className:"form-label",children:"CC"}),Object(v.jsx)(l.a,{className:j()("react-select"),classNamePrefix:"select",isMulti:!0,onChange:function(e){H(e.map((function(e){return e.email})))},options:L,getOptionLabel:function(e){return"".concat(e.name," - ").concat(e.email)},getOptionValue:function(e){return e.email},styles:t})]}),Object(v.jsxs)("div",{className:"mb-1",children:[Object(v.jsx)(b.N,{for:"invoice-message",className:"form-label",children:"Message"}),Object(v.jsx)("div",{contentEditable:!0,dangerouslySetInnerHTML:{__html:B},className:"border border-1 rounded-2 maxheight-400"})]}),Object(v.jsx)("div",{className:"mb-1",children:Object(v.jsxs)(b.f,{color:"light-primary",children:[Object(v.jsx)(o.a,{className:"me-50",size:14}),Object(v.jsx)("span",{className:"align-middle",children:"Invoice Attached"})]})}),Object(v.jsxs)("div",{className:"d-flex flex-wrap mt-2",children:[Object(v.jsx)(b.i,{className:"me-1",color:"primary",onClick:function(){!function(){h(!0);var e="".concat(S.uniqueno," Invoices Acknowledgement Mail");m.a.post("/google/sendGmail",{content:B,subject:e,toEmail:q,ccEmail:W,taskinvoiceId:S.id}).then((function(){k(!1),h(!1),N.b.success("Email send Successfully",{position:"bottom-right"})})),console.log((function(){}))}()},children:"Send"}),Object(v.jsx)(b.i,{color:"secondary",outline:!0,onClick:k,children:"Cancel"})]})]})})})}}}]);
//# sourceMappingURL=61.faf709df.chunk.js.map