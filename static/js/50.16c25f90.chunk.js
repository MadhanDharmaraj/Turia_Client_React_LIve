(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[50],{1454:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(22),i=n(6),s=n.n(i),r=n(2),o=n(13),l=n(140),d=n(5),u=n(97),b=n(1),j=n(14),m=n(8),f=n(544),p=n.n(f),O=n(798),x=n(718),v=n(830),h=n(535),g=n(532),N=n(538),w=n(539),y=n(7),I=n.n(y),A=n(153),k=n(525),C=n(526),z=(n(536),n(534),n(529),n(533),n(10)),S=n(606),B=n(141),F=n(541),V=n.n(F),P=n(542),T=n.n(P),_=n(16),L=Object(z.b)(),R=Object(z.a)(),q=Object(z.d)(),E=function(e){var t=e.data,n=Object(r.useState)(!1),i=Object(c.a)(n,2),s=i[0],f=i[1],y=function(){return Object(_.jsx)(r.Fragment,{children:Object(_.jsx)(C.a,{})})},z={multiValue:function(e,t){return Object(m.a)(t),Object(j.a)(Object(j.a)({},e),{},{backgroundColor:"#7367f0"})}},F=Object(o.g)().id,P=T()(V.a),E=Object(r.useState)([]),D=Object(c.a)(E,2),G=D[0],H=D[1],K=Object(r.useState)([]),J=Object(c.a)(K,2),M=J[0],U=J[1],Z=Object(r.useState)([]),Y=Object(c.a)(Z,2),$=Y[0],Q=Y[1],W=Object(r.useState)([]),X=Object(c.a)(W,2),ee=X[0],te=X[1],ne=Object(r.useState)([]),ae=Object(c.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(r.useState)(0),re=Object(c.a)(se,2),oe=re[0],le=re[1],de=Object(r.useState)(0),ue=Object(c.a)(de,2),be=ue[0],je=ue[1],me=Object(r.useState)([]),fe=Object(c.a)(me,2),pe=fe[0],Oe=fe[1],xe=Object(r.useState)([]),ve=Object(c.a)(xe,2),he=ve[0],ge=ve[1],Ne=Object(r.useState)([]),we=Object(c.a)(Ne,2),ye=we[0],Ie=we[1],Ae=Object(r.useState)({}),ke=Object(c.a)(Ae,2),Ce=ke[0],ze=ke[1],Se=Object(r.useState)([]),Be=Object(c.a)(Se,2),Fe=Be[0],Ve=Be[1],Pe=Object(r.useState)([]),Te=Object(c.a)(Pe,2),_e=Te[0],Le=Te[1],Re=Object(r.useState)([]),qe=Object(c.a)(Re,2),Ee=qe[0],De=qe[1],Ge=Object(r.useState)([]),He=Object(c.a)(Ge,2),Ke=He[0],Je=He[1],Me=Object(r.useState)([]),Ue=Object(c.a)(Me,2),Ze=Ue[0],Ye=Ue[1],$e=Object(r.useState)(!1),Qe=Object(c.a)($e,2),We=Qe[0],Xe=Qe[1],et=Object(o.f)(),tt=Object(B.b)(),nt=Object(B.c)((function(e){return e.invoice})),at=function(){var e=Object(a.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.post("/organizationusers/dropdown").then((function(e){var t=e.data.organizationusers;Ie(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(e){return P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(){var t=Object(a.a)(Object(b.a)().mark((function t(n){return Object(b.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.value){t.next=7;break}return t.next=3,tt(Object(A.f)(e));case 3:return P.fire({icon:"success",title:"Deleted!",text:"Conatct has been deleted.",customClass:{confirmButton:"btn btn-success"}}),t.abrupt("return",!0);case 7:if(n.dismiss!==P.DismissReason.cancel){t.next=9;break}return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};Object(r.useEffect)((function(){d.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;H(t.clients)})),d.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;U(t.services)})),d.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;Q(t.taxgroups)})),d.a.post("/states/list").then((function(e){var t=e.data;te(t.states)})),d.a.post("/transactionaccounts/dropdown").then((function(e){var t=e.data;ie(t.transactionaccounts)})),at(),d.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;De(t.exemptionreasons)})),d.a.post("/taskinvoices/getparticipants",{invoiceId:F}).then((function(e){var t=e.data.taskinvoiceparticipants.map((function(e){return e.id}));Je(t),Ye(e.data.taskinvoiceparticipants)})).catch((function(e){console.log(e)}))}),[]);var it=function(){var e=Object(a.a)(Object(b.a)().mark((function e(t){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(Object(A.h)(t));case 2:n=e.sent,ze(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=N.d().shape({updatedBy:N.f().default(q),id:N.f().default(F),contactId:N.f().required("Please select a Client"),uniqueIdentity:N.f(),contactEmail:N.f(),contactName:N.f(),invoiceDate:N.c(),paymentDue:N.c(),placeOfSupplyId:N.f().required("Please select a Place Of Supply"),subTotalAmount:N.f(),totalAmount:N.f(),totalTaxAmount:N.f(),organizationId:N.f().default(L),isRcmApplicable:N.b().default(!1),dueAmount:N.f(),billingAddressLine1:N.f(),billingAddressLine2:N.f(),billingAddressState:N.f(),billingAddressCity:N.f(),billingAddressZipCode:N.f(),billingCurrencyId:N.f().default(R.currencyid),bankAccountBankName:N.f(),bankAccountBranchName:N.f(),bankAccountHolderName:N.f(),bankAccountId:N.f().required("Please Select Account"),bankAccountIfscCode:N.f(),bankAccountNumber:N.f(),organizationAddressLine1:N.f().default(R.addressline1),organizationAddressLine2:N.f().default(R.addressline2),organizationCity:N.f().default(R.organizationcity),organizationState:N.f().default(R.statename),organizationZipCode:N.f().default(R.pinzipcode),organizationName:N.f().default(R.name),organizationImageUrl:N.f().default(R.organizationimageid||""),organizationStateCode:N.f().default(R.stateshortname),organizationGstin:N.f().default(R.gstin),calculateTaxes:N.f(),gstin:N.f(),note:N.f().default(""),status:N.c().default(1),paymentStatus:N.c().default(11),rows:N.a().of(N.d().shape({id:N.f(),serviceId:N.f().required("Please Select Service Item"),invoiceId:N.f(),sacCode:N.f(),price:N.f(),organizationId:N.f().default(L),exemptionReasonId:N.f().nullable(),isTaxApplicable:N.b().default(!0),actualPrice:N.f().required(),taxGroupId:N.f().required("Pleace Select Tax"),subTotalAmount:N.f().required(1)}))}),rt=Object(g.f)({resolver:Object(w.a)(st),defaultValues:st.cast()}),ot=rt.handleSubmit,lt=rt.formState.errors,dt=rt.control,ut=rt.setValue,bt=rt.reset,jt=Object(g.e)({control:dt,name:"rows",keyName:"rowid"}),mt=jt.fields,ft=jt.append,pt=jt.remove,Ot=function(){var e=Object(a.a)(Object(b.a)().mark((function e(t){var n,a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.forEach((function(e,n){pe[n].invoiceId=t,pe[n].updatedBy=q})),e.next=3,tt(Object(A.m)(pe));case 3:if(!(Ke.length>0)){e.next=9;break}return n=[],Ke.forEach((function(e){var t=Ze.findIndex((function(t){return t.id===e}));-1!==t&&Ze.length>0&&n.push(Ze[t].id)})),a={users:Ke,organizationId:L,invoiceId:t,deletedUser:n},e.next=9,tt(Object(A.c)(a));case 9:et("/invoice/view/".concat(nt.invoiceId));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(a.a)(Object(b.a)().mark((function e(t){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),n=t.rows,Oe(n),delete t.rows,e.next=6,tt(Object(A.l)(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)(Object(a.a)(Object(b.a)().mark((function e(){return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==nt.invoiceId&&pe.length>0)){e.next=3;break}return e.next=3,Ot(nt.invoiceId);case 3:case"end":return e.stop()}}),e)}))),[nt.invoiceId,pe]);var vt=function(){ft({invoiceId:0,organizationId:L,serviceId:"",exemptionReasonId:0,isTaxApplicable:!0,sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:""})};Object(r.useEffect)((function(){vt()}),[]);var ht=function(){var e=dt._formValues.rows,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),dt._formValues.subTotalAmount=n,dt._formValues.totalAmount=t,dt._formValues.dueAmount=t,dt._formValues.totalTaxAmount=a,le(t),je(n),function(){var e;e=dt._formValues.rows.map((function(e){return e.taxes?Object(S.b)(e.taxes):[]})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?(n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount),n.taxAmount=String(n.taxAmount)):e.push(Object.assign({},t))}return e}),[]),ge(e),ut("calculateTaxes",JSON.stringify(e))}()},gt=function(){var e=Object(a.a)(Object(b.a)().mark((function e(t){var n,a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=dt._formValues.rows[t].id)){e.next=5;break}return e.next=4,ct(n);case 4:a=e.sent;case 5:a&&pt(t),ht();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=dt._formValues.rows[e];if(void 0===o.serviceId||""===o.serviceId)return!1;if(0===M.length)return!1;var l=M.find((function(e){return e.id===o.serviceId}));ut("rows[".concat(e,"].serviceId"),o.serviceId),r?(ut("rows[".concat(e,"].sacCode"),l.saccode||""),t=l.sellingprice||0,n=l.taxgroupid,ut("rows[".concat(e,"].actualPrice"),t),ut("rows[".concat(e,"].price"),String(l.sellingprice)||0),ut("rows[".concat(e,"].taxGroupId"),n),ut("rows[".concat(e,"].description"),l.description),ut("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):(ut("rows[".concat(e,"].sacCode"),i?o.sacCode:l.saccode),t=c?o.price:l.sellingprice||0,n=s?o.taxGroupId:l.taxgroupid,ut("rows[".concat(e,"].price"),t),ut("rows[".concat(e,"].actualPrice"),String(l.sellingprice)||0),ut("rows[".concat(e,"].taxGroupId"),n),ut("rows[".concat(e,"].description"),a?o.description:l.description),ut("rows[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var d=0,u=[],b=$.find((function(e){return e.id===n})),j=void 0!==b?!b.nontaxableflag:l.istaxapplicable;ut("rows[".concat(e,"].isTaxApplicable"),j),j&&void 0!==b&&Fe.forEach((function(e){if(e.taxid===n){var a;a=Object(S.a)(t,e.percentage,2),d=parseFloat(d)+parseFloat(a);var c={};c.taxName="".concat(e.name," (").concat(e.percentage,"%)"),c.taxId=parseInt(e.id),c.taxNameValue=e.name,c.taxPercentage=String(e.percentage),c.taxAmount=String(a),u.push(c)}})),ut("rows[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),ut("rows[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),ut("rows[".concat(e,"].taxes"),JSON.stringify(u)),ut("rows[".concat(e,"].updatedBy"),q),ht()},wt=function(){var e=1;R.stateid===dt._formValues.placeOfSupplyId&&(e=2),function(e){var t={type:e};d.a.post("/taxvalues/list",t).then((function(e){var t=e.data;Ve(t.taxvalues)}))}(e)};Object(r.useEffect)((function(){Fe.length>0&&"object"===typeof dt._formValues.rows&&dt._formValues.rows.forEach((function(e,t){Nt(t,!0,!0,!0,!0,!1)}))}),[Fe]);var yt=function(e){var t=ce.find((function(t){return t.id===e}));void 0!==t&&(Le(t),ut("bankAccountBankName",t.bankName),ut("bankAccountBranchName",t.branchAddress),ut("bankAccountHolderName",t.accountHolderName),ut("bankAccountIfscCode",t.ifscCode),ut("bankAccountNumber",t.accountNumber))};Object(r.useEffect)((function(){ce.length>0&&yt(dt._formValues.bankAccountId)}),[ce]),Object(r.useEffect)((function(){Object.keys(Ce).length>0&&(ut("billingAddressCity",Ce.billingaddresscity||""),ut("billingAddressLine1",Ce.billingaddressline1||""),ut("billingAddressLine2",Ce.billingaddressline2||""),ut("billingAddressState",Ce.billingaddressstatesname||""),ut("billingAddressZipCode",Ce.billingaddresszip||""),ut("billingCurrencyId",Ce.currencyid||R.currencyid),ut("billingCurrencySymbol",Ce.currenciessymbol||""),ut("billingCurrencyShortName",Ce.currenciescode||""),ut("billingCurrencyName",Ce.currenciesname||""),ut("contactEmail",Ce.email||""),ut("gstin",Ce.gstin||""),ut("contactName",Ce.name||""),ut("placeOfSupplyId",Ce.placeofsupplyid||""),wt())}),[Ce]);var It=function(){var e=Object(a.a)(Object(b.a)().mark((function e(t){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=5;break}return e.next=3,tt(Object(A.j)(t));case 3:n=e.sent,ut("rows",n.payload);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)(Object(a.a)(Object(b.a)().mark((function e(){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(t).length>0)){e.next=7;break}return bt({contactId:(n=t).contactid,uniqueIdentity:n.uniqueno,contactEmail:n.contactemail,contactName:n.contactname,invoiceDate:13===n.invoicedate.length?String(n.invoicedate/1e3):n.invoicedate,paymentDue:13===n.paymentdue.length?String(n.paymentdue/1e3):n.paymentdue,placeOfSupplyId:n.placeofsupplyid,subTotalAmount:n.subtotalamount,totalAmount:n.totalamount,totalTaxAmount:n.totaltaxamount,isRcmApplicable:n.isrcmapplicable,dueAmount:n.dueamount,billingAddressLine1:n.billingaddressline1||"",billingAddressLine2:n.billingaddressline2||"",billingAddressState:n.billingaddressstate||"",billingAddressCity:n.billingaddresscity||"",billingAddressZipCode:n.billingaddresszipcode||"",billingCurrencyId:n.billingcurrencyid||"",bankAccountBankName:n.bankaccountbankname,bankAccountBranchName:n.bankaccountbranchname,bankAccountHolderName:n.bankaccountholdername,bankAccountId:n.bankaccountid,bankAccountIfscCode:n.bankaccountifsccode,bankAccountNumber:n.bankaccountnumber,organizationAddressLine1:""===n.organizationaddressline1?R.addressline1:n.organizationaddressline1,organizationAddressLine2:""===n.organizationaddressline2?R.addressline2:n.organizationaddressline2,organizationCity:""===n.organizationcity?R.organizationcity:n.organizationcity,organizationState:""===n.organizationstate?R.statename:n.organizationstate,organizationZipCode:""===n.organizationzipcode?R.pinzipcode:n.organizationzipcode,organizationName:""===n.organizationname?R.name:n.organizationname,organizationImageUrl:null===n.organizationimageurl?R.organizationimageid:n.organizationimageurl,organizationStateCode:n.organizationstatecode||"",organizationGstin:""===n.organizationgstin?R.gstin:n.gstin,gstin:n.gstin,note:n.note,status:n.status,paymentStatus:n.paymentstatus}),e.next=5,it(n.contactid);case 5:return e.next=7,It(n.id);case 7:case"end":return e.stop()}}),e)}))),[t]);var At=function(e){var t=Array.isArray(e)?e.map((function(e){return e.id})):[];Je(t)};return Object(_.jsx)(k.a,{blocking:s,loader:Object(_.jsx)(y,{}),children:Object(_.jsx)("form",{onSubmit:ot(xt),children:Object(_.jsx)(u.ib,{className:"invoice-add",children:Object(_.jsxs)(r.Fragment,{children:[Object(_.jsx)(u.B,{xl:10,md:8,sm:12,children:Object(_.jsxs)(u.l,{className:"invoice-preview-card",children:[Object(_.jsxs)(u.m,{className:"invoice-padding pb-0",children:[function(){var e=Object.keys(lt),t=[];return Array.isArray(e)&&e.forEach((function(e){var n;"rows"!==e&&t.push(Object(_.jsxs)(u.I,{children:["$",null===(n=lt[e])||void 0===n?void 0:n.message]},e))})),t}(),Object(_.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column invoice-spacing mt-0",children:[Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"logo-wrapper",children:[Object(_.jsx)("img",{className:"rounded me-50",height:75,width:75,src:"https://drive.google.com/uc?id=".concat(t.imageid),alt:"Organisation Logo"}),Object(_.jsx)("h3",{className:"text-primary invoice-logo",children:R.name})]}),Object(_.jsx)("p",{className:"card-text mb-25",children:R.addressline1}),Object(_.jsx)("p",{className:"card-text mb-25",children:R.addressline2}),Object(_.jsxs)("p",{className:"card-text mb-0",children:[R.organizationcity," - ",R.pinzipcode]}),Object(_.jsx)("p",{className:"card-text mb-0",children:R.statename}),Object(_.jsx)("p",{className:"card-text mb-0",children:R.gstin})]}),Object(_.jsxs)("div",{className:"invoice-number-date mt-md-0 mt-2",children:[Object(_.jsxs)("div",{className:"d-flex align-items-center justify-content-md-end mb-1",children:[Object(_.jsx)("h4",{className:"invoice-title",children:"Invoice"}),Object(_.jsxs)(u.L,{className:"input-group-merge invoice-edit-input-group disabled",children:[Object(_.jsx)(u.M,{children:Object(_.jsx)(O.a,{size:15})}),Object(_.jsx)(u.K,{type:"number",className:"invoice-edit-input",value:3171,placeholder:"53634",disabled:!0})]})]}),Object(_.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[Object(_.jsx)("span",{className:"title ",children:"Invoice Date:"}),Object(_.jsx)(g.a,{control:dt,name:"invoiceDate",id:"invoiceDate",render:function(e){var t=e.field;return Object(_.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"U"},className:"form-control invoice-edit-input date-picker"})}})]}),Object(_.jsxs)("div",{className:"d-flex align-items-center",children:[Object(_.jsx)("span",{className:"title required",children:"Due Date:"}),Object(_.jsx)(g.a,{control:dt,name:"paymentDue",id:"paymentDue",render:function(e){var t=e.field;return Object(_.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"M j, Y",dateFormat:"U"},className:"form-control invoice-edit-input due-date-picker"})}})]})]})]})]}),Object(_.jsx)("hr",{className:"invoice-spacing"}),Object(_.jsxs)(u.m,{className:"invoice-padding pt-0",children:[Object(_.jsxs)(u.ib,{className:"row-bill-to invoice-spacing",children:[Object(_.jsxs)(u.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(_.jsx)("h6",{className:"invoice-to-title required",children:"Invoice To"}),Object(_.jsx)("div",{className:"invoice-customer",children:Object(_.jsx)(g.a,{control:dt,name:"contactId",id:"contactId",render:function(e){var t=e.field,n=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({inputRef:n,className:I()("react-select",{"is-invalid":lt.contactId})},t),{},{classNamePrefix:"select",options:G,value:G.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),it(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),Object(_.jsx)(u.B,{className:"pe-0 mt-xl-2",xl:"4",children:Object(_.jsx)("table",{children:Ce&&Object(_.jsxs)("tbody",{children:[Object(_.jsx)("tr",{children:Object(_.jsx)("td",{children:Ce.billingaddressline1})}),Object(_.jsx)("tr",{children:Object(_.jsx)("td",{children:Ce.billingaddressline2})}),Object(_.jsx)("tr",{children:Object(_.jsxs)("td",{children:[Ce.billingaddresscity," ",Ce.billingaddresszip&&"-","  ",Ce.billingaddresszip]})}),Object(_.jsx)("tr",{children:Object(_.jsx)("td",{children:Ce.billingaddressstatesname})})]})})})]}),Object(_.jsx)(u.B,{className:"col-bill-to ps-0",xl:"2"}),Object(_.jsxs)(u.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:[Object(_.jsx)("h6",{className:"mb-2",children:"Payment Details:"}),Object(_.jsx)("table",{children:Object(_.jsxs)("tbody",{children:[Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"Bank Name:"}),Object(_.jsx)("td",{children:_e.bankName&&Object(_.jsx)("span",{className:"fw-bolder",children:_e.bankName})})]}),Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"Account name:"}),Object(_.jsx)("td",{children:_e.accountHolderName&&Object(_.jsx)("span",{className:"fw-bolder",children:_e.accountHolderName})})]}),Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"Branch Name:"}),Object(_.jsxs)("td",{children:[" ",_e.branchAddress&&Object(_.jsx)("span",{className:"fw-bolder",children:_e.branchAddress})]})]}),Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"IFSC Code:"}),Object(_.jsx)("td",{children:_e.ifscCode&&Object(_.jsxs)("span",{className:"fw-bolder",children:[_e.ifscCode," "]})})]}),Ce.currenciescode&&Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"Currency code:"}),Object(_.jsx)("td",{children:Ce.currenciescode})]})]})})]})]}),Object(_.jsxs)(u.ib,{className:"row-bill-to invoice-spacing",children:[Object(_.jsxs)(u.B,{className:"col-bill-to ps-0",xl:"6",children:[Object(_.jsx)("h6",{className:"invoice-to-title mt-2 required",children:"Place Of Supply"}),Object(_.jsx)("div",{className:"invoice-customer",children:Object(_.jsx)(g.a,{control:dt,name:"placeOfSupplyId",id:"placeOfSupplyId",render:function(e){var t=e.field,n=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({inputRef:n,className:I()("react-select",{"is-invalid":lt.placeOfSupplyId})},t),{},{classNamePrefix:"select",options:ee,value:ee.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),wt()},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})}),""!==Ce.gstin&&void 0!==Ce.gstin&&Object(_.jsxs)("div",{className:"mt-1",children:[" GSTIN : ",Ce.gstin]})]}),Object(_.jsx)(u.B,{className:"col-bill-to ps-0",xl:"2"}),Object(_.jsx)(u.B,{className:"pe-0 mt-xl-0 mt-2",xl:"4",children:Object(_.jsx)("table",{children:Object(_.jsx)("tbody",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"pe-1",children:"RCM Applicable:"}),Object(_.jsx)("td",{children:Object(_.jsx)("div",{className:"form-switch form-check-success",children:Object(_.jsx)(g.a,{control:dt,name:"isRcmApplicable",id:"isRcmApplicable",render:function(e){return Object(m.a)(e),Object(_.jsx)(u.K,{type:"switch",id:"switch-success",onChange:function(e){Xe(!We),ut("isRcmApplicable",e.target.checked)}})}})})})]})})})})]})]}),Object(_.jsxs)(u.m,{className:"invoice-padding invoice-product-details",children:[mt.map((function(e,t){var n,a,c,i,s,r,o,l,d,b,m,f,p,O,v,N;return Object(_.jsx)("div",{className:"repeater-wrapper",children:Object(_.jsx)(u.ib,{children:Object(_.jsxs)(u.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(_.jsxs)(u.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(_.jsxs)(u.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(_.jsx)(u.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(_.jsx)(g.a,{control:dt,defaultValue:"".concat(e.serviceId),name:"rows[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({},c),{},{inputRef:i,className:I()("react-select",{"is-invalid":null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId}),classNamePrefix:"select",options:M,value:M.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),Nt(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId)&&Object(_.jsx)(u.I,{children:null===(c=lt.rows)||void 0===c||null===(i=c[t])||void 0===i?void 0:i.serviceId.message}),Object(_.jsx)(g.a,{id:"rows_".concat(t,"_description"),defaultValue:"".concat(e.description),name:"rows[".concat(t,"].description"),control:dt,render:function(e){var n,a,c=e.field;return Object(_.jsx)(u.K,Object(j.a)({className:"mt-1",invalid:(null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){c.onChange(e),Nt(t,!0,!1,!1,!1,!1)}},c))}})]}),Object(_.jsxs)(u.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(_.jsx)(u.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(_.jsx)(g.a,{id:"rows_".concat(t,"_sacCode"),defaultValue:"".concat(e.sacCode),name:"rows[".concat(t,"].sacCode"),control:dt,render:function(e){var n,a,c=e.field;return Object(_.jsx)(u.K,Object(j.a)({type:"text",invalid:(null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sacCode)&&!0,onInput:function(e){c.onChange(e),Nt(t,!1,!0,!0,!1,!1)}},c))}}),(null===(s=lt.rows)||void 0===s||null===(r=s[t])||void 0===r?void 0:r.sacCode)&&Object(_.jsx)(u.I,{children:null===(o=lt.rows)||void 0===o||null===(l=o[t])||void 0===l?void 0:l.sacCode.message})]}),Object(_.jsxs)(u.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(_.jsx)(u.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(_.jsx)(g.a,{defaultValue:e.price,id:"rows_".concat(t,"_price"),name:"rows[".concat(t,"].price"),control:dt,render:function(e){var n,a,c=e.field;return Object(_.jsx)(u.K,Object(j.a)(Object(j.a)({type:"number",id:"input_rows_".concat(t,"_price"),onInput:function(e){c.onChange(e),Nt(t,!1,!0,!1,!1,!1)}},c),{},{invalid:(null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0}))}}),(null===(d=lt.rows)||void 0===d||null===(b=d[t])||void 0===b?void 0:b.price)&&Object(_.jsx)(u.I,{children:null===(m=lt.rows)||void 0===m||null===(f=m[t])||void 0===f?void 0:f.price.message})]}),Object(_.jsxs)(u.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(_.jsx)(u.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(_.jsx)(g.a,{control:dt,defaultValue:e.taxGroupId,name:"rows[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({},c),{},{inputRef:i,className:I()("react-select",{"is-invalid":null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:$,value:$.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),Nt(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(p=lt.rows)||void 0===p||null===(O=p[t])||void 0===O?void 0:O.taxGroupId)&&Object(_.jsx)(u.I,{children:null===(v=lt.rows)||void 0===v||null===(N=v[t])||void 0===N?void 0:N.taxGroupId.message}),!e.isTaxApplicable&&Object(_.jsx)(g.a,{control:dt,name:"rows[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({},c),{},{inputRef:i,className:I()("react-select mt-1",{"is-invalid":null===(n=lt.rows)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:Ee,value:Ee.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(_.jsxs)(u.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(_.jsx)(u.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),dt._formValues.rows[t].subTotalAmount]})]}),Object(_.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(_.jsx)(x.a,{size:18,className:"cursor-pointer",onClick:function(){gt(t)}})})]})})},e.rowid)})),Object(_.jsx)(u.ib,{className:"mt-1",children:Object(_.jsx)(u.B,{sm:"12",className:"px-0",children:Object(_.jsxs)(u.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return vt()},children:[Object(_.jsx)(v.a,{size:14,className:"me-25"})," ",Object(_.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(_.jsx)(u.m,{className:"invoice-padding",children:Object(_.jsxs)(u.ib,{className:"invoice-sales-total-wrapper",children:[Object(_.jsx)(u.B,{className:"mt-md-0 mt-3",md:{size:"6",order:1},xs:{size:12,order:2}}),Object(_.jsx)(u.B,{className:"d-flex justify-content-end",md:{size:"6",order:2},xs:{size:12,order:1},children:Object(_.jsxs)("div",{className:"invoice-total-wrapper",children:[Object(_.jsxs)("div",{className:"invoice-total-item",children:[Object(_.jsx)("p",{className:"invoice-total-title",children:"Pre Tax Amount:"}),Object(_.jsx)("p",{className:"invoice-total-amount",children:be})]}),!We&&Object(_.jsx)("div",{children:he.map((function(e,t){return Object(_.jsxs)("div",{className:"invoice-total-item",children:[Object(_.jsx)("p",{className:"invoice-total-title",children:null===e||void 0===e?void 0:e.taxName}),Object(_.jsx)("p",{className:"invoice-total-amount",children:null===e||void 0===e?void 0:e.taxAmount})]},t)}))}),Object(_.jsx)("hr",{className:"my-50"}),Object(_.jsxs)("div",{className:"invoice-total-item",children:[Object(_.jsx)("p",{className:"invoice-total-title",children:"Total Payable:"}),Object(_.jsx)("p",{className:"invoice-total-amount",children:oe})]})]})})]})}),Object(_.jsx)("hr",{className:"invoice-spacing mt-0"}),Object(_.jsx)(u.m,{className:"invoice-padding py-0",children:Object(_.jsx)(u.ib,{children:Object(_.jsx)(u.B,{children:Object(_.jsxs)("div",{className:"mb-2",children:[Object(_.jsx)(u.N,{for:"note",className:"form-label fw-bold",children:"Note:"}),Object(_.jsx)(g.a,{id:"note",name:"note",control:dt,render:function(e){var t=e.field;return Object(_.jsx)(u.K,Object(j.a)({type:"textarea",value:t.value,invalid:lt.note&&!0},t))}})]})})})})]})}),Object(_.jsxs)(u.B,{xl:2,md:4,sm:12,children:[Object(_.jsx)(u.l,{className:"invoice-action-wrapper",children:Object(_.jsxs)(u.m,{children:[Object(_.jsx)(u.i,{color:"primary",type:"submit",block:!0,outline:!0,className:"mb-75",children:"Save"}),Object(_.jsx)(u.i,{color:"warning",block:!0,outline:!0,tag:l.b,to:"/invoice/view/".concat(F),children:"Cancel"})]})}),Object(_.jsx)("div",{className:"mt-2",children:Object(_.jsxs)("div",{className:"invoice-payment-option",children:[Object(_.jsx)("p",{className:"mb-50 required",children:"Accept payments via"}),Object(_.jsx)(g.a,{control:dt,name:"bankAccountId",rules:{required:!0},render:function(e){var t=e.field,n=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({},t),{},{inputRef:n,className:I()("react-select mt-1",{"is-invalid":lt.bankAccountId}),classNamePrefix:"select",options:ce,value:ce.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),yt(e.id)},getOptionLabel:function(e){return e.accountHolderName},getOptionValue:function(e){return e.id}}))}})]})}),Object(_.jsx)("div",{className:"mt-2",children:Object(_.jsxs)("div",{className:"invoice-payment-option",children:[Object(_.jsx)("p",{className:"mb-50",children:"Select Employee"}),Object(_.jsx)(g.a,{control:dt,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(_.jsx)(h.a,Object(j.a)(Object(j.a)({inputRef:a,className:I()("react-select",{"is-invalid":lt.reviewer})},t),{},{classNamePrefix:"select",options:ye,isMulti:!0,defaultValue:Ze,value:n,onChange:At,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:z}))}})]})})]})]})})})})};t.default=function(){var e=Object(o.g)().id,t=Object(r.useState)(null),n=Object(c.a)(t,2),i=n[0],b=n[1],j=function(){var t=Object(a.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.a.post("/taskinvoices/get",{id:e}).then((function(e){b(e.data.taskinvoices)})).catch((function(e){console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){j()}),[]),null!==i&&void 0!==i?Object(_.jsx)("div",{className:"invoice-edit-wrapper",children:Object(_.jsx)(u.ib,{className:"invoice-edit",children:Object(_.jsx)(u.B,{xl:12,md:8,sm:12,children:Object(_.jsx)(E,{data:i})})})}):Object(_.jsxs)(u.e,{color:"danger",children:[Object(_.jsx)("h4",{className:"alert-heading",children:"Invoice not found"}),Object(_.jsxs)("div",{className:"alert-body",children:["Invoice with id: ",e," doesn't exist. Check list of all invoices:"," ",Object(_.jsx)(l.b,{to:"/apps/invoice/list",children:"Invoice List"})]})]})}},525:function(e,t,n){"use strict";var a=n(14),c=n(34),i=n(2),s=n(7),r=n.n(s),o=n(97),l=(n(528),n(16)),d=function(e){var t,n=e.children,s=e.blocking,o=e.loader,d=e.className,u=e.tag,b=e.overlayColor,j=u;return Object(l.jsxs)(j,{className:r()("ui-loader",(t={},Object(c.a)(t,d,d),Object(c.a)(t,"show",s),t)),children:[n,s?Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)("div",Object(a.a)({className:"overlay"},s&&b?{style:{backgroundColor:b}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},526:function(e,t,n){"use strict";var a=n(16);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},528:function(e,t,n){},529:function(e,t,n){},533:function(e,t,n){},536:function(e,t,n){},606:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e,t,n){var a=0;return 1===n?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===n&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},c=function(e){return JSON.parse(e.replace(/\\/g,""))}}}]);
//# sourceMappingURL=50.16c25f90.chunk.js.map