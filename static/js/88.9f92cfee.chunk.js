(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[88],{1677:function(e,t,a){"use strict";a.r(t);a(134);var n=a(17),s=a(4),c=a(18),r=a(2),i=a.n(r),l=a(1),o=a(11),d=a(132),u=a(6),j=a.n(u),b=a(5),f=a(520),m=a.n(f),O=a(928),v=(a(596),a(509)),p=a(507),x=a(521),h=a(522),g=a(143),N=a(91),k=(a(523),a(510),a(508),a(512),a(12)),I=a(133),w=a(13),y=Object(k.b)(),C=Object(k.d)(),S=function(){var e,t,a,r,u,f,k,S=Object(l.useRef)(null),D=Object(o.f)(),z=Object(l.useState)(!1),P=(Object(c.a)(z,1)[0],Object(l.useState)("")),B=Object(c.a)(P,2),F=B[0],T=B[1],A=Object(o.g)().id,E=x.d().shape({updatedBy:x.f().default(C),clientId:x.c().required("Please select a Client"),serviceId:x.c().required("Please select a Service"),assignee:x.a().min(1,"Please select Assignee"),reviewer:x.a(),clientAccessFlag:x.b().default(!1),organizationId:x.c().default(y),taskStatus:x.c().default(1),invoiceId:x.c().default(0),startDate:x.f().required("Please Select Start Date"),endDate:x.f().required("Please Select End Date"),priority:x.f().required("Please select a Priority"),invoiceFlag:x.b().default(!1)}),q=Object(I.c)((function(e){return e.task})),L=Object(p.f)({resolver:Object(h.a)(E),defaultValues:E.cast()}),R=L.handleSubmit,V=L.formState.errors,Y=L.control,M=L.reset,J=L.setValue,U=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],_=Object(l.useState)([]),H=Object(c.a)(_,2),G=H[0],K=H[1],Q=Object(l.useState)([]),W=Object(c.a)(Q,2),X=W[0],Z=W[1],$=Object(I.b)(),ee=Object(l.useState)([]),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],se=Object(l.useState)([]),ce=Object(c.a)(se,2),re=ce[0],ie=ce[1],le=Object(l.useState)([]),oe=Object(c.a)(le,2),de=oe[0],ue=oe[1],je=Object(l.useState)(!1),be=Object(c.a)(je,2),fe=be[0],me=be[1],Oe=Object(l.useState)([]),ve=Object(c.a)(Oe,2),pe=ve[0],xe=ve[1];Object(l.useEffect)(Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===q.taskId){e.next=6;break}return t=pe.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{taskId:q.taskId})})),e.next=4,$(Object(g.b)({rows:t}));case 4:a=q.taskId,D("/task/view/".concat(a));case 6:case"end":return e.stop()}}),e)}))),[q.taskId]);var he=function(e,t){return{organizationId:y,userId:e,type:t,createdBy:C}},ge=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.assignee.forEach((function(e){a.push(he(e,1))})),t.reviewer.forEach((function(e){a.push(he(e,2))})),xe(a),delete t.assignee,delete t.reviewer,e.next=8,$(updateTask(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.post("/organizationusers/dropdown").then((function(e){var t=e.data;Z(t.organizationusers),K(t.organizationusers),ue(t.organizationusers)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){b.a.post("/clients/dropdown").then((function(e){var t=e.data;ne(t.clients)})),Ne(),b.a.post("/services/dropdown").then((function(e){var t=e.data;ie(t.services)}))}),[]);var ke=function(e){var t,a=Array.isArray(e)?e.map((function(e){return e.id})):[];t=a.length>0?de.filter((function(e){var t=e.id;return!a.some((function(e){return e===t}))})):de,Z(t),J("assignee",a)},Ie=function(e){var t,a=Array.isArray(e)?e.map((function(e){return e.id})):[];t=a.length>0?de.filter((function(e){var t=e.id;return!a.some((function(e){return e===t}))})):de,K(t),J("reviewer",a)};Object(l.useEffect)(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==q.selectedTask&&M({updatedBy:C,clientId:q.selectedTask.clientid,serviceId:q.selectedTask.serviceid,assignee:[],reviewer:[],clientAccessFlag:!1,organizationId:y,taskStatus:q.selectedTask.taskstatus,invoiceId:q.selectedTask.invoiceid||0,startDate:q.selectedTask.startdate,endDate:q.selectedTask.enddate,priority:parseInt(q.selectedTask.priority),invoiceFlag:q.selectedTask.invoiceflag});case 1:case"end":return e.stop()}}),e)}))),[q.selectedTask]),Object(l.useEffect)(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===A){e.next=3;break}return e.next=3,$(Object(g.i)(A));case 3:case"end":return e.stop()}}),e)}))),[A]);return Object(w.jsxs)("form",{onSubmit:R(ge),children:[Object(w.jsxs)(N.l,{className:"invoice-preview-card",children:[Object.keys(V).map((function(e,t){var a;return Object(w.jsxs)(N.I,{children:[" ",null===(a=V[e])||void 0===a?void 0:a.message]},t)})),Object(w.jsx)(N.p,{children:"Edit Task"}),Object(w.jsx)(N.m,{className:"pb-2 px-2",children:Object(w.jsxs)(N.jb,{children:[Object(w.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"clientId",children:"Client"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{control:Y,name:"clientId",id:"clientId",render:function(e){var t=e.field,a=e.ref;return Object(w.jsx)(v.a,Object(n.a)(Object(n.a)(Object(n.a)({},t),{},{inputRef:a,className:j()("react-select",{"is-invalid":V.clientId})},t),{},{classNamePrefix:"select",options:ae,value:ae.find((function(e){return e.id===t.value})),onChange:function(e){t.onChange(e.id),getClientData(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),V.clientId&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(e=V.clientId)||void 0===e?void 0:e.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"serviceId",children:"Service"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{control:Y,name:"serviceId",id:"serviceId",render:function(e){var t=e.field,a=e.ref;return Object(w.jsx)(v.a,Object(n.a)(Object(n.a)(Object(n.a)({},t),{},{inputRef:a,className:j()("react-select",{"is-invalid":V.serviceId})},t),{},{classNamePrefix:"select",options:re,value:re.find((function(e){return e.id===t.value})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),V.serviceId&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(t=V.serviceId)||void 0===t?void 0:t.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{id:"description",name:"description",control:Y,render:function(e){var t=e.field;return Object(w.jsx)(N.L,Object(n.a)({type:"textarea",invalid:V.description&&!0},t))}}),V.description&&Object(w.jsx)(N.I,{children:V.description.message})]})]}),Object(w.jsx)(N.jb,{className:"my-2",children:Object(w.jsx)(N.B,{children:Object(w.jsxs)("div",{className:"d-lg-flex",children:[Object(w.jsx)("input",{type:"file",className:"hidden",multiple:!0,onChange:function(e){console.log(e.target.files)},ref:S}),Object(w.jsxs)(N.i,{type:"button",outline:!0,color:"primary",onClick:function(){return S.current.click()},children:[Object(w.jsx)(O.a,{size:14,className:"me-25"})," Add Attachment"]})]})})})]}),Object(w.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"assignee",children:"Assignee"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{control:Y,name:"assignee",id:"assignee",render:function(e){var t=e.field,a=e.value,s=e.ref;return Object(w.jsx)(v.a,Object(n.a)(Object(n.a)({inputRef:s,className:j()("react-select",{"is-invalid":V.assignee})},t),{},{classNamePrefix:"select",options:G,isMulti:!0,value:a,onChange:ke,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),V.assignee&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(a=V.assignee)||void 0===a?void 0:a.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{control:Y,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,a=e.value,s=e.ref;return Object(w.jsx)(v.a,Object(n.a)(Object(n.a)({inputRef:s,className:j()("react-select",{"is-invalid":V.reviewer})},t),{},{classNamePrefix:"select",options:X,isMulti:!0,value:a,onChange:Ie,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),V.reviewer&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(r=V.reviewer)||void 0===r?void 0:r.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"startDate",children:"Start Date"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{value:F,name:"startDate",control:Y,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(w.jsx)(m.a,{value:t.value,onChange:function(e,a){t.onChange(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:j()("due-date-picker",{"flatpickr-input is-invalid":V.startDate})})}}),V.startDate&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(u=V.startDate)||void 0===u?void 0:u.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"endDate",children:"End Date"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{value:F,onChange:function(e){return T(e)},name:"endDate",control:Y,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(w.jsx)(m.a,{value:t.value,onChange:function(e,a){t.onChange(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:j()("due-date-picker",{"flatpickr-input is-invalid":V.endDate})})}}),V.endDate&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(f=V.endDate)||void 0===f?void 0:f.message})]})]}),Object(w.jsxs)(N.jb,{className:"mb-1",children:[Object(w.jsx)(N.O,{sm:"3",size:"lg",className:"form-label",for:"priority",children:"Priority"}),Object(w.jsxs)(N.B,{sm:"9",children:[Object(w.jsx)(p.a,{control:Y,name:"priority",id:"priority",render:function(e){var t=e.field,a=e.ref;return Object(w.jsx)(v.a,Object(n.a)(Object(n.a)(Object(n.a)({},t),{},{inputRef:a,className:j()("react-select",{"is-invalid":V.priority})},t),{},{classNamePrefix:"select",options:U,value:U.find((function(e){return e.id===t.value})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),V.priority&&Object(w.jsx)(N.I,{className:"text-danger",children:null===(k=V.priority)||void 0===k?void 0:k.message})]})]})]})]})}),Object(w.jsx)("hr",{className:"invoice-spacing"}),Object(w.jsx)(N.jb,{className:"px-1 pb-2",children:Object(w.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(w.jsx)(p.a,{control:Y,name:"invoiceFlag",rules:{required:!0},render:function(e){var t=e.field;return Object(w.jsx)(N.L,Object(n.a)(Object(n.a)({className:"form-check-input",type:"checkbox",id:"invoice_flag",value:t.value},t),{},{onChange:function(e){t.onChange(e),me(!fe)}}))}}),Object(w.jsx)(N.O,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})})]}),Object(w.jsx)(N.l,{children:Object(w.jsx)(N.m,{children:Object(w.jsxs)("div",{className:"modal-footer border-0",children:[Object(w.jsx)(N.i,{className:"add-new-user",outline:!0,color:"warning",tag:d.b,to:"/task/list",children:"Cancel"}),Object(w.jsx)(N.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};t.default=function(){return Object(w.jsx)("div",{className:"invoice-add-wrapper",children:Object(w.jsx)(N.jb,{className:"invoice-add",children:Object(w.jsx)(N.B,{xl:12,md:12,sm:12,children:Object(w.jsx)(S,{})})})})}},508:function(e,t,a){},512:function(e,t,a){},523:function(e,t,a){}}]);
//# sourceMappingURL=88.9f92cfee.chunk.js.map