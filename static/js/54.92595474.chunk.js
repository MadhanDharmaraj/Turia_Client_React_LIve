(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[54],{1464:function(e,t,n){"use strict";n.r(t);n(144);var a=n(143),c=n(1),i=n(4),s=n(14),r=n(8),o=n(22),l=n(2),d=n(13),u=n(140),j=n(7),b=n.n(j),m=n(571),f=n(527),v=n(5),O=n(544),p=n.n(O),x=n(718),g=n(830),h=n(825),I=(n(555),n(535)),N=n(532),y=n(538),k=n(539),S=n(146),C=n(153),w=n(97),A=n(525),z=n(526),F=(n(536),n(534),n(529),n(533),n(10)),P=n(141),B=n(574),D=n(39),q=n.n(D),V=n(16),_=Object(F.b)(),T=Object(F.a)(),R=Object(F.d)(),E=function(){var e,t,n,j,O,F,D,E=Object(l.useState)(!1),L=Object(o.a)(E,2),G=L[0],M=L[1],J=function(){return Object(V.jsx)(l.Fragment,{children:Object(V.jsx)(z.a,{})})},K={multiValue:function(e,t){return Object(r.a)(t),Object(s.a)(Object(s.a)({},e),{},{backgroundColor:"#7367f0"})}},Y=Object(d.f)(),U=Object(l.useState)(!1),H=(Object(o.a)(U,1)[0],Object(l.useState)("")),Z=Object(o.a)(H,2),Q=Z[0],W=Z[1],X=y.d().shape({createdBy:y.f().default(R),clientId:y.f().required("Please select a Client"),serviceId:y.f().required("Please select a Service"),assignee:y.a().min(1,"Please select Assignee"),reviewer:y.a(),clientAccessFlag:y.b().default(!1),organizationId:y.f().default(_),taskStatus:y.c().default(1),invoiceId:y.f().default(0),startDate:y.f().required("Please Select Start Date"),endDate:y.f().required("Please Select End Date"),recurringFlag:y.b().default(!1),priority:y.f().required("Please select a Priority"),invoiceFlag:y.b().default(!0),invoiceItems:y.a().of(y.d().shape({serviceId:y.f().required("Please Select Service Item"),invoiceId:y.f(),sacCode:y.f(),price:y.f(),organizationId:y.f().default(_),exemptioReasonId:y.f(),actualPrice:y.f().nullable(),taxGroupId:y.f().required("Please Select Tax group"),subTotalAmount:y.f().nullable("Subtotal Should be Greater than 0"),isTaxApplicable:y.b().default(!0),taxes:y.f()})).when("invoiceFlag",{is:function(e){return!0===e},then:y.a().min(1,"Require Atleast one Item when Proposal For this Task.")})}),$=Object(P.c)((function(e){return e.task})),ee=Object(P.c)((function(e){return e.invoice})),te=Object(N.f)({resolver:Object(k.a)(X),defaultValues:X.cast()}),ne=te.handleSubmit,ae=te.formState.errors,ce=te.control,ie=te.setValue,se=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],re=Object(l.useState)([]),oe=Object(o.a)(re,2),le=oe[0],de=oe[1],ue=Object(l.useState)([]),je=Object(o.a)(ue,2),be=je[0],me=je[1],fe=Object(P.b)(),ve=Object(l.useState)([]),Oe=Object(o.a)(ve,2),pe=Oe[0],xe=Oe[1],ge=Object(l.useState)([]),he=Object(o.a)(ge,2),Ie=he[0],Ne=he[1],ye=Object(l.useState)([]),ke=Object(o.a)(ye,2),Se=ke[0],Ce=ke[1],we=Object(l.useState)([]),Ae=Object(o.a)(we,2),ze=Ae[0],Fe=Ae[1],Pe=Object(l.useState)([]),Be=Object(o.a)(Pe,2),De=Be[0],qe=Be[1],Ve=Object(l.useState)(!0),_e=Object(o.a)(Ve,2),Te=_e[0],Re=_e[1],Ee=Object(l.useState)([]),Le=Object(o.a)(Ee,2),Ge=Le[0],Me=Le[1],Je=Object(l.useState)([]),Ke=Object(o.a)(Je,2),Ye=Ke[0],Ue=Ke[1],He=Object(l.useState)({}),Ze=Object(o.a)(He,2),Qe=Ze[0],We=Ze[1],Xe=Object(l.useState)({}),$e=Object(o.a)(Xe,2),et=$e[0],tt=$e[1],nt=Object(l.useState)([]),at=Object(o.a)(nt,2),ct=at[0],it=at[1],st=Object(l.useState)([]),rt=Object(o.a)(st,2),ot=rt[0],lt=rt[1],dt=Object(l.useState)(0),ut=Object(o.a)(dt,2),jt=ut[0],bt=ut[1],mt=Object(l.useState)(0),ft=Object(o.a)(mt,2),vt=ft[0],Ot=ft[1],pt=Object(l.useState)(""),xt=Object(o.a)(pt,2),gt=xt[0],ht=xt[1],It=Object(l.useState)(0),Nt=Object(o.a)(It,2),yt=Nt[0],kt=Nt[1],St=Object(N.e)({name:"invoiceItems",keyName:"rowid",control:ce}),Ct=St.fields,wt=St.append,At=St.remove,zt=Object(l.useState)([]),Ft=Object(o.a)(zt,2),Pt=Ft[0],Bt=Ft[1],Dt=Object(l.useState)([]),qt=Object(o.a)(Dt,2),Vt=qt[0],_t=qt[1],Tt=Object(l.useState)(0),Rt=Object(o.a)(Tt,2),Et=Rt[0],Lt=Rt[1],Gt=Object(l.useState)([]),Mt=Object(o.a)(Gt,2),Jt=Mt[0],Kt=Mt[1],Yt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={taskId:$.taskId,organizationId:_,attachmentIds:Jt,createdBy:R},e.next=3,v.a.post("/google/movetaskfiles",t).then((function(e){var t=e.data;Fe(t.exemptionreasons)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a,i,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===$.taskId){e.next=22;break}return t=Ye.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{taskId:$.taskId})})),e.next=4,fe(Object(S.c)({rows:t}));case 4:if(!(Jt.length>0)){e.next=7;break}return e.next=7,Yt();case 7:if(!(""!==gt||Jt.length>0)){e.next=11;break}return n={comment:gt,taskId:$.taskId,createdBy:R,organizationId:_,attachmentIds:Jt,isDefault:!0},e.next=11,fe(Object(S.a)(n));case 11:return a={taskId:$.taskId,serviceId:ce._formValues.serviceId,organizationId:_,createdBy:R},e.next=14,fe(Object(S.e)(a));case 14:if(!Te){e.next=20;break}return i=Object(s.a)(Object(s.a)({},et),{},{calculateTaxes:JSON.stringify(ct),totalTaxAmount:String(yt),dueAmount:String(jt),totalAmount:String(jt),subTotalAmount:String(vt)}),e.next=18,fe(Object(C.a)(i));case 18:e.next=22;break;case 20:r=$.taskId,Y("/task/view/".concat(r));case 22:case"end":return e.stop()}}),e)}))),[$.taskId]),Object(l.useEffect)(Object(i.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Te){e.next=10;break}if(null===ee.invoiceId){e.next=10;break}return t=ot.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{invoiceId:ee.invoiceId})})),e.next=5,fe(Object(C.b)(t));case 5:return n=ee.invoiceId,a=$.taskId,e.next=9,fe(Object(S.p)({updatedBy:R,id:a,invoiceId:n}));case 9:Y("/task/view/".concat(a));case 10:case"end":return e.stop()}}),e)}))),[ee.invoiceId]);var Ut=function(e,t){return{organizationId:_,userId:e,type:t,createdBy:R}},Ht=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),n=t.invoiceItems,lt((function(e){return[].concat(Object(a.a)(e),Object(a.a)(n))})),i=[],t.assignee.forEach((function(e){i.push(Ut(e,1))})),void 0!==t.reviewer&&t.reviewer.forEach((function(e){i.push(Ut(e,2))})),Ue(i),delete t.invoiceItems,delete t.assignee,delete t.reviewer,e.next=12,fe(Object(S.b)(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(Object(S.j)(t));case 2:n=e.sent,We(n.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.post("/organizationusers/dropdown").then((function(e){var t=e.data;me(t.organizationusers),de(t.organizationusers),Ce(t.organizationusers)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wt={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){Lt(Math.round(100*e.loaded/e.total))}},Xt=Object(m.a)({multiple:!0,onDrop:function(e,t){t.length?toast.error("You can only upload image Files!."):(_t(e),Bt([].concat(Object(a.a)(Pt),Object(a.a)(e))))}}),$t=Xt.getRootProps,en=Xt.getInputProps;Object(l.useEffect)((function(){Vt.length>0&&function(){var e=new FormData;Vt.forEach((function(t,n){e.append("files[".concat(n,"]"),t)})),e.append("organizationId",_),e.append("createdBy",R),v.a.post("/google/taskfiles",e,Wt).then((function(e){Kt([].concat(Object(a.a)(Jt),Object(a.a)(e.data.attachment_ids)))})).catch((function(e){console.log(e)}))}()}),[Vt]);var tn=function(){wt({invoiceId:0,organizationId:_,serviceId:"",sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:"",isTaxApplicable:!1})};Object(l.useEffect)((function(){if(Object.keys(Qe).length>0){var e={};e.billingAddressCity=Qe.billingaddresscity,e.billingAddressLine1=Qe.billingaddressline1,e.billingAddressLine2=Qe.billingaddressline2||"",e.billingAddressState=Qe.billingaddressstatesname||"",e.billingAddressZipCode=Qe.billingaddresszip,e.billingCurrencyId=Qe.currencyid||T.currencyid,e.billingCurrencySymbol=Qe.currenciessymbol,e.billingCurrencyShortName=Qe.currenciescode,e.billingCurrencyName=Qe.currenciesname,e.bankAccountBankName="",e.bankAccountBranchName="",e.bankAccountHolderName="",e.bankAccountId="",e.bankAccountIfscCode="",e.bankAccountNumber="",e.contactEmail=Qe.email,e.gstin=Qe.gstin,e.isRcmApplicable=!1,e.contactName=Qe.name,e.placeOfSupplyId=Qe.placeofsupplyid,e.contactId=Qe.id,e.organizationAddressLine1=T.addressline1,e.organizationAddressLine2=T.addressline2,e.organizationCity=T.organizationcity,e.organizationState=T.statename,e.organizationZipCode=T.pinzipcode,e.organizationName=T.name,e.organizationImageUrl=T.organizationimageid,e.organizationStateCode=T.stateshortname,e.organizationGstin=T.gstin,e.createdBy=R,e.invoiceDate=q()().startOf("day").format("x"),e.organizationId=_,e.note="",e.paymentStatus=5,e.status=4,e.paymentDue=q()().startOf("day").format("x"),tt(e);var t=1;T.stateid===Qe.placeofsupplyid&&(t=2),function(e){var t={type:e};v.a.post("/taxvalues/list",t).then((function(e){var t=e.data;Me(t.taxvalues)}))}(t)}}),[Qe]);var nn=function(){var e=ce._formValues.invoiceItems,t=0,n=0,a=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),n=parseFloat(e.price)+parseFloat(n),a=parseFloat(a)+parseFloat(e.taxPrice)})),bt(t),Ot(n),kt(a),function(){var e;e=ce._formValues.invoiceItems.map((function(e){return Object(B.b)(e.taxes)})).flat().reduce((function(e,t){if(void 0!==t){var n=e.find((function(e){return t.taxName===e.taxName}));n?n.taxAmount=parseFloat(n.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),it(e)}()},an=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=ce._formValues.invoiceItems[e]||{};if(void 0===o.serviceId||""===o.serviceId)return!1;var l=Ie.find((function(e){return e.id===o.serviceId}));ie("invoiceItems[".concat(e,"].serviceId"),o.serviceId),r?(ie("invoiceItems[".concat(e,"].sacCode"),l.saccode),t=l.sellingprice||0,n=l.taxgroupid,ie("invoiceItems[".concat(e,"].actualPrice"),t),ie("invoiceItems[".concat(e,"].price"),String(l.sellingprice)||0),ie("invoiceItems[".concat(e,"].taxGroupId"),n),ie("invoiceItems[".concat(e,"].description"),l.description),ie("invoiceItems[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):(ie("invoiceItems[".concat(e,"].sacCode"),i?o.sacCode:l.saccode),t=c?o.price:l.sellingprice||0,n=s?o.taxGroupId:l.taxgroupid,ie("invoiceItems[".concat(e,"].price"),t),ie("invoiceItems[".concat(e,"].actualPrice"),String(l.sellingprice)||0),ie("invoiceItems[".concat(e,"].taxGroupId"),n),ie("invoiceItems[".concat(e,"].description"),a?o.description:l.description),ie("invoiceItems[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var d=0,u=[],j=De.find((function(e){return e.id===n})),b=void 0!==j?!j.nontaxableflag:l.istaxapplicable||!1;ie("invoiceItems[".concat(e,"].isTaxApplicable"),b),b&&void 0!==j&&Ge.forEach((function(e){if(e.taxid===n){var a;a=Object(B.a)(t,e.percentage,2),d=parseFloat(d)+parseFloat(a);var c={};c.taxName="".concat(e.name," (").concat(e.percentage,"%)"),c.taxId=parseInt(e.id),c.taxNameValue=e.name,c.taxPercentage=String(e.percentage),c.taxAmount=String(a),u.push(c)}})),ie("invoiceItems[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(d||0)+parseFloat(t||0)).toFixed(2)),ie("invoiceItems[".concat(e,"].taxPrice"),parseFloat(d).toFixed(2)),ie("invoiceItems[".concat(e,"].taxes"),JSON.stringify(u)),ie("invoiceItems[".concat(e,"].createdBy"),R),nn()},cn=Vt.map((function(e,t){return Object(V.jsxs)(w.P,{className:"d-flex align-items-center justify-content-between",children:[Object(V.jsxs)("div",{className:"file-details d-flex align-items-center",children:[Object(V.jsx)("div",{className:"file-preview me-1",children:Object(V.jsx)(f.a,{})}),Object(V.jsxs)("div",{children:[Object(V.jsx)("p",{className:"file-name mb-0",children:e.name}),Object(V.jsx)("p",{className:"file-size mb-0",children:(n=e.size,Math.round(n/100)/10>1e3?"".concat((Math.round(n/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(n/100)/10).toFixed(1)," kb"))})]})]}),Object(V.jsx)(w.i,{color:"danger",outline:!0,size:"sm",className:"btn-icon",onClick:function(){return function(e){var t=Vt.filter((function(t){return t.name!==e.name}));_t(Object(a.a)(t))}(e)},children:Object(V.jsx)(x.a,{size:14})})]},"".concat(e.name,"-").concat(t));var n}));Object(l.useEffect)((function(){v.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;xe(t.clients)})),v.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;Ne(t.services)})),v.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;qe(t.taxgroups)})),Qt(),v.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;Fe(t.exemptionreasons)})),tn()}),[]);var sn=function(e){var t,n=Array.isArray(e)?e.map((function(e){return e.id})):[];t=n.length>0?Se.filter((function(e){var t=e.id;return!n.some((function(e){return e===t}))})):Se,me(t),ie("assignee",n)},rn=function(e){var t,n=Array.isArray(e)?e.map((function(e){return e.id})):[];t=n.length>0?Se.filter((function(e){var t=e.id;return!n.some((function(e){return e===t}))})):Se,de(t),ie("reviewer",n)};return Object(V.jsx)(A.a,{blocking:G,loader:Object(V.jsx)(J,{}),children:Object(V.jsxs)("form",{onSubmit:ne(Ht),children:[Object(V.jsxs)(w.l,{className:"invoice-preview-card",children:[Object.keys(ae).map((function(e,t){var n;return Object(V.jsxs)(w.I,{children:[" ",null===(n=ae[e])||void 0===n?void 0:n.message]},t)})),Object(V.jsx)(w.p,{children:"Add Task"}),Object(V.jsx)(w.m,{className:"pb-2 px-2",children:Object(V.jsxs)(w.ib,{children:[Object(V.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"clientId",children:"Client"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{control:ce,name:"clientId",id:"clientId",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)(Object(s.a)({},t),{},{inputRef:a,className:b()("react-select",{"is-invalid":ae.clientId})},t),{},{classNamePrefix:"select",options:pe,value:pe.find((function(e){return e.id===n})),onChange:function(e){t.onChange(e.id),Zt(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),ae.clientId&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(e=ae.clientId)||void 0===e?void 0:e.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"serviceId",children:"Service"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{control:ce,name:"serviceId",id:"serviceId",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)(Object(s.a)({},t),{},{inputRef:a,className:b()("react-select",{"is-invalid":ae.serviceId})},t),{},{classNamePrefix:"select",options:Ie,value:Ie.find((function(e){return e.id===n})),onChange:function(e){var n;return n=e.id,0===ce._formValues.invoiceItems.length&&tn(),ie("invoiceItems[0].serviceId",n),an(0,!1,!1,!1,!1,!0),t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),ae.serviceId&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(t=ae.serviceId)||void 0===t?void 0:t.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{id:"description",name:"description",control:ce,render:function(e){var t=e.field;return Object(V.jsx)(w.K,Object(s.a)({type:"textarea",onInput:function(e){ht(e.target.value)},invalid:ae.description&&!0},t))}}),ae.description&&Object(V.jsx)(w.I,{children:ae.description.message})]})]}),Object(V.jsx)(w.ib,{className:"my-2",children:Object(V.jsx)(w.B,{children:Object(V.jsxs)("div",{className:"d-lg-flex",children:[Object(V.jsx)("input",Object(s.a)({},en())),Object(V.jsxs)(w.i,Object(s.a)(Object(s.a)({type:"button",color:"primary",size:"sm"},$t({className:"dropzone"})),{},{children:[Object(V.jsx)(h.a,{size:14,className:""})," Add Attachment"]})),Et>0&&Object(V.jsx)(w.hb,{className:"mt-md-50",color:Et<100?"primary":"success",value:Et})]})})}),Object(V.jsx)(w.ib,{children:Object(V.jsx)(w.O,{className:"col-3",children:cn})})]}),Object(V.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"assignee",children:"Assignee"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{control:ce,name:"assignee",id:"assignee",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)({inputRef:a,className:b()("react-select",{"is-invalid":ae.assignee})},t),{},{classNamePrefix:"select",options:le,isMulti:!0,value:n,onChange:sn,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:K}))}}),ae.assignee&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(n=ae.assignee)||void 0===n?void 0:n.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{control:ce,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)({inputRef:a,className:b()("react-select",{"is-invalid":ae.reviewer})},t),{},{classNamePrefix:"select",options:be,isMulti:!0,value:n,onChange:rn,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:K}))}}),ae.reviewer&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(j=ae.reviewer)||void 0===j?void 0:j.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"startDate",children:"Start Date"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{value:Q,name:"startDate",control:ce,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(V.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:b()("due-date-picker",{"flatpickr-input is-invalid":ae.startDate})})}}),ae.startDate&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(O=ae.startDate)||void 0===O?void 0:O.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"endDate",children:"End Date"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{value:Q,onChange:function(e){return W(e)},name:"endDate",control:ce,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(V.jsx)(p.a,{value:t.value,onChange:function(e,n){t.onChange(n)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:b()("due-date-picker",{"flatpickr-input is-invalid":ae.endDate})})}}),ae.endDate&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(F=ae.endDate)||void 0===F?void 0:F.message})]})]}),Object(V.jsxs)(w.ib,{className:"mb-1",children:[Object(V.jsx)(w.N,{sm:"3",size:"lg",className:"form-label required",for:"priority",children:"Priority"}),Object(V.jsxs)(w.B,{sm:"9",children:[Object(V.jsx)(N.a,{control:ce,name:"priority",id:"priority",render:function(e){var t=e.field,n=e.value,a=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)(Object(s.a)({},t),{},{inputRef:a,className:b()("react-select",{"is-invalid":ae.priority})},t),{},{classNamePrefix:"select",options:se,value:se.find((function(e){return e.id===n})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),ae.priority&&Object(V.jsx)(w.I,{className:"text-danger",children:null===(D=ae.priority)||void 0===D?void 0:D.message})]})]})]})]})}),Object(V.jsx)("hr",{className:"invoice-spacing"}),Object(V.jsx)(w.ib,{className:"px-1 pb-2",children:Object(V.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(V.jsx)(N.a,{control:ce,name:"invoiceFlag",rules:{required:!0},render:function(e){var t=e.field;return Object(V.jsx)(w.K,Object(s.a)(Object(s.a)({className:"form-check-input",type:"checkbox",id:"invoice_flag"},t),{},{onChange:function(e){t.onChange(e),Re(!Te),ie("invoiceFlag",!Te),Te?At():0===ce._formValues.invoiceItems.length&&tn()},defaultChecked:Te}))}}),Object(V.jsx)(w.N,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})}),Te&&Object(V.jsxs)(w.m,{className:"invoice-padding invoice-product-details",children:[Ct.map((function(e,t){var n,a,c,i,r,o,l,d,u,j,m,f,v,O,p,g;return Object(V.jsx)("div",{className:"repeater-wrapper",children:Object(V.jsx)(w.ib,{children:Object(V.jsxs)(w.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(V.jsxs)(w.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(V.jsxs)(w.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(V.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(V.jsx)(N.a,{control:ce,name:"invoiceItems[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)({},c),{},{inputRef:i,className:b()("react-select",{"is-invalid":null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId}),classNamePrefix:"select",options:Ie,value:Ie.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),an(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.serviceId)&&Object(V.jsx)(w.I,{children:null===(c=ae.invoiceItems)||void 0===c||null===(i=c[t])||void 0===i?void 0:i.serviceId.message}),Object(V.jsx)(N.a,{id:"invoiceItems_".concat(t,"_description"),name:"invoiceItems[".concat(t,"].description"),control:ce,render:function(e){var n,a,c=e.field;return Object(V.jsx)(w.K,Object(s.a)({className:"mt-1",invalid:(null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.description)&&!0,onInput:function(e){c.onChange(e),an(t,!0,!1,!1,!1,!1)}},c))}})]}),Object(V.jsxs)(w.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(V.jsx)(w.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(V.jsx)(N.a,{id:"invoiceItems_".concat(t,"_sacCode"),name:"invoiceItems[".concat(t,"].sacCode"),control:ce,render:function(e){var n,a,c=e.field;return Object(V.jsx)(w.K,Object(s.a)({type:"text",invalid:(null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.sacCode)&&!0,onInput:function(e){c.onChange(e),an(t,!1,!0,!0,!1,!1)}},c))}}),(null===(r=ae.invoiceItems)||void 0===r||null===(o=r[t])||void 0===o?void 0:o.sacCode)&&Object(V.jsx)(w.I,{children:null===(l=ae.invoiceItems)||void 0===l||null===(d=l[t])||void 0===d?void 0:d.sacCode.message})]}),Object(V.jsxs)(w.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(V.jsx)(w.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(V.jsx)(N.a,{id:"invoiceItems_".concat(t,"_price"),name:"invoiceItems[".concat(t,"].price"),control:ce,render:function(e){var n,a,c=e.field;return Object(V.jsx)(w.K,Object(s.a)(Object(s.a)({type:"number",id:"input_invoiceItems_".concat(t,"_price"),onInput:function(e){c.onChange(e),an(t,!1,!0,!1,!1,!1)}},c),{},{invalid:(null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.price)&&!0}))}}),(null===(u=ae.invoiceItems)||void 0===u||null===(j=u[t])||void 0===j?void 0:j.price)&&Object(V.jsx)(w.I,{children:null===(m=ae.invoiceItems)||void 0===m||null===(f=m[t])||void 0===f?void 0:f.price.message})]}),Object(V.jsxs)(w.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(V.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(V.jsx)(N.a,{control:ce,name:"invoiceItems[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)({},c),{},{inputRef:i,className:b()("react-select",{"is-invalid":null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:De,value:De.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),an(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(v=ae.invoiceItems)||void 0===v||null===(O=v[t])||void 0===O?void 0:O.taxGroupId)&&Object(V.jsx)(w.I,{children:null===(p=ae.invoiceItems)||void 0===p||null===(g=p[t])||void 0===g?void 0:g.taxGroupId.message}),!e.isTaxApplicable&&Object(V.jsx)(N.a,{control:ce,name:"invoiceItems[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var n,a,c=e.field,i=e.ref;return Object(V.jsx)(I.a,Object(s.a)(Object(s.a)({},c),{},{inputRef:i,className:b()("react-select mt-1",{"is-invalid":null===(n=ae.invoiceItems)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.taxGroupId}),classNamePrefix:"select",options:ze,value:ze.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(V.jsxs)(w.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(V.jsx)(w.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),ce._formValues.invoiceItems[t].subTotalAmount]})]}),Object(V.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(V.jsx)(x.a,{size:18,className:"cursor-pointer",onClick:function(){At(t),nn()}})})]})})},e.rowid)})),Object(V.jsx)(w.ib,{className:"mt-1",children:Object(V.jsx)(w.B,{sm:"12",className:"px-0",children:Object(V.jsxs)(w.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return tn()},children:[Object(V.jsx)(g.a,{size:14,className:"me-25"})," ",Object(V.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(V.jsx)(w.l,{children:Object(V.jsx)(w.m,{children:Object(V.jsxs)("div",{className:"modal-footer border-0",children:[Object(V.jsx)(w.i,{className:"add-new-user",outline:!0,color:"warning",tag:u.b,to:"/task/list",children:"Cancel"}),Object(V.jsx)(w.i,{color:"primary",type:"submit",children:"Save"})]})})})]})})};t.default=function(){return Object(V.jsx)("div",{className:"invoice-add-wrapper",children:Object(V.jsx)(w.ib,{className:"invoice-add",children:Object(V.jsx)(w.B,{xl:12,md:12,sm:12,children:Object(V.jsx)(E,{})})})})}},525:function(e,t,n){"use strict";var a=n(14),c=n(34),i=n(2),s=n(7),r=n.n(s),o=n(97),l=(n(528),n(16)),d=function(e){var t,n=e.children,s=e.blocking,o=e.loader,d=e.className,u=e.tag,j=e.overlayColor,b=u;return Object(l.jsxs)(b,{className:r()("ui-loader",(t={},Object(c.a)(t,d,d),Object(c.a)(t,"show",s),t)),children:[n,s?Object(l.jsxs)(i.Fragment,{children:[Object(l.jsx)("div",Object(a.a)({className:"overlay"},s&&j?{style:{backgroundColor:j}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},526:function(e,t,n){"use strict";var a=n(16);t.a=function(){return Object(a.jsx)("div",{className:"fallback-spinner",children:Object(a.jsxs)("div",{className:"loading",children:[Object(a.jsx)("div",{className:"effect-1 effects"}),Object(a.jsx)("div",{className:"effect-2 effects"}),Object(a.jsx)("div",{className:"effect-3 effects"})]})})}},528:function(e,t,n){},529:function(e,t,n){},533:function(e,t,n){},536:function(e,t,n){},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var a=function(e,t,n){var a=0;return 1===n?a=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===n&&(a=parseFloat(e)*parseFloat(t)/100),parseFloat(a)},c=function(e){return JSON.parse(e.replace(/\\/g,""))}}}]);
//# sourceMappingURL=54.92595474.chunk.js.map