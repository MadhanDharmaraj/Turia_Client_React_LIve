(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[9],{1277:function(e,t,s){},633:function(e,t,s){},705:function(e,t,s){"use strict";var c=s(1),a=s(4),n=s(22),i=s(96),r=s(812),l=s(813),j=s(145),o=s(10),u=s(528),d=s(173),b=s(2),O=s(140),m=s(39),x=s.n(m),h=s(5),f=s(13),g=s(144),p=s(16),v=Object(o.b)(),N=Object(o.d)(),y=Object(o.c)();t.a=function(){var e=Object(O.b)(),t=Object(f.f)(),s=x()().format("dddd"),o=Object(O.c)((function(e){return e.dashboard})),m=Object(b.useState)(!1),k=Object(n.a)(m,2),Y=k[0],D=k[1],z=Object(b.useState)(null),M=Object(n.a)(z,2),S=M[0],I=M[1],w=Object(b.useState)([]),B=Object(n.a)(w,2),_=B[0],H=B[1],T=Object(b.useState)(0),E=Object(n.a)(T,2),C=E[0],J=E[1],F=Object(b.useState)(null),P=Object(n.a)(F,2),L=P[0],R=P[1],V=Object(b.useState)(null),q=Object(n.a)(V,2),A=q[0],G=q[1],U=Object(b.useState)(null),W=Object(n.a)(U,2),K=W[0],Q=W[1],X=Object(b.useState)(null),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(b.useState)(0),se=Object(n.a)(te,2),ce=se[0],ae=se[1],ne={color:"light-success",icon:Object(p.jsx)(r.a,{size:24})},ie={color:"light-danger",icon:Object(p.jsx)(l.a,{size:24})},re=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var a,n,i,r,l,j;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=_.find((function(e){return JSON.parse(e).day===s})),n=JSON.parse(a),i=2,r=x()().format("H.mm"),l=n.start.split(":").join("."),parseFloat(l)+parseFloat(C)<parseFloat(r)?i=3:parseFloat(l)-parseFloat(C)>parseFloat(r)&&(i=1),j={organizationId:v,punchIn:x()().unix(),userId:N,status:i,createdBy:N,actualDate:x()().startOf("day").utc().format("x")},t.next=9,e(Object(d.c)(j));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),le=function(e){var t=e/1e3,s=parseInt(t/3600);t%=3600;var c=parseInt(t/60);return t%=60,"".concat(s," Hrs : ").concat(c," Mins")},je=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var s,a,n,i,r,l,o,u,b,O,m;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=x()(),a=x()(s,"DD/MM/YYYY HH:mm:ss").diff(x()(A,"DD/MM/YYYY HH:mm:ss")),n={organizationId:v,punchOut:x()().unix(),userId:N,id:S.id,updatedBy:N,totalHours:a},t.next=5,e(Object(d.d)(n));case 5:if(null===(i=JSON.parse(localStorage.getItem("currentTask")||null))){t.next=18;break}return r=x()(),l=x.a.unix(i.starttime).toDate(),o=x()().unix(),u=x.a.duration(r.diff(l)),b=u.asHours(),O=ce*b,m={updatedBy:N,id:i.id,taskId:i.taskid,totalhours:b,amount:O,hourlyRate:ce,userId:N,endTime:o},t.next=16,e(Object(j.h)(m));case 16:return t.next=18,localStorage.removeItem("currentTask");case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.useEffect)((function(){if(void 0!==A&&null!==A){var e=x()(),t=x()(e,"DD/MM/YYYY HH:mm:ss").diff(x()(A,"DD/MM/YYYY HH:mm:ss"));Q(le(t))}}),[A]),Object(b.useEffect)((function(){var e=JSON.parse(localStorage.getItem("loggedIn"));if(null===e)D(!1);else{D(!0),ee(e.punchout),I(e),R(x.a.unix(e.punchin).format("h:m a"));var t=x.a.unix(e.punchin).format("DD/MM/YYYY HH:mm:ss");G(t),e.punchout&&(D(!1),ee(x.a.unix(e.punchout).format("h:m a")))}}),[]),Object(b.useEffect)((function(){if(o&&o.data&&Object.keys(o.data).length>0){D(!0);var e=o.data;I(e),localStorage.setItem("loggedIn",JSON.stringify(e)),R(x.a.unix(e.punchin).format("h:m a")),G(x.a.unix(e.punchin).format("DD/MM/YYYY HH:mm:ss")),e.punchout&&(D(!1),ee(x.a.unix(e.punchout).format("h:m a"))),null===e.punchout&&setInterval((function(){!function(){if(void 0!==A&&null!==A){var e=x()(),t=x()(e,"DD/MM/YYYY HH:mm:ss").diff(x()(A,"DD/MM/YYYY HH:mm:ss"));Q(le(t))}}()}),1e3)}else localStorage.removeItem("loggedIn"),I(null),D(!1),ee(null),R(null),G(null)}),[o.data]),Object(b.useEffect)(Object(a.a)(Object(c.a)().mark((function t(){return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(d.b)({userId:N,actualDate:x()().startOf("day").utc().format("x")}));case 2:h.a.post("/organizationprefernces/getbusinesshours").then((function(e){H(e.data.organizationprefernces.officetime);var t=e.data.organizationprefernces.punchingrace>9?e.data.organizationprefernces.punchingrace/10:e.data.organizationprefernces.punchingrace/100;J(t)})).catch((function(){})),h.a.post("/organizationusers/getjobinfo",{id:N}).then((function(e){ae(e.data.organizationusers.hourlyrate||0)})).catch((function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)}))),[]),Object(p.jsx)(i.l,{className:"card-congratulations-medal",children:Object(p.jsxs)(i.m,{className:"flex",children:[Object(p.jsxs)(i.ib,{className:"d-flex justify-content-between",children:[Object(p.jsxs)(i.B,{children:[Object(p.jsxs)("h5",{children:["Welcome \ud83c\udf89 ",y.name,"!"]}),null!==_&&_.length>0&&(Y?Object(p.jsx)(i.i,{color:"danger",onClick:function(){return je()},children:"Punch Out"}):Object(p.jsx)(i.i,{color:"success",onClick:function(){return re()},children:"Punch In"})),(null===_||0===_.length)&&Object(p.jsx)(g.b,{I:"read",a:"setting",children:Object(p.jsx)("p",{className:"cursor-pointer text-primary",onClick:function(){return t("/account-settings")},children:"Click here to set Business Hours"})})]}),null!==_&&_.length>0&&Object(p.jsxs)(i.B,{className:"d-flex justify-content-between",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:null!==S&&Object(p.jsx)(i.f,{color:["","light-primary","light-success","light-danger"][S.status],children:["","Early","Regular","Late"][S.status]})})]})]}),Object(p.jsxs)(i.ib,{className:"mt-4",children:[Object(p.jsxs)(i.B,{className:"d-flex align-items-center",sm:12,lg:6,children:[Object(p.jsx)(u.a,{color:ne.color,icon:ne.icon,className:"me-2 p-1"}),Object(p.jsxs)(i.B,{children:[Object(p.jsx)("h6",{className:"fw-bolder mb-0",children:"Punch In"}),Object(p.jsx)(i.u,{className:"font-small-3 mb-0",children:null===L?"00:00:00":L})]})]}),Object(p.jsxs)(i.B,{className:"d-flex align-items-center",sm:12,lg:6,children:[Object(p.jsx)(u.a,{color:ie.color,icon:ie.icon,className:"me-2 p-1"}),Object(p.jsxs)(i.B,{children:[Object(p.jsx)("h6",{className:"fw-bolder mb-0",children:"Punch Out"}),Object(p.jsx)(i.u,{className:"font-small-3 mb-0",children:null===$?K:$})]})]})]})]})})}},706:function(e,t,s){"use strict";var c=s(14),a=s(34),n=s(1),i=s(4),r=s(22),l=s(7),j=s.n(l),o=s(855),u=s(528),d=s(5),b=s(96),O=s(2),m=s(10),x=s(39),h=s.n(x),f=s(145),g=s(140),p=s(13),v=s(16),N=Object(m.d)(),y=Object(m.a)(),k=[{status:1,title:"0",subtitle:"Assigned",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})},{status:2,title:"0",subtitle:"Inprogress",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})},{status:3,title:"0",subtitle:"Completed",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})},{status:6,title:"0",subtitle:"Pending Review",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})},{status:7,title:"0",subtitle:"Request Changes",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})},{status:8,title:"0",subtitle:"Overdue",color:"light-primary",icon:Object(v.jsx)(o.a,{size:24})}];t.a=function(e){var t=e.cols,s=Object(g.b)(),l=Object(p.f)(),o=Object(O.useState)([]),m=Object(r.a)(o,2),x=m[0],Y=m[1],D=function(){var e=Object(i.a)(Object(n.a)().mark((function e(t){var c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={status:t},e.next=3,s(Object(f.q)(c));case 3:l("/task/list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(O.useEffect)((function(){null!==y&&function(){var e={date:h()().startOf("day").utc().format("x"),userId:N,userType:y.organizationusersusertypeid};d.a.post("tasks/taskcountbystatus",e).then((function(e){k.forEach((function(t,s){var c=e.data.tasks.findIndex((function(e){return parseInt(e.taskstatus)===t.status}));c>-1&&(k[s].title=e.data.tasks[c].count)})),Y(k)})).catch((function(e){console.log(e)}))}()}),[]);return Object(v.jsxs)(b.l,{className:"card-statistics",children:[Object(v.jsx)(b.p,{children:Object(v.jsx)(b.v,{tag:"h4",children:"Statistics"})}),Object(v.jsx)(b.m,{className:"statistics-body",children:Object(v.jsx)(b.ib,{children:x.map((function(e,s){return Object(v.jsx)(b.B,Object(c.a)(Object(c.a)({},t),{},{className:j()(Object(a.a)({},"mb-2 ",s!==k.length-1)),children:Object(v.jsxs)("div",{className:"d-flex align-items-center cursor-pointer",onClick:function(){D([e.status])},children:[Object(v.jsx)(u.a,{color:e.color,icon:e.icon,className:"me-2"}),Object(v.jsxs)("div",{className:"my-auto",children:[Object(v.jsx)("h6",{className:"fw-bolder mb-0",children:e.title}),Object(v.jsx)(b.u,{className:"font-small-3 mb-0",children:e.subtitle})]})]})}),s)}))})})]})}},707:function(e,t,s){"use strict";var c=s(22),a=s(528),n=s(2),i=(s(553),s(5)),r=s(96),l=s(39),j=s.n(l),o=s(139),u=s(16);t.a=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),s=t[0],l=t[1];return Object(n.useEffect)((function(){i.a.post("/tasks/getcurrenttasks").then((function(e){l(e.data.users)})).catch((function(e){console.log(e)}))}),[]),Object(u.jsxs)(r.l,{className:"card-employee-task",children:[Object(u.jsx)(r.p,{children:Object(u.jsx)(r.v,{tag:"h4",children:"Live Task"})}),Object(u.jsx)(r.m,{children:s.map((function(e,t){var s,c;return Object(u.jsxs)("div",{className:"employee-task d-flex justify-content-between align-items-center",children:[Object(u.jsxs)("div",{className:"d-flex",children:[Object(u.jsx)(a.a,{initials:!0,color:"light-primary",className:"me-75",content:null===(s=e.username)||void 0===s?void 0:s.charAt(0).toUpperCase()}),Object(u.jsxs)("div",{className:"my-auto",children:[Object(u.jsx)("h6",{className:"mb-0",children:e.username}),null!==e.taskid&&Object(u.jsx)("small",{children:Object(u.jsx)(o.b,{to:"/tasks/view/".concat(e.taskid),children:e.servicename})})]})]}),Object(u.jsx)("div",{className:"d-flex align-items-center",children:Object(u.jsx)("small",{className:"text-muted me-75",children:(c=e.starttime,null===c?"-":j.a.unix(c).format("MMM DD hh:mm"))})})]},t)}))})]})}},713:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s(4),n=s(22),i=s(96),r=s(705),l=s(706),j=s(528),o=s(757),u=s(824),d=s(792),b=s(139),O=s(2),m=s(5),x=s(39),h=s.n(x),f=s(10),g=s(16),p=Object(f.d)(),v=Object(f.a)(),N=function(){var e=Object(O.useState)([]),t=Object(n.a)(e,2),s=t[0],c=t[1],a=h()().startOf("day").unix();Object(O.useEffect)((function(){null!==v&&m.a.post("/tasks/dashboardmytasklist",{userId:p,endDate:a,userType:v.organizationusersusertypeid}).then((function(e){c(e.data.tasks)})).catch((function(e){console.log(e)}))}),[]);return Object(g.jsxs)(i.l,{className:"card-transaction",children:[Object(g.jsx)(i.p,{children:Object(g.jsxs)(i.v,{tag:"h4",children:[Object(g.jsx)(u.a,{size:18}),"My Tasks"]})}),Object(g.jsxs)(i.m,{children:[s.length>0&&s.map((function(e,t){if(t<5)return Object(g.jsxs)("div",{className:"transaction-item",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(j.a,{className:"rounded",size:"sm",color:"light-primary",icon:Object(g.jsx)(o.a,{size:12})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h6",{className:"transaction-title",children:e.servicename}),Object(g.jsx)("small",{children:e.clientname})]})]}),Object(g.jsx)("div",{className:"fw-bolder text-success",children:(s=e.enddate,h.a.unix(s).format("MMM DD, YYYY"))})]},e.id);var s})),0===s.length&&Object(g.jsxs)(i.ib,{children:[Object(g.jsx)(d.a,{}),Object(g.jsx)("p",{className:"text-center mt-2",children:"You Dont have any tasks Today"})]}),s.length>4&&Object(g.jsx)(i.B,{tag:b.b,to:"/task/list",className:"cursor-pointer text-primary",children:"View More..."})]})]})},y=Object(f.d)(),k=Object(f.a)(),Y=function(){var e=h()().startOf("day").unix(),t=Object(O.useState)([]),s=Object(n.a)(t,2),c=s[0],a=s[1];Object(O.useEffect)((function(){null!==k&&m.a.post("/tasks/dashboardmytasklisttoday",{userId:y,endDate:e,userType:k.organizationusersusertypeid}).then((function(e){a(e.data.tasks)})).catch((function(e){console.log(e)}))}),[]);return Object(g.jsxs)(i.l,{className:"card-transaction",children:[Object(g.jsx)(i.p,{children:Object(g.jsxs)(i.v,{tag:"h4",children:[Object(g.jsx)(u.a,{size:18}),"My Task Dues Today "]})}),Object(g.jsxs)(i.m,{children:[c.length>0&&c.map((function(e,t){if(t<5)return Object(g.jsxs)("div",{className:"transaction-item",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(j.a,{className:"rounded",size:"sm",color:"light-primary",icon:Object(g.jsx)(o.a,{size:12})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h6",{className:"transaction-title",children:e.servicename}),Object(g.jsx)("small",{children:e.clientname})]})]}),Object(g.jsx)("div",{className:"fw-bolder text-success",children:(s=e.enddate,h.a.unix(s).format("MMM DD, YYYY"))})]},e.id);var s})),0===c.length&&Object(g.jsxs)(i.ib,{children:[Object(g.jsx)(d.a,{}),Object(g.jsx)("p",{className:"text-center mt-2",children:"You Dont have any tasks dues Today"})]}),c.length>4&&Object(g.jsx)(i.B,{tag:b.b,to:"/task/list",className:"cursor-pointer text-primary",children:"View More..."})]})]})},D=s(13),z=Object(f.d)(),M=Object(f.a)(),S=function(){var e=h()().startOf("day").unix(),t=function(e){var t=h()(),s="";return s=13===e.length?h()(e,"x"):h.a.unix(e),t.diff(s,"days")},s=Object(D.f)(),r=Object(O.useState)([]),l=Object(n.a)(r,2),b=l[0],x=l[1];Object(O.useEffect)((function(){null!==M&&m.a.post("/tasks/dashboardmytaskoverdues",{userId:z,endDate:e,userType:M.organizationusersusertypeid}).then((function(e){x(e.data.tasks)})).catch((function(e){console.log(e)}))}),[]);var f=function(){var e=Object(a.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={status:t},e.next=3,dispatch(updateStatusParams(a));case 3:s("/task/list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(i.l,{className:"card-transaction",children:[Object(g.jsx)(i.p,{children:Object(g.jsxs)(i.v,{tag:"h4",children:[Object(g.jsx)(u.a,{size:18}),"My OverDue Tasks"]})}),Object(g.jsxs)(i.m,{children:[b.length>0&&b.map((function(e,s){if(s<5)return Object(g.jsxs)("div",{className:"transaction-item",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(j.a,{className:"rounded",size:"sm",color:"light-primary",icon:Object(g.jsx)(o.a,{size:12})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h6",{className:"transaction-title",children:e.servicename}),Object(g.jsx)("small",{children:e.clientname})]})]}),Object(g.jsxs)("div",{className:"fw-bolder text-danger",children:[t(e.enddate)," Day's"]})]},e.id)})),0===b.length&&Object(g.jsxs)(i.ib,{children:[Object(g.jsx)(d.a,{}),Object(g.jsx)("p",{className:"text-center mt-2",children:"You Dont have any Overdue tasks."})]}),b.length>4&&Object(g.jsx)(i.B,{onClick:function(){f(item.status)},className:"cursor-pointer text-primary",children:"View More..."})]})]})},I=s(707),w=(s(633),s(1277),s(762)),B=s(730);t.default=function(){var e=Object(O.useState)({gmail_flag:!1,leave_flag:!1,drive_flag:!1,attendance_flag:!1,invoicesetting_flag:!1}),t=Object(n.a)(e,2),s=t[0],j=t[1],o=Object(O.useState)([]),u=Object(n.a)(o,2),d=u[0],x=u[1],f=function(){var e=h()().startOf("day").unix();m.a.post("/organizations/gettodayevents",{date:e}).then((function(e){x(e.data.events)})).catch((function(e){console.log(e)}))};return console.log(d),Object(O.useEffect)(Object(a.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void m.a.post("/organizationprefernces/getsettingsflag").then((function(e){j(e.data.result)})).catch((function(e){console.log(e)}));case 2:if(s.gmail_flag||s.leave_flag||s.drive_flag||s.attendance_flag||s.invoicesetting_flag){e.next=5;break}return e.next=5,f();case 5:case"end":return e.stop()}}),e)}))),[]),Object(g.jsxs)("div",{id:"dashboard-ecommerce",children:[Object(g.jsxs)(i.ib,{className:"match-height",children:[Object(g.jsxs)(i.B,{xl:"8",md:"6",xs:"12",children:[Object(g.jsxs)(i.ib,{children:[Object(g.jsx)(i.B,{children:Object(g.jsx)(r.a,{})}),(s.gmail_flag||s.leave_flag||s.drive_flag||s.attendance_flag||s.invoicesetting_flag)&&Object(g.jsx)(i.B,{children:Object(g.jsx)(i.l,{xl:"4",md:"6",xs:"12",children:Object(g.jsxs)(i.m,{children:[Object(g.jsx)(i.ib,{className:"mb-1",children:Object(g.jsxs)(i.B,{children:[s.gmail_flag?Object(g.jsx)(w.a,{className:"text-danger"}):Object(g.jsx)(B.a,{className:"text-success"}),Object(g.jsx)(b.b,{to:"/account-settings/integration",className:"ms-md-50",children:"Link gmail"})]})}),Object(g.jsx)(i.ib,{className:"mb-1",children:Object(g.jsxs)(i.B,{children:[s.drive_flag?Object(g.jsx)(w.a,{className:"text-danger"}):Object(g.jsx)(B.a,{className:"text-success"}),Object(g.jsx)(b.b,{to:"/account-settings/integration",className:"ms-md-50",children:"Link Google Drive for Storage"})]})}),Object(g.jsx)(i.ib,{className:"mb-1",children:Object(g.jsxs)(i.B,{children:[s.attendance_flag?Object(g.jsx)(w.a,{className:"text-danger"}):Object(g.jsx)(B.a,{className:"text-success"}),Object(g.jsx)(b.b,{to:"/account-settings/attendancesetting/businesshours",className:"ms-md-50",children:"Set Buiness Hours"})]})}),Object(g.jsx)(i.ib,{className:"mb-1",children:Object(g.jsxs)(i.B,{children:[s.leave_flag?Object(g.jsx)(w.a,{className:"text-danger"}):Object(g.jsx)(B.a,{className:"text-success"}),Object(g.jsx)(b.b,{to:"/account-settings/attendancesetting/leavesetting",className:"ms-md-50",children:"Enable Leave"})]})}),Object(g.jsx)(i.ib,{children:Object(g.jsxs)(i.B,{children:[s.invoicesetting_flag?Object(g.jsx)(w.a,{className:"text-danger"}):Object(g.jsx)(B.a,{className:"text-success"}),Object(g.jsx)(b.b,{to:"/account-settings/invoicesetting/invoiceaccount",className:"ms-md-50",children:"Invoice Settings"})]})})]})})}),!s.gmail_flag&&!s.leave_flag&&!s.drive_flag&&!s.attendance_flag&&!s.invoicesetting_flag&&Object(g.jsx)(i.B,{children:Object(g.jsx)(i.l,{xl:"4",md:"6",xs:"12",children:Object(g.jsx)(i.m,{children:Object(g.jsx)("h6",{children:" Today Highlights"})})})})]}),Object(g.jsx)(l.a,{cols:{xl:"3",sm:"6"}})]}),Object(g.jsx)(i.B,{xl:"4",md:"6",xs:"12",children:Object(g.jsx)(I.a,{})})]}),Object(g.jsxs)(i.ib,{className:"match-height",children:[Object(g.jsx)(i.B,{xl:"4",md:"6",xs:"12",children:Object(g.jsx)(N,{})}),Object(g.jsx)(i.B,{xl:"4",md:"6",xs:"12",children:Object(g.jsx)(Y,{cols:{xl:"2",sm:"6"}})}),Object(g.jsx)(i.B,{xl:"4",md:"6",xs:"12",children:Object(g.jsx)(S,{cols:{xl:"2",sm:"6"}})})]})]})}}}]);
//# sourceMappingURL=9.ede3f178.chunk.js.map