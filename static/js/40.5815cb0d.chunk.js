(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[40],{1467:function(e,t,a){"use strict";a.r(t);a(144);var n=a(143),c=a(1),r=a(4),i=a(14),s=a(8),o=a(22),l=a(2),u=a(13),d=a(140),b=a(7),j=a.n(b),f=a(5),m=a(544),p=a.n(m),v=a(830),O=a(718),x=(a(555),a(535)),g=a(532),h=a(538),I=a(539),k=a(594),N=a(153),y=a(97),w=a(525),C=a(526),S=(a(536),a(534),a(529),a(533),a(10)),A=a(141),T=a(574),F=a(39),z=a.n(F),P=a(16),B=Object(S.b)(),D=Object(S.a)(),_=Object(S.d)(),q=function(){var e,t,a,b,m,S,F,q,V=Object(l.useState)(!1),R=Object(o.a)(V,2),L=R[0],E=R[1],G=function(){return Object(P.jsx)(l.Fragment,{children:Object(P.jsx)(C.a,{})})},J={multiValue:function(e,t){return Object(s.a)(t),Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"#7367f0"})}},K=Object(l.useRef)(null),Y=Object(u.f)(),M=Object(l.useState)(!1),U=(Object(o.a)(M,1)[0],h.d().shape({createdBy:h.f().default(_),clientId:h.f().required("Please select a Client"),serviceId:h.f().required("Please select a Service"),assignee:h.a().min(1,"Please select Assignee"),reviewer:h.a(),clientAccessFlag:h.b().default(!1),organizationId:h.f().default(B),taskStatus:h.c().default(1),invoiceId:h.f().default(0),startDate:h.f().required("Please Select Start Date"),endDate:h.f().required("Please Select End Date"),priority:h.f().required("Please select a Priority"),invoiceFlag:h.b().default(!1),recurringFlag:h.b().default(!0),duration:h.c().required(),invoiceItems:h.a().of(h.d().shape({serviceId:h.f().nullable("Please Select Service Item"),invoiceId:h.f(),sacCode:h.f(),price:h.f(),organizationId:h.f().default(B),exemptioReasonId:h.f(),actualPrice:h.f().nullable(),taxGroupId:h.f().nullable("Pleace Select Tax"),subTotalAmount:h.f().nullable("Subtotal Should be Greater than 0"),isTaxApplicable:h.b().default(!0),taxes:h.f()})).when("invoiceFlag",{is:function(e){return!0===e},then:h.a().min(1,"Require Atleast one Item when Proposal For this Task.")})})),H=Object(A.c)((function(e){return e.task})),W=Object(A.c)((function(e){return e.invoice})),Z=Object(g.f)({resolver:Object(I.a)(U),defaultValues:U.cast()}),Q=Z.handleSubmit,X=Z.formState.errors,$=Z.control,ee=Z.setValue,te=[{id:1,name:"Low"},{id:2,name:"Medium"},{id:3,name:"High"}],ae=[{id:1,name:"Monthly"},{id:2,name:"Yearly"}],ne=Object(l.useState)([]),ce=Object(o.a)(ne,2),re=ce[0],ie=ce[1],se=Object(l.useState)([]),oe=Object(o.a)(se,2),le=oe[0],ue=oe[1],de=Object(A.b)(),be=Object(l.useState)([]),je=Object(o.a)(be,2),fe=je[0],me=je[1],pe=Object(l.useState)([]),ve=Object(o.a)(pe,2),Oe=ve[0],xe=ve[1],ge=Object(l.useState)([]),he=Object(o.a)(ge,2),Ie=he[0],ke=he[1],Ne=Object(l.useState)([]),ye=Object(o.a)(Ne,2),we=ye[0],Ce=ye[1],Se=Object(l.useState)([]),Ae=Object(o.a)(Se,2),Te=Ae[0],Fe=Ae[1],ze=Object(l.useState)(!1),Pe=Object(o.a)(ze,2),Be=Pe[0],De=Pe[1],_e=Object(l.useState)([]),qe=Object(o.a)(_e,2),Ve=qe[0],Re=qe[1],Le=Object(l.useState)([]),Ee=Object(o.a)(Le,2),Ge=Ee[0],Je=Ee[1],Ke=Object(l.useState)({}),Ye=Object(o.a)(Ke,2),Me=Ye[0],Ue=Ye[1],He=Object(l.useState)({}),We=Object(o.a)(He,2),Ze=We[0],Qe=We[1],Xe=Object(l.useState)([]),$e=Object(o.a)(Xe,2),et=$e[0],tt=$e[1],at=Object(l.useState)([]),nt=Object(o.a)(at,2),ct=nt[0],rt=nt[1],it=Object(l.useState)(0),st=Object(o.a)(it,2),ot=st[0],lt=st[1],ut=Object(l.useState)(0),dt=Object(o.a)(ut,2),bt=dt[0],jt=dt[1],ft=Object(l.useState)(0),mt=Object(o.a)(ft,2),pt=mt[0],vt=mt[1],Ot=Object(g.e)({name:"invoiceItems",keyName:"rowid",control:$}),xt=Ot.fields,gt=Ot.append,ht=Ot.remove,It=Object(l.useState)(""),kt=Object(o.a)(It,2),Nt=kt[0],yt=kt[1];Object(l.useEffect)(Object(r.a)(Object(c.a)().mark((function e(){var t,a,n,r,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===H.taskId){e.next=19;break}return t=Ge.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{taskId:H.taskId})})),e.next=4,de(Object(k.c)({rows:t}));case 4:if(""===Nt){e.next=8;break}return a={comment:Nt,taskId:H.taskId,createdBy:_,organizationId:B,attachmentIds:[],isDefault:!0},e.next=8,de(Object(k.a)(a));case 8:return n={taskId:H.taskId,serviceId:$._formValues.serviceId,organizationId:B,createdBy:_},e.next=11,de(Object(k.d)(n));case 11:if(!Be){e.next=17;break}return r=Object(i.a)(Object(i.a)({},Ze),{},{calculateTaxes:JSON.stringify(et),totalTaxAmount:String(pt),dueAmount:String(ot),totalAmount:String(ot),subTotalAmount:String(bt)}),e.next=15,de(Object(N.a)(r));case 15:e.next=19;break;case 17:s=H.taskId,Y("/recurring-task/view/".concat(s));case 19:case"end":return e.stop()}}),e)}))),[H.taskId]),Object(l.useEffect)(Object(r.a)(Object(c.a)().mark((function e(){var t,a,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Be){e.next=10;break}if(null===W.invoiceId){e.next=10;break}return t=ct.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{invoiceId:W.invoiceId})})),e.next=5,de(Object(N.b)(t));case 5:return a=W.invoiceId,n=H.taskId,e.next=9,de(Object(k.k)({updatedBy:_,id:n,invoiceId:a}));case 9:Y("/recurring-task/view/".concat(n));case 10:case"end":return e.stop()}}),e)}))),[W.invoiceId]);var wt=function(e,t){return{organizationId:B,userId:e,type:t,createdBy:_}},Ct=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),a=t.invoiceItems,rt((function(e){return[].concat(Object(n.a)(e),Object(n.a)(a))})),r=[],t.assignee.forEach((function(e){r.push(wt(e,1))})),void 0!==t.reviewer&&t.reviewer.forEach((function(e){r.push(wt(e,2))})),Je(r),delete t.invoiceItems,delete t.assignee,delete t.reviewer,e.next=12,de(Object(k.b)(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=function(){var e=Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.post("/organizationusers/dropdown").then((function(e){var t=e.data;ue(t.organizationusers),ie(t.organizationusers),ke(t.organizationusers)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),At=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(Object(k.g)(t));case 2:a=e.sent,Ue(a.payload);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt=function(){gt({invoiceId:0,organizationId:B,serviceId:"",sacCode:"",actualPrice:0,taxGroupId:"",subTotalAmount:0,taxPrice:0,description:"",isTaxApplicable:!1})};Object(l.useEffect)((function(){if(Object.keys(Me).length>0){var e={};e.billingAddressCity=Me.billingaddresscity,e.billingAddressLine1=Me.billingaddressline1||"",e.billingAddressLine2=Me.billingaddressline2||"",e.billingAddressState=Me.billingaddressstatesname||"",e.billingAddressZipCode=Me.billingaddresszip,e.billingCurrencyId=Me.currencyid||D.currencyid,e.billingCurrencySymbol=Me.currenciessymbol,e.billingCurrencyShortName=Me.currenciescode,e.billingCurrencyName=Me.currenciesname,e.bankAccountBankName="",e.bankAccountBranchName="",e.bankAccountHolderName="",e.bankAccountId="",e.bankAccountIfscCode="",e.bankAccountNumber="",e.contactEmail=Me.email,e.gstin=Me.gstin,e.isRcmApplicable=!1,e.contactName=Me.name,e.placeOfSupplyId=Me.placeofsupplyid,e.contactId=Me.id,e.organizationAddressLine1=D.addressline1,e.organizationAddressLine2=D.addressline2,e.organizationCity=D.organizationcity,e.organizationState=D.statename,e.organizationZipCode=D.pinzipcode,e.organizationName=D.name,e.organizationImageUrl=D.organizationimageid,e.organizationStateCode=D.stateshortname,e.organizationGstin=D.gstin,e.createdBy=_,e.invoiceDate=z()().startOf("day").format("x"),e.organizationId=B,e.note="",e.paymentStatus=5,e.status=4,e.paymentDue=z()().startOf("day").format("x"),Qe(e);var t=1;D.stateid===Me.placeofsupplyid&&(t=2),function(e){var t={type:e};f.a.post("/taxvalues/list",t).then((function(e){var t=e.data;Re(t.taxvalues)}))}(t)}}),[Me]);var Ft=function(){var e=$._formValues.invoiceItems,t=0,a=0,n=0;e.forEach((function(e){t=parseFloat(e.subTotalAmount)+parseFloat(t),a=parseFloat(e.price)+parseFloat(a),n=parseFloat(n)+parseFloat(e.taxPrice)})),lt(t),jt(a),vt(n),function(){var e;e=$._formValues.invoiceItems.map((function(e){return Object(T.b)(e.taxes)})).flat().reduce((function(e,t){if(void 0!==t){var a=e.find((function(e){return t.taxName===e.taxName}));a?a.taxAmount=parseFloat(a.taxAmount)+parseFloat(t.taxAmount):e.push(Object.assign({},t))}return e}),[]),tt(e)}()},zt=function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=$._formValues.invoiceItems[e]||{};if(void 0===o.serviceId||""===o.serviceId)return!1;var l=Oe.find((function(e){return e.id===o.serviceId}));ee("invoiceItems[".concat(e,"].serviceId"),o.serviceId),s?(ee("invoiceItems[".concat(e,"].sacCode"),l.saccode),t=l.sellingprice||0,a=l.taxgroupid,ee("invoiceItems[".concat(e,"].actualPrice"),t),ee("invoiceItems[".concat(e,"].price"),String(l.sellingprice)||0),ee("invoiceItems[".concat(e,"].taxGroupId"),a),ee("invoiceItems[".concat(e,"].description"),l.description),ee("invoiceItems[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||"")):(ee("invoiceItems[".concat(e,"].sacCode"),r?o.sacCode:l.saccode),t=c?o.price:l.sellingprice||0,a=i?o.taxGroupId:l.taxgroupid,ee("invoiceItems[".concat(e,"].price"),t),ee("invoiceItems[".concat(e,"].actualPrice"),String(l.sellingprice)||0),ee("invoiceItems[".concat(e,"].taxGroupId"),a),ee("invoiceItems[".concat(e,"].description"),n?o.description:l.description),ee("invoiceItems[".concat(e,"].exemptionReasonId"),l.exemptionreasonid||""));var u=0,d=[],b=Te.find((function(e){return e.id===a})),j=void 0!==b?!b.nontaxableflag:l.istaxapplicable||!1;ee("invoiceItems[".concat(e,"].isTaxApplicable"),j),j&&void 0!==b&&Ve.forEach((function(e){if(e.taxid===a){var n;n=Object(T.a)(t,e.percentage,2),u=parseFloat(u)+parseFloat(n);var c={};c.taxName="".concat(e.name," (").concat(e.percentage,"%)"),c.taxId=parseInt(e.id),c.taxNameValue=e.name,c.taxPercentage=String(e.percentage),c.taxAmount=String(n),d.push(c)}})),ee("invoiceItems[".concat(e,"].subTotalAmount"),parseFloat(parseFloat(u||0)+parseFloat(t||0)).toFixed(2)),ee("invoiceItems[".concat(e,"].taxPrice"),parseFloat(u).toFixed(2)),ee("invoiceItems[".concat(e,"].taxes"),JSON.stringify(d)),ee("invoiceItems[".concat(e,"].createdBy"),_),Ft()};Object(l.useEffect)((function(){f.a.post("/clients/dropdown",{status:1}).then((function(e){var t=e.data;me(t.clients)})),f.a.post("/services/dropdown",{status:1}).then((function(e){var t=e.data;xe(t.services)})),f.a.post("/taxgroups/dropdown").then((function(e){var t=e.data;Fe(t.taxgroups)})),f.a.post("/exemptionreasons/dropdown").then((function(e){var t=e.data;Ce(t.exemptionreasons)})),St()}),[]);var Pt=function(e){var t,a=Array.isArray(e)?e.map((function(e){return e.id})):[];t=a.length>0?Ie.filter((function(e){var t=e.id;return!a.some((function(e){return e===t}))})):Ie,ue(t),ee("assignee",a)},Bt=function(e){var t,a=Array.isArray(e)?e.map((function(e){return e.id})):[];t=a.length>0?Ie.filter((function(e){var t=e.id;return!a.some((function(e){return e===t}))})):Ie,ie(t),ee("reviewer",a)};return Object(P.jsx)(w.a,{blocking:L,loader:Object(P.jsx)(G,{}),children:Object(P.jsxs)("form",{onSubmit:Q(Ct),children:[Object(P.jsxs)(y.l,{className:"invoice-preview-card",children:[Object.keys(X).map((function(e,t){var a;return Object(P.jsxs)(y.I,{children:[" ",null===(a=X[e])||void 0===a?void 0:a.message]},t)})),Object(P.jsx)(y.p,{children:"Add Task"}),Object(P.jsx)(y.m,{className:"pb-2 px-2",children:Object(P.jsxs)(y.ib,{children:[Object(P.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"clientId",children:"Client"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"clientId",id:"clientId",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:n,className:j()("react-select",{"is-invalid":X.clientId})},t),{},{classNamePrefix:"select",options:fe,value:fe.find((function(e){return e.id===a})),onChange:function(e){t.onChange(e.id),At(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),X.clientId&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(e=X.clientId)||void 0===e?void 0:e.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"serviceId",children:"Service"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"serviceId",id:"serviceId",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:n,className:j()("react-select",{"is-invalid":X.serviceId})},t),{},{classNamePrefix:"select",options:Oe,value:Oe.find((function(e){return e.id===a})),onChange:function(e){var a;return a=e.id,0===$._formValues.invoiceItems.length&&Tt(),ee("invoiceItems[0].serviceId",a),zt(0,!1,!1,!1,!1,!0),t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),X.serviceId&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(t=X.serviceId)||void 0===t?void 0:t.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{id:"description",name:"description",control:$,render:function(e){var t=e.field;return Object(P.jsx)(y.K,Object(i.a)({type:"textarea",onInput:function(e){yt(e.target.value)},invalid:X.description&&!0},t))}}),X.description&&Object(P.jsx)(y.I,{children:X.description.message})]})]}),Object(P.jsx)(y.ib,{className:"my-2",children:Object(P.jsx)(y.B,{children:Object(P.jsxs)("div",{className:"d-lg-flex",children:[Object(P.jsx)("input",{type:"file",className:"hidden",multiple:!0,onChange:function(e){console.log(e.target.files)},ref:K}),Object(P.jsxs)(y.i,{type:"button",outline:!0,color:"primary",onClick:function(){return K.current.click()},children:[Object(P.jsx)(v.a,{size:14,className:"me-25"})," Add Attachment"]})]})})})]}),Object(P.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"assignee",children:"Assignee"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"assignee",id:"assignee",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)({inputRef:n,className:j()("react-select",{"is-invalid":X.assignee})},t),{},{classNamePrefix:"select",options:re,isMulti:!0,value:a,onChange:Pt,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:J}))}}),X.assignee&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(a=X.assignee)||void 0===a?void 0:a.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"reviewer",id:"reviewer",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)({inputRef:n,className:j()("react-select",{"is-invalid":X.reviewer})},t),{},{classNamePrefix:"select",options:le,isMulti:!0,value:a,onChange:Bt,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},styles:J}))}}),X.reviewer&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(b=X.reviewer)||void 0===b?void 0:b.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"priority",children:"Priority"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"priority",id:"priority",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:n,className:j()("react-select",{"is-invalid":X.priority})},t),{},{classNamePrefix:"select",options:te,value:te.find((function(e){return e.id===a})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),X.priority&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(m=X.priority)||void 0===m?void 0:m.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"duration",children:"Duration"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{control:$,name:"duration",id:"duration",render:function(e){var t=e.field,a=e.value,n=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)(Object(i.a)({},t),{},{inputRef:n,className:j()("react-select",{"is-invalid":X.duration})},t),{},{classNamePrefix:"select",options:ae,value:ae.find((function(e){return e.id===a})),onChange:function(e){return t.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),X.duration&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(S=X.duration)||void 0===S?void 0:S.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"startDate",children:"Start Date"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{name:"startDate",control:$,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(P.jsx)(p.a,{value:t.value,onChange:function(e,a){t.onChange(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:j()("due-date-picker",{"flatpickr-input is-invalid":X.startDate})})}}),X.startDate&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(F=X.startDate)||void 0===F?void 0:F.message})]})]}),Object(P.jsxs)(y.ib,{className:"mb-1",children:[Object(P.jsx)(y.N,{sm:"3",size:"lg",className:"form-label required",for:"endDate",children:"End Date"}),Object(P.jsxs)(y.B,{sm:"9",children:[Object(P.jsx)(g.a,{onChange:function(e){return setDate(e)},name:"endDate",control:$,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var t=e.field;return Object(P.jsx)(p.a,{value:t.value,onChange:function(e,a){t.onChange(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"U"},className:j()("due-date-picker",{"flatpickr-input is-invalid":X.endDate})})}}),X.endDate&&Object(P.jsx)(y.I,{className:"text-danger",children:null===(q=X.endDate)||void 0===q?void 0:q.message})]})]})]})]})}),Object(P.jsx)("hr",{className:"invoice-spacing"}),Object(P.jsx)(y.ib,{className:"px-1 pb-2",children:Object(P.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(P.jsx)(g.a,{control:$,name:"invoiceFlag",rules:{required:!0},render:function(e){var t=e.field;return Object(P.jsx)(y.K,Object(i.a)(Object(i.a)({className:"form-check-input",type:"checkbox",id:"invoice_flag"},t),{},{onChange:function(e){t.onChange(e),De(!Be),Be?ht():0===$._formValues.invoiceItems.length&&Tt()}}))}}),Object(P.jsx)(y.N,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})}),Be&&Object(P.jsxs)(y.m,{className:"invoice-padding invoice-product-details",children:[xt.map((function(e,t){var a,n,c,r,s,o,l,u,d,b,f,m,p,v,h,I;return Object(P.jsx)("div",{className:"repeater-wrapper",children:Object(P.jsx)(y.ib,{children:Object(P.jsxs)(y.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(P.jsxs)(y.ib,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(P.jsxs)(y.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-4 col-sm-12",children:[Object(P.jsx)(y.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(P.jsx)(g.a,{control:$,name:"invoiceItems[".concat(t,"].serviceId"),rules:{required:!0},render:function(e){var a,n,c=e.field,r=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:r,className:j()("react-select",{"is-invalid":null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.serviceId}),classNamePrefix:"select",options:Oe,value:Oe.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),zt(t,!1,!1,!1,!1,!0)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.serviceId)&&Object(P.jsx)(y.I,{children:null===(c=X.invoiceItems)||void 0===c||null===(r=c[t])||void 0===r?void 0:r.serviceId.message}),Object(P.jsx)(g.a,{id:"invoiceItems_".concat(t,"_description"),name:"invoiceItems[".concat(t,"].description"),control:$,render:function(e){var a,n,c=e.field;return Object(P.jsx)(y.K,Object(i.a)({className:"mt-1",invalid:(null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.description)&&!0,onInput:function(e){c.onChange(e),zt(t,!0,!1,!1,!1,!1)}},c))}})]}),Object(P.jsxs)(y.B,{className:"my-lg-0 my-2 col-lg-2 col-sm-12",children:[Object(P.jsx)(y.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(P.jsx)(g.a,{id:"invoiceItems_".concat(t,"_sacCode"),name:"invoiceItems[".concat(t,"].sacCode"),control:$,render:function(e){var a,n,c=e.field;return Object(P.jsx)(y.K,Object(i.a)({type:"text",invalid:(null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.sacCode)&&!0,onInput:function(e){c.onChange(e),zt(t,!1,!0,!0,!1,!1)}},c))}}),(null===(s=X.invoiceItems)||void 0===s||null===(o=s[t])||void 0===o?void 0:o.sacCode)&&Object(P.jsx)(y.I,{children:null===(l=X.invoiceItems)||void 0===l||null===(u=l[t])||void 0===u?void 0:u.sacCode.message})]}),Object(P.jsxs)(y.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(P.jsx)(y.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(P.jsx)(g.a,{id:"invoiceItems_".concat(t,"_price"),name:"invoiceItems[".concat(t,"].price"),control:$,render:function(e){var a,n,c=e.field;return Object(P.jsx)(y.K,Object(i.a)(Object(i.a)({type:"number",id:"input_invoiceItems_".concat(t,"_price"),onInput:function(e){c.onChange(e),console.log(e),zt(t,!1,!0,!1,!1,!1)}},c),{},{invalid:(null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.price)&&!0}))}}),(null===(d=X.invoiceItems)||void 0===d||null===(b=d[t])||void 0===b?void 0:b.price)&&Object(P.jsx)(y.I,{children:null===(f=X.invoiceItems)||void 0===f||null===(m=f[t])||void 0===m?void 0:m.price.message})]}),Object(P.jsxs)(y.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(P.jsx)(y.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(P.jsx)(g.a,{control:$,name:"invoiceItems[".concat(t,"].taxGroupId"),rules:{required:!0},render:function(e){var a,n,c=e.field,r=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:r,className:j()("react-select",{"is-invalid":null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.taxGroupId}),classNamePrefix:"select",options:Te,value:Te.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id),zt(t,!1,!0,!1,!0,!1)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),(null===(p=X.invoiceItems)||void 0===p||null===(v=p[t])||void 0===v?void 0:v.taxGroupId)&&Object(P.jsx)(y.I,{children:null===(h=X.invoiceItems)||void 0===h||null===(I=h[t])||void 0===I?void 0:I.taxGroupId.message}),!e.isTaxApplicable&&Object(P.jsx)(g.a,{control:$,name:"invoiceItems[".concat(t,"].exemptionReasonId"),rules:{required:!0},render:function(e){var a,n,c=e.field,r=e.ref;return Object(P.jsx)(x.a,Object(i.a)(Object(i.a)({},c),{},{inputRef:r,className:j()("react-select mt-1",{"is-invalid":null===(a=X.invoiceItems)||void 0===a||null===(n=a[t])||void 0===n?void 0:n.taxGroupId}),classNamePrefix:"select",options:we,value:we.find((function(e){return e.id===c.value})),onChange:function(e){c.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}})]}),Object(P.jsxs)(y.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(P.jsx)(y.u,{className:"col-title mb-md-50 mb-0",children:"Amount"}),$._formValues.invoiceItems[t].subTotalAmount]})]}),Object(P.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(P.jsx)(O.a,{size:18,className:"cursor-pointer",onClick:function(){ht(t),Ft()}})})]})})},e.rowid)})),Object(P.jsx)(y.ib,{className:"mt-1",children:Object(P.jsx)(y.B,{sm:"12",className:"px-0",children:Object(P.jsxs)(y.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return Tt()},children:[Object(P.jsx)(v.a,{size:14,className:"me-25"})," ",Object(P.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(P.jsx)(y.l,{children:Object(P.jsx)(y.m,{children:Object(P.jsxs)("div",{className:"modal-footer border-0",children:[Object(P.jsx)(y.i,{className:"add-new-user",outline:!0,color:"warning",tag:d.b,to:"/recurring-task/list",children:"Cancel"}),Object(P.jsx)(y.i,{color:"primary",type:"submit",children:"Save"})]})})})]})})};t.default=function(){return Object(P.jsx)("div",{className:"invoice-add-wrapper",children:Object(P.jsx)(y.ib,{className:"invoice-add",children:Object(P.jsx)(y.B,{xl:12,md:12,sm:12,children:Object(P.jsx)(q,{})})})})}},525:function(e,t,a){"use strict";var n=a(14),c=a(34),r=a(2),i=a(7),s=a.n(i),o=a(97),l=(a(528),a(16)),u=function(e){var t,a=e.children,i=e.blocking,o=e.loader,u=e.className,d=e.tag,b=e.overlayColor,j=d;return Object(l.jsxs)(j,{className:s()("ui-loader",(t={},Object(c.a)(t,u,u),Object(c.a)(t,"show",i),t)),children:[a,i?Object(l.jsxs)(r.Fragment,{children:[Object(l.jsx)("div",Object(n.a)({className:"overlay"},i&&b?{style:{backgroundColor:b}}:{})),Object(l.jsx)("div",{className:"loader",children:o})]}):null]})};t.a=u,u.defaultProps={tag:"div",blocking:!1,loader:Object(l.jsx)(o.jb,{color:"primary"})}},526:function(e,t,a){"use strict";var n=a(16);t.a=function(){return Object(n.jsx)("div",{className:"fallback-spinner",children:Object(n.jsxs)("div",{className:"loading",children:[Object(n.jsx)("div",{className:"effect-1 effects"}),Object(n.jsx)("div",{className:"effect-2 effects"}),Object(n.jsx)("div",{className:"effect-3 effects"})]})})}},528:function(e,t,a){},529:function(e,t,a){},533:function(e,t,a){},536:function(e,t,a){},574:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n=function(e,t,a){var n=0;return 1===a?n=parseFloat(e)-parseFloat(e)*(100/(100+parseFloat(t))):2===a&&(n=parseFloat(e)*parseFloat(t)/100),parseFloat(n)},c=function(e){return JSON.parse(e.replace(/\\/g,""))}},594:function(e,t,a){"use strict";a.d(t,"h",(function(){return b})),a.d(t,"g",(function(){return j})),a.d(t,"i",(function(){return f})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"k",(function(){return v})),a.d(t,"l",(function(){return O})),a.d(t,"e",(function(){return x})),a.d(t,"a",(function(){return g})),a.d(t,"j",(function(){return h})),a.d(t,"d",(function(){return I})),a.d(t,"f",(function(){return k}));var n=a(8),c=a(1),r=a(4),i=a(3),s=a(26),o=a(18),l=a(5),u=a(10),d=Object(u.d)(),b=Object(i.b)("appTasks/getData",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/tasks/list",t);case 2:return a=e.sent,e.abrupt("return",{params:t,data:a.data.tasks.tasks,totalPages:a.data.tasks.total});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(i.b)("appTasks/getClient",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/clients/get",{id:t});case 2:return a=e.sent,e.abrupt("return",a.data.clients);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(i.b)("appTasks/getTask",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/tasks/recurringtaskget",{id:t});case 2:return a=e.sent,e.abrupt("return",a.data.task);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=Object(i.b)("appTasks/addTask",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/tasks/create",t);case 3:return r=e.sent,e.abrupt("return",r.data.task);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),p=Object(i.b)("appTasks/addTaskParticipants",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/taskparticpants/create",t);case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),v=(Object(i.b)("appTasks/addTaskWorkflow",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/recurring-taskworkflows/create",t);case 3:return e.abrupt("return",[]);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(i.b)("appTasks/updateInvocieId",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/tasks/updateinvocieid",t);case 3:return e.abrupt("return",response.data.task);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),O=Object(i.b)("appTasks/updateTask",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/tasks/update",t);case 3:return r=e.sent,e.abrupt("return",r.data.task);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),x=Object(i.b)("appTasks/deleteTask",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var n,r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.getState,e.next=3,l.a.post("/tasks/delete",{id:t,updatedBy:d});case 3:return e.next=5,n(b(r().tasks.params));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),g=Object(i.b)("appTasks/addDescription",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/taskconversations/create",t);case 3:return r=e.sent,e.abrupt("return",r.data.taskconversations);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),h=Object(i.b)("appTasks/addDescription",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/taskconversations/update",t);case 3:return r=e.sent,e.abrupt("return",r.data.taskconversations);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),I=Object(i.b)("appTasks/cloneWorkFlows",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t,a){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(n.a)(a),e.next=3,l.a.post("/taskworkflows/clone",t);case 3:return r=e.sent,e.abrupt("return",r.data.taskworkflows);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),k=Object(i.b)("appTasks/exportTask",function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a,n,r,i,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.post("/tasks/exportToExcel",t);case 2:a=e.sent,n=o.utils.json_to_sheet(a.data.tasks),r={Sheets:{data:n},SheetNames:["data"]},i=o.write(r,{bookType:"xlsx",type:"array"}),u=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),s.saveAs(u,"recurring_task.xlsx");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(i.c)({name:"appTasks",initialState:{data:[],total:1,params:{},allData:[],selectedTask:null,taskId:null,editflag:!0},reducers:{},extraReducers:function(e){e.addCase(b.fulfilled,(function(e,t){e.data=t.payload.data,e.params=t.payload.params,e.total=t.payload.totalPages,e.selectedTask=null})).addCase(f.fulfilled,(function(e,t){e.selectedTask=t.payload,e.taskId=null})).addCase(m.fulfilled,(function(e,t){e.taskId=t.payload})).addCase(O.fulfilled,(function(e,t){e.taskId=t.payload}))}}).reducer}}]);
//# sourceMappingURL=40.5815cb0d.chunk.js.map