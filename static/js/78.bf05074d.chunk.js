(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[78],{1666:function(e,i,s){"use strict";s.r(i);var c=s(15),t=(s(133),s(16)),a=s(1),n=s(131),l=s(3),r=s.n(l),d=s(6),o=s.n(d),j=s(500),m=s.n(j),u=s(812),b=s(805),v=(s(579),s(492)),x=s(489),O=s(514),f=s(515),h=s(90),g=(s(502),s(493),s(490),s(495),s(10)),p=function(){var e,i,s,l,d,j,p,N=Object(a.useRef)(null),_=Object(a.useState)(!1),y=(Object(t.a)(_,1)[0],Object(a.useState)("")),C=Object(t.a)(y,2),S=C[0],P=C[1],w=O.e().shape({client_id:O.g().required("Please select a Client"),service_id:O.g().required("Please select a Service"),assignee:O.a().min(1,"Please select Assignee"),start_date:O.c().nullable().required("Please Select Start Date"),end_date:O.c().nullable().required("Please Select End Date"),priority:O.g().required("Please select a Priority"),invoice_items:O.a().of(O.e().shape({item_id:O.g().required("Please Select Service"),sac_code:O.g(),price:O.d().min(1).positive("Must be more than 0").required(),tax_group_id:O.g().required("Pleace Select Tax")}))}),B=Object(x.f)({resolver:Object(f.a)(w),defaultValues:{client_id:"",service_id:"",description:"",assignee:[],reviewer:[],start_date:null,end_date:null,priority:"",invoice_items:[]}}),k=B.register,I=B.handleSubmit,q=B.formState.errors,z=B.control,A=B.setValue,R=Object(a.useState)([]),F=Object(t.a)(R,2),D=F[0],E=F[1],K=Object(a.useState)([]),T=Object(t.a)(K,2),Y=T[0],M=T[1],J=Object(a.useState)([]),V=Object(t.a)(J,2),G=V[0],H=V[1],L=Object(a.useState)([]),Q=Object(t.a)(L,2),U=Q[0],W=Q[1],X=Object(a.useState)([]),Z=Object(t.a)(X,2),$=Z[0],ee=Z[1],ie=Object(a.useState)(!0),se=Object(t.a)(ie,2),ce=se[0],te=se[1],ae=Object(x.e)({name:"invoice_items",control:z}),ne=ae.fields,le=ae.append,re=ae.remove,de=function(){le({item_id:"",sac_code:"",price:0,tax_group_id:"",subTotal:0,taxPrice:0})};Object(a.useEffect)((function(){o.a.get("/api/task/utilities").then((function(e){var i=e.data;E(i.clients),M(i.services),H(i.priority),W(i.users),ee(i.tax_group)}))}),[]),Object(a.useEffect)((function(){de()}),[]);var oe=function(e){var i=Array.isArray(e)?e.map((function(e){return e.value})):[];A("assignee",i)},je=function(e){var i=Array.isArray(e)?e.map((function(e){return e.value})):[];A("reviewer",i)};return Object(g.jsxs)("form",{onSubmit:I((function(e){return console.log(e)})),children:[Object(g.jsxs)(h.l,{className:"invoice-preview-card",children:[Object(g.jsx)(h.m,{className:"pb-2 px-2",children:Object(g.jsxs)(h.ib,{children:[Object(g.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"client_id",children:"Client"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{control:z,name:"client_id",id:"client_id",render:function(e){var i=e.field,s=e.value,t=e.ref;return Object(g.jsx)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({},i),{},{inputRef:t,className:r()("react-select",{"is-invalid":q.client_id})},i),{},{classNamePrefix:"select",options:D,value:D.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.client_id&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(e=q.client_id)||void 0===e?void 0:e.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"service_id",children:"Service"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{control:z,name:"service_id",id:"service_id",render:function(e){var i=e.field,s=e.value,t=e.ref;return Object(g.jsx)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({},i),{},{inputRef:t,className:r()("react-select",{"is-invalid":q.service_id})},i),{},{classNamePrefix:"select",options:Y,value:Y.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.service_id&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(i=q.service_id)||void 0===i?void 0:i.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"description",children:"Description"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{id:"description",name:"description",control:z,render:function(e){var i=e.field;return Object(g.jsx)(h.K,Object(c.a)({type:"textarea",invalid:q.description&&!0},i))}}),q.description&&Object(g.jsx)(h.I,{children:q.description.message})]})]}),Object(g.jsx)(h.ib,{className:"my-2",children:Object(g.jsx)(h.B,{children:Object(g.jsxs)("div",{className:"d-lg-flex",children:[Object(g.jsx)("input",{type:"file",className:"hidden",multiple:!0,onChange:function(e){console.log(e.target.files)},ref:N}),Object(g.jsxs)(h.i,{type:"button",outline:!0,color:"primary",onClick:function(){return N.current.click()},children:[Object(g.jsx)(u.a,{size:14,className:"me-25"})," Add Attachment"]})]})})})]}),Object(g.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"assignee",children:"Assignee"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{control:z,name:"assignee",id:"assignee",render:function(e){var i=e.field,s=e.value,t=e.ref;return Object(g.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:t,className:r()("react-select",{"is-invalid":q.assignee})},i),{},{classNamePrefix:"select",options:U,isMulti:!0,value:s,onChange:oe}))}}),q.assignee&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(s=q.assignee)||void 0===s?void 0:s.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"reviewer",children:"Reviewer"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{control:z,name:"reviewer",id:"reviewer",render:function(e){var i=e.field,s=e.value,t=e.ref;return Object(g.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:t,className:r()("react-select",{"is-invalid":q.reviewer})},i),{},{classNamePrefix:"select",options:U,isMulti:!0,value:s,onChange:je}))}}),q.reviewer&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(l=q.reviewer)||void 0===l?void 0:l.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"start_date",children:"Start Date"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{value:S,name:"start_date",control:z,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var i=e.field,s=e.value;return Object(g.jsx)(m.a,{className:r()("form-control",{"is-invalid":q.start_date}),options:{dateFormat:"d-m-Y"},name:"start_date",onChange:function(e){return i.onChange(e)},value:s})}}),q.start_date&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(d=q.start_date)||void 0===d?void 0:d.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"end_date",children:"End Date"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{value:S,onChange:function(e){return P(e)},name:"end_date",control:z,rules:{required:!0},options:{dateFormat:"d-m-Y"},render:function(e){var i=e.field,s=e.value;return Object(g.jsx)(m.a,{className:r()("form-control",{"is-invalid":q.end_date}),options:{dateFormat:"d-m-Y"},name:"end_date",FormFeedback:!0,onChange:function(e){return i.onChange(e)},value:s})}}),q.end_date&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(j=q.end_date)||void 0===j?void 0:j.message})]})]}),Object(g.jsxs)(h.ib,{className:"mb-1",children:[Object(g.jsx)(h.N,{sm:"3",size:"lg",className:"form-label",for:"priority",children:"Priority"}),Object(g.jsxs)(h.B,{sm:"9",children:[Object(g.jsx)(x.a,{control:z,name:"priority",id:"priority",render:function(e){var i=e.field,s=e.value,t=e.ref;return Object(g.jsx)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({},i),{},{inputRef:t,className:r()("react-select",{"is-invalid":q.priority})},i),{},{classNamePrefix:"select",options:G,value:G.find((function(e){return e.value===s})),onChange:function(e){return i.onChange(e.value)}}))}}),q.priority&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(p=q.priority)||void 0===p?void 0:p.message})]})]})]})]})}),Object(g.jsx)("hr",{className:"invoice-spacing"}),Object(g.jsx)(h.ib,{className:"px-1",children:Object(g.jsxs)("div",{className:"form-check form-check-primary mx-2",children:[Object(g.jsx)(h.K,Object(c.a)(Object(c.a)({className:"form-check-input",defaultChecked:!0,type:"checkbox",id:"invoice_flag",name:"invoice_flag",value:!0},k("invoice_flag")),{},{onChange:function(){return te(!ce)}})),Object(g.jsx)(h.N,{className:"form-check-label",for:"invoice_flag",children:"Create Proposal for this Task"})]})}),Object(g.jsxs)(h.m,{className:"invoice-padding invoice-product-details",children:[ne.map((function(e,i){var s,t,a,n,l,d,o,j,m,u,O,f,p,N,_,y,C,S,P,w;return Object(g.jsx)("div",{className:"repeater-wrapper",children:Object(g.jsx)(h.ib,{children:Object(g.jsxs)(h.B,{className:"d-lg-flex product-details-border position-relative pe-0 ps-sm-0",sm:"12",children:[Object(g.jsxs)(h.ib,{className:"w-100 pe-lg-0 py-2 ms-sm-1",children:[Object(g.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"4",sm:"12",children:[Object(g.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Item"}),Object(g.jsx)(x.a,{control:z,name:"invoice_items.".concat(i,".item_id"),rules:{required:!0},render:function(e){var s,c,t=e.field,a=e.value,n=e.ref;return Object(g.jsx)(v.a,{inputRef:n,className:r()("react-select",{"is-invalid":null===(s=q.invoice_items)||void 0===s||null===(c=s[i])||void 0===c?void 0:c.item_id}),classNamePrefix:"select",options:Y,value:Y.find((function(e){return e.value===a})),onChange:function(e){return t.onChange(e.value)}})}}),(null===(s=q.invoice_items)||void 0===s||null===(t=s[i])||void 0===t?void 0:t.item_id)&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(a=q.invoice_items)||void 0===a||null===(n=a[i])||void 0===n||null===(l=n.item_id)||void 0===l?void 0:l.message})]}),Object(g.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(g.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"SAC Code"}),Object(g.jsx)(x.a,{name:"invoice_items.".concat(i,".sac_code"),control:z,render:function(e){var s,t,a=e.field;return Object(g.jsx)(h.K,Object(c.a)({type:"text",invalid:(null===(s=q.invoice_items)||void 0===s||null===(t=s[i])||void 0===t?void 0:t.sac_code)&&!0},a))}}),(null===(d=q.invoice_items)||void 0===d||null===(o=d[i])||void 0===o?void 0:o.sac_code)&&Object(g.jsx)(h.I,{children:null===(j=q.invoice_items)||void 0===j||null===(m=j[i])||void 0===m||null===(u=m.sac_code)||void 0===u?void 0:u.message})]}),Object(g.jsxs)(h.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(g.jsx)(h.u,{className:"col-title mb-md-2 mb-0",children:"Price"}),Object(g.jsx)(x.a,{name:"invoice_items.".concat(i,".price"),control:z,render:function(e){var s,t,a=e.field;return Object(g.jsx)(h.K,Object(c.a)({type:"number",invalid:(null===(s=q.invoice_items)||void 0===s||null===(t=s[i])||void 0===t?void 0:t.price)&&!0},a))}}),(null===(O=q.invoice_items)||void 0===O||null===(f=O[i])||void 0===f?void 0:f.price)&&Object(g.jsx)(h.I,{children:null===(p=q.invoice_items)||void 0===p||null===(N=p[i])||void 0===N||null===(_=N.price)||void 0===_?void 0:_.message})]}),Object(g.jsxs)(h.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(g.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Tax Rate"}),Object(g.jsx)(x.a,{control:z,name:"invoice_items.".concat(i,".tax_group_id"),rules:{required:!0},render:function(e){var s,c,t=e.field,a=e.value,n=e.ref;return Object(g.jsx)(v.a,{inputRef:n,className:r()("react-select",{"is-invalid":null===(s=q.invoice_items)||void 0===s||null===(c=s[i])||void 0===c?void 0:c.tax_group_id}),classNamePrefix:"select",options:$,value:$.find((function(e){return e.value===a})),onChange:function(e){return t.onChange(e.value)}})}}),(null===(y=q.invoice_items)||void 0===y||null===(C=y[i])||void 0===C?void 0:C.tax_group_id)&&Object(g.jsx)(h.I,{className:"text-danger",children:null===(S=q.invoice_items)||void 0===S||null===(P=S[i])||void 0===P||null===(w=P.tax_group_id)||void 0===w?void 0:w.message})]}),Object(g.jsx)(h.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:Object(g.jsx)(h.u,{className:"col-title mb-md-50 mb-0",children:"Amount"})})]}),Object(g.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(g.jsx)(b.a,{size:18,className:"cursor-pointer",onClick:function(){re(i)}})})]})})},i)})),Object(g.jsx)(h.ib,{className:"mt-1",children:Object(g.jsx)(h.B,{sm:"12",className:"px-0",children:Object(g.jsxs)(h.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return de()},children:[Object(g.jsx)(u.a,{size:14,className:"me-25"})," ",Object(g.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]})]}),Object(g.jsx)(h.l,{children:Object(g.jsx)(h.m,{children:Object(g.jsxs)("div",{className:"modal-footer border-0",children:[Object(g.jsx)(h.i,{className:"add-new-user",outline:!0,color:"warning",tag:n.b,to:"/task/list",children:"Cancel"}),Object(g.jsx)(h.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};i.default=function(){return Object(g.jsx)("div",{className:"invoice-add-wrapper",children:Object(g.jsx)(h.ib,{className:"invoice-add",children:Object(g.jsx)(h.B,{xl:12,md:12,sm:12,children:Object(g.jsx)(p,{})})})})}},490:function(e,i,s){},495:function(e,i,s){},502:function(e,i,s){}}]);
//# sourceMappingURL=78.bf05074d.chunk.js.map