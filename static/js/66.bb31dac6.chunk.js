(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[66],{1673:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n(135),i=n(4),s=n(18),l=n(1),r=n.n(l),o=n(2),d=n(11),b=n(132),j=n(6),m=n.n(j),u=n(133),f=n(147),O=n(5),h=n(818),x=n(929),v=n(511),g=n(509),p=n(521),N=n(522),y=n(12),_=n(91),B=(n(524),n(510),n(508),n(513),n(13)),C=Object(y.a)(),S=Object(y.e)(),E=function(){var e,t=/^[0-9\- ]{10,10}$/,n=Object(d.f)({}),l=Object(u.b)(),j=Object(o.useState)([]),E=Object(s.a)(j,2),A=E[0],P=E[1],w=Object(o.useState)([]),L=Object(s.a)(w,2),I=L[0],k=L[1],q=Object(o.useState)([]),z=Object(s.a)(q,2),T=z[0],Z=z[1],D=Object(o.useState)([]),R=Object(s.a)(D,2),V=R[0],G=R[1],J=Object(o.useState)([]),M=Object(s.a)(J,2),$=M[0],F=M[1],H=Object(o.useState)([]),K=Object(s.a)(H,2),Q=K[0],U=K[1],W=Object(o.useState)(null),X=Object(s.a)(W,2),Y=X[0],ee=X[1],te=Object(u.c)((function(e){return e.client})),ne=p.d().shape({createdBy:p.c().default(y.e),organization:p.c().default(C.id),contactPersonName:p.f().required("Please Enter a Contact Person Name"),name:p.f().required("Please Enter Business Name.").default(""),contactNumber:p.f().required("Please Enter Conatct Number").matches(t,{message:"Phone number is not valid",excludeEmptyString:!0}),email:p.f().email("Please Enter valid Email").required("Please Enter valid Email"),businessEntity:p.f().required("Please Select Business Enity."),gstRegistrationType:p.f().nullable(),gstin:p.f().nullable(),placeOfSupply:p.f().nullable(),currency:p.f().default(C.currency),billingAddressLine1:p.f().nullable(),billingAddressLine2:p.f().nullable(),billingAddressCity:p.f().nullable(),billingAddressState:p.c().nullable(),billingAddressCountry:p.c().nullable(),billingAddressZip:p.f().matches(/^[0-9\- ]{6,6}$/,{message:"Zip Code is not valid",excludeEmptyString:!0}),contact_info:p.a().of(p.d().shape({createdBy:p.f().default(S),name:p.f().nullable(),email:p.f().email().nullable(),designation:p.f().nullable(),contactNumber:p.f().nullable().matches(t,{message:"Phone number is not valid",excludeEmptyString:!0})}))}),ce=Object(g.f)({resolver:Object(N.a)(ne),defaultValues:ne.cast()}),ae=ce.handleSubmit,ie=ce.control,se=ce.formState.errors,le=ce.setError,re=Object(g.e)({name:"contact_info",control:ie}),oe=re.fields,de=re.append,be=re.remove;Object(o.useEffect)((function(){null!==te.clientErrors&&Object.keys(te.clientErrors).map((function(e){le(e,{type:"custom",message:te.clientErrors[e][0]})}))}),[te.clientErrors]);var je=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.contact_info,U((function(e){return[].concat(Object(a.a)(e),Object(a.a)(n))})),delete t.contact_info,e.next=5,l(Object(f.a)(t));case 5:if(void 0!==(c=e.sent).payload.client){e.next=10;break}return e.abrupt("return",!1);case 10:ee(c.payload.client.id);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=!0;ie._formValues.contact_info.length>0&&(e=!1),de({createdBy:S,organizationId:C.id,contactId:0,name:"",email:"",contactNumber:"",designation:"",primaryStatus:e})},ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(B.jsxs)(_.jb,{className:"mb-1",children:[Object(B.jsx)(_.O,{sm:"4",size:"lg",className:m()("form-label ".concat(n?"required":"")),for:t,children:e}),Object(B.jsxs)(_.B,{sm:"8",children:[Object(B.jsx)(g.a,{id:t,name:t,control:ie,render:function(e){var n=e.field;return Object(B.jsx)(_.L,Object(c.a)({invalid:se[t]&&!0},n))}}),se[t]&&Object(B.jsx)(_.I,{children:se[t].message})]})]})},fe=function(e,t,n){var a,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(B.jsxs)(_.jb,{className:"mb-1",children:[Object(B.jsx)(_.O,{sm:"4",size:"lg",className:m()("form-label ".concat(i?"required":"")),for:t,children:e}),Object(B.jsxs)(_.B,{sm:"8",children:[Object(B.jsx)(g.a,{control:ie,name:t,id:t,render:function(e){var a=e.field,i=e.ref;return Object(B.jsx)(v.a,Object(c.a)(Object(c.a)({inputRef:i,className:m()("react-select",{"is-invalid":se[t]})},a),{},{isDisabled:"currency"===t,classNamePrefix:"select",options:n,value:n.find((function(e){return e.id===a.value})),onChange:function(e){return a.onChange(e.id)},getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}}))}}),se[t]&&Object(B.jsx)(_.I,{className:"text-danger",children:null===(a=se[t])||void 0===a?void 0:a.message})]})]})};return Object(o.useEffect)((function(){null===Y&&(O.a.post("/businessentities/list").then((function(e){var t=e.data;P(t.businessentities)})),O.a.post("/countries/list").then((function(e){var t=e.data;Z(t.countries)})),O.a.post("/currencies/list").then((function(e){var t=e.data;G(t.currencies)})),O.a.post("/gstregistrationtypes/list").then((function(e){var t=e.data;F(t.gstregistrationtypes)})),O.a.post("/states/list").then((function(e){var t=e.data;k(t.states)})),me()),null!==Y&&function(e){if(Q.length>0){Q.forEach((function(t,n){Q[n].contactId=e,""===t.name&&""===t.email&&Q.splice(n,1)}));var t=Q;t.length>0&&l(Object(f.b)({rows:t})),n("/client/view/".concat(e))}}(Y)}),[Q,Y]),Object(B.jsxs)("form",{onSubmit:ae(je),children:[Object(B.jsxs)(_.l,{className:"invoice-preview-card",children:[Object(B.jsx)(_.p,{children:Object(B.jsx)(_.v,{children:" Add Client"})}),Object(B.jsxs)(_.m,{className:"pb-0",children:[Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Contact Person Name","contactPersonName",!0)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Business Name","name",!0)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Mobile Number","contactNumber",!0)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Email ID","email",!0)})]}),Object(B.jsx)(_.jb,{children:Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("Business Entity","businessEntity",A,!0)})})]}),Object(B.jsx)("hr",{className:"invoice-spacing"}),se.contact_info&&Object(B.jsx)("p",{className:"text-danger ms-2",children:null===(e=se.contact_info)||void 0===e?void 0:e.message}),Object(B.jsxs)(_.m,{className:"invoice-padding invoice-product-details",children:[oe.map((function(e,t){var n,a,i,s,l,r,o,d,b,j,m,u,f,O,x,v;return Object(B.jsx)("div",{className:"repeater-wrapper",children:Object(B.jsx)(_.jb,{children:Object(B.jsxs)(_.B,{className:"d-lg-flex product-details-border position-relative pe-0",sm:"12",children:[Object(B.jsxs)(_.jb,{className:"w-100 pe-lg-0 pe-1 py-2",children:[Object(B.jsxs)(_.B,{className:"mb-lg-0 mb-2 mt-lg-0 mt-2 col-lg-3 col-sm-12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"First Name"}),Object(B.jsx)(g.a,{control:ie,id:"contact_info_firstName",name:"contact_info[".concat(t,"].name"),render:function(e){var n,a,i=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"text",onChange:function(e){i.onChange(e)},invalid:(null===(n=se.contact_info)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.name)&&!0},i))}}),(null===(n=se.contact_info)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.name)&&Object(B.jsx)(_.I,{children:null===(i=se.contact_info)||void 0===i||null===(s=i[t])||void 0===s?void 0:s.name.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 my-2 col-lg-3 col-sm-12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-2 mb-0 ",children:"Email"}),Object(B.jsx)(g.a,{control:ie,id:"contact_info_email",name:"contact_info[".concat(t,"].email"),render:function(e){var n,a,i=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"email",onChange:function(e){i.onChange(e)},invalid:(null===(n=se.contact_info)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.email)&&!0},i))}}),(null===(l=se.contact_info)||void 0===l||null===(r=l[t])||void 0===r?void 0:r.email)&&Object(B.jsx)(_.I,{children:null===(o=se.contact_info)||void 0===o||null===(d=o[t])||void 0===d?void 0:d.email.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 my-2",lg:"2",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-2 mb-0",children:"Mobile"}),Object(B.jsx)(g.a,{control:ie,id:"contact_info_contactNumber",name:"contact_info[".concat(t,"].contactNumber"),render:function(e){var n,a,i=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"number",onChange:function(e){i.onChange(e)},invalid:(null===(n=se.contact_info)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.contactNumber)&&!0},i))}}),(null===(b=se.contact_info)||void 0===b||null===(j=b[t])||void 0===j?void 0:j.contactNumber)&&Object(B.jsx)(_.I,{children:null===(m=se.contact_info)||void 0===m||null===(u=m[t])||void 0===u?void 0:u.contactNumber.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 mt-2",lg:"2",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"Designation"}),Object(B.jsx)(g.a,{control:ie,id:"contact_info_designation",name:"contact_info[".concat(t,"].designation"),render:function(e){var n,a,i=e.field;return Object(B.jsx)(_.L,Object(c.a)({type:"text onChange={(val) => { field.onChange(val)}}",invalid:(null===(n=se.contact_info)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.designation)&&!0},i))}}),(null===(f=se.contact_info)||void 0===f||null===(O=f[t])||void 0===O?void 0:O.designation)&&Object(B.jsx)(_.I,{children:null===(x=se.contact_info)||void 0===x||null===(v=x[t])||void 0===v?void 0:v.designation.message})]}),Object(B.jsxs)(_.B,{className:"my-lg-0 mt-2",lg:"1",sm:"12",children:[Object(B.jsx)(_.u,{className:"col-title mb-md-50 mb-0",children:"Primary"}),Object(B.jsx)("div",{className:"form-switch form-check-primary",children:Object(B.jsx)(g.a,{control:ie,id:"contact_info_primaryStatus",name:"contact_info[".concat(t,"].primaryStatus"),render:function(e){var t=e.field;return Object(B.jsx)(_.L,Object(c.a)(Object(c.a)({type:"switch",onChange:function(e){t.onChange(e)}},t),{},{defaultChecked:t.value}))}})})]})]}),Object(B.jsx)("div",{className:"d-lg-flex justify-content-center border-start invoice-product-actions py-50 px-25",children:Object(B.jsx)(h.a,{size:18,className:"cursor-pointer",onClick:function(){be(t)}})})]})})},e.id)})),Object(B.jsx)(_.jb,{className:"mt-1",children:Object(B.jsx)(_.B,{sm:"12",className:"px-0",children:Object(B.jsxs)(_.i,{color:"primary",size:"sm",className:"btn-add-new",onClick:function(){return me()},children:[Object(B.jsx)(x.a,{size:14,className:"me-25"})," ",Object(B.jsx)("span",{className:"align-middle",children:"Add Item"})]})})})]}),Object(B.jsx)("hr",{className:"invoice-spacing"}),Object(B.jsxs)(_.m,{children:[Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("GST Type","gstRegistrationType",$)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("Place of Supply","placeOfSupply",I)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("GSTIN","gstin")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("Currency","currency",V,!1)})]})]}),Object(B.jsxs)(_.m,{className:"",children:[Object(B.jsx)("h4",{className:"text-primary",children:"Billing Address"}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Address Line1","billingAddressLine1")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Address Line2","billingAddressLine2")})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("City","billingAddressCity")}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("State","billingAddressState",I)})]}),Object(B.jsxs)(_.jb,{children:[Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:fe("Country","billingAddressCountry",T)}),Object(B.jsx)(_.B,{md:"6",className:"mb-1",children:ue("Zip Code","billingAddressZip")})]})]})]}),Object(B.jsx)(_.l,{children:Object(B.jsx)(_.m,{children:Object(B.jsxs)("div",{className:"modal-footer border-0",children:[Object(B.jsx)(_.i,{color:"warning",outline:!0,tag:b.b,to:"/client/list",children:"Cancel"}),Object(B.jsx)(_.i,{color:"primary",type:"submit",children:"Save"})]})})})]})};t.default=function(){return Object(B.jsx)("div",{className:"invoice-add-wrapper",children:Object(B.jsx)(_.jb,{className:"invoice-add",children:Object(B.jsx)(_.B,{xl:12,md:12,sm:12,children:Object(B.jsx)(E,{})})})})}},508:function(e,t,n){},513:function(e,t,n){},524:function(e,t,n){}}]);
//# sourceMappingURL=66.bb31dac6.chunk.js.map